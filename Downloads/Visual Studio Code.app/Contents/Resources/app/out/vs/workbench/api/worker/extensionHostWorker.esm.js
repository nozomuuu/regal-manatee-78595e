/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var _f=function(e,t){return _f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},_f(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_f(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,f=!1,p=r.length-1;p>=0;p--){var m={};for(var w in i)m[w]=w==="access"?{}:i[w];for(var w in i.access)m.access[w]=i.access[w];m.addInitializer=function(P){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(P||null))};var $=(0,r[p])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if($===void 0)continue;if($===null||typeof $!="object")throw new TypeError("Object expected");(h=o($.get))&&(u.get=h),(h=o($.set))&&(u.set=h),(h=o($.init))&&s.unshift(h)}else(h=o($))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),f=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(m){return Promise.resolve(m).then(p,h)}}function a(p,m){i[p]&&(s[p]=function(w){return new Promise(function($,P){n.push([p,w,$,P])>1||c(p,w)})},m&&(s[p]=m(s[p])))}function c(p,m){try{l(i[p](m))}catch(w){f(n[0][3],w)}}function l(p){p.value instanceof __await?Promise.resolve(p.value.v).then(u,h):f(n[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,m){p(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var bE=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return bE(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var yE=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new yE(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var $r=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},xE=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?rn.isErrorNoTelemetry(e)?new rn(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},zl=new xE;function Bf(e){zl.setUnexpectedErrorHandler(e)}function Wl(e){zl.onUnexpectedError(e)}function Sr(e){en(e)||zl.onUnexpectedError(e)}function zf(e){en(e)||zl.onUnexpectedExternalError(e)}function $a(e){if(e instanceof Error){const{name:t,message:r}=e,i=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:i,noTelemetry:rn.isErrorNoTelemetry(e)}}return e}function EE(e){let t;return e.noTelemetry?t=new rn:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var Vl="Canceled";function en(e){return e instanceof $i?!0:e instanceof Error&&e.name===Vl&&e.message===Vl}var $i=class extends Error{constructor(){super(Vl),this.name=this.message}};function D0(){const e=new Error(Vl);return e.name=e.message,e}function Ae(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Wf(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var tn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},kE=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Vf=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},rn=class c0 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof c0)return t;const r=new c0;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},P0=class ux extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,ux.prototype)}};function $E(e,t){const r=SE(e,t);if(r!==-1)return e[r]}function SE(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function CE(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var fL=class hx{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(hx.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=CE(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Bi(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function IE(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function A0(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function DE(e,t,r){const i=A0(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function Ft(e){return e.filter(t=>!!t)}function PE(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function qf(e){return!Array.isArray(e)||e.length===0}function Sa(e){return Array.isArray(e)&&e.length>0}function Zn(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function T0(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function Gf(e,t){return Array.isArray(e)?e.map(t):t(e)}function ri(e){return Array.isArray(e)?e:[e]}var Qf;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Qf||(Qf={}));function AE(e,t){return(r,i)=>t(e(r),e(i))}var TE=(e,t)=>e-t,pL=class $f{static{this.empty=new $f(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new $f(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new $f(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||Qf.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},R0;function L0(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function RE(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var gL=class{static{R0=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[R0]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},N0,F0,M0;function LE(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var NE=class{constructor(e,t){this.uri=e,this.value=t}};function FE(e){return Array.isArray(e)}var Xt=class Rl{static{this.c=t=>t.toString()}constructor(t,r){if(this[N0]="ResourceMap",t instanceof Rl)this.d=new Map(t.d),this.e=r??Rl.c;else if(FE(t)){this.d=new Map,this.e=r??Rl.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??Rl.c}set(t,r){return this.d.set(this.e(t),new NE(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(N0=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},O0=class{constructor(e,t){this[F0]="ResourceSet",!e||typeof e=="function"?this.c=new Xt(e):(this.c=new Xt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(F0=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},U0;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(U0||(U0={}));var ME=class{constructor(){this[M0]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.m(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.m(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.k(i);break;case 1:this.j(i);break;case 2:this.k(i);break;default:this.k(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[(M0=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},OE=class extends ME{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},Jf=class extends OE{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},H0=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function Zf(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}var Vr;(function(e){function t(z){return z&&typeof z=="object"&&typeof z[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(z){yield z}e.single=s;function n(z){return t(z)?z:s(z)}e.wrap=n;function o(z){return z||r}e.from=o;function*a(z){for(let W=z.length-1;W>=0;W--)yield z[W]}e.reverse=a;function c(z){return!z||z[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(z){return z[Symbol.iterator]().next().value}e.first=l;function u(z,W){let J=0;for(const ne of z)if(W(ne,J++))return!0;return!1}e.some=u;function h(z,W){for(const J of z)if(W(J))return J}e.find=h;function*f(z,W){for(const J of z)W(J)&&(yield J)}e.filter=f;function*p(z,W){let J=0;for(const ne of z)yield W(ne,J++)}e.map=p;function*m(z,W){let J=0;for(const ne of z)yield*W(ne,J++)}e.flatMap=m;function*w(...z){for(const W of z)yield*W}e.concat=w;function $(z,W,J){let ne=J;for(const Y of z)ne=W(ne,Y);return ne}e.reduce=$;function*P(z,W,J=z.length){for(W<0&&(W+=z.length),J<0?J+=z.length:J>z.length&&(J=z.length);W<J;W++)yield z[W]}e.slice=P;function A(z,W=Number.POSITIVE_INFINITY){const J=[];if(W===0)return[J,z];const ne=z[Symbol.iterator]();for(let Y=0;Y<W;Y++){const se=ne.next();if(se.done)return[J,e.empty()];J.push(se.value)}return[J,{[Symbol.iterator](){return ne}}]}e.consume=A;async function L(z){const W=[];for await(const J of z)W.push(J);return Promise.resolve(W)}e.asyncToArray=L})(Vr||(Vr={}));var UE=!1,Xn=null,mL=class dx{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:dx.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,f){for(;h.length>0&&f.some(p=>typeof p=="string"?p===h[0]:h[0].match(p));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new H0;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(AE(c=>c.idx,TE));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${f}`;const m=n.get(l.slice(0,h).join(`
`)),w=L0([...m].map($=>s($)[h]),$=>$);delete w[l[h]];for(const[$,P]of Object.entries(w))u.unshift(`    - stacktraces of ${P.length} other leaks continue with ${$}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function HE(e){Xn=e}if(UE){const e="__is_disposable_tracked__";HE(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==Ee.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==Ee.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function Yn(e){return Xn?.trackDisposable(e),e}function Kn(e){Xn?.markAsDisposed(e)}function Ca(e,t){Xn?.setParent(e,t)}function jE(e,t){if(Xn)for(const r of e)Xn.setParent(r,t)}function _E(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function zi(e){if(Vr.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function j0(...e){const t=$e(()=>zi(e));return jE(e,t),t}function $e(e){const t=Yn({dispose:Zf(()=>{Kn(t),e()})});return t}var Pe=class fx{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,Yn(this)}dispose(){this.g||(Kn(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{zi(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Ca(t,this),this.g?fx.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Ca(t,null))}},Ee=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new Pe,Yn(this),Ca(this.q,this)}dispose(){Kn(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},ys=class{constructor(){this.b=!1,Yn(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Ca(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,Kn(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Ca(e,null),e}},Xf=class{constructor(){this.a=new Map,this.b=!1,Yn(this)}dispose(){Kn(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{zi(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function BE(e,t){return new Promise((r,i)=>{const s=[];zE(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function zE(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}var ql=typeof Buffer<"u",WE=new $r(()=>new Uint8Array(256)),Yf,Kf,Ne=class Zr{static alloc(t){return ql?new Zr(Buffer.allocUnsafe(t)):new Zr(new Uint8Array(t))}static wrap(t){return ql&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Zr(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&ql?new Zr(Buffer.from(t)):(Yf||(Yf=new TextEncoder),new Zr(Yf.encode(t)))}static fromByteArray(t){const r=Zr.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=Zr.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Zr.alloc(this.byteLength);return t.set(this),t}toString(){return ql?this.buffer.toString():(Kf||(Kf=new TextDecoder),Kf.decode(this.buffer))}slice(t,r){return new Zr(this.buffer.subarray(t,r))}set(t,r){if(t instanceof Zr)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Gl(this.buffer,t)}writeUInt32BE(t,r){Ql(this.buffer,t,r)}readUInt32LE(t){return QE(this.buffer,t)}writeUInt32LE(t,r){JE(this.buffer,t,r)}readUInt8(t){return ZE(this.buffer,t)}writeUInt8(t,r){XE(this.buffer,t,r)}indexOf(t,r=0){return VE(this.buffer,t instanceof Zr?t.buffer:t,r)}};function VE(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=WE.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function qE(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function GE(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function Gl(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Ql(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function QE(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function JE(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function ZE(e,t){return e[t]}function XE(e,t,r){e[r]=t}function YE(e){return BE(e,t=>Ne.concat(t))}function _0(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return Ne.wrap(s).slice(0,o)}var KE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ek="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function ep({buffer:e},t=!0,r=!1){const i=r?ek:KE;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}var kt=class Sf{static{this.Undefined=new Sf(void 0)}constructor(t){this.element=t,this.next=Sf.Undefined,this.prev=Sf.Undefined}},Ia=class{constructor(){this.a=kt.Undefined,this.b=kt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===kt.Undefined}clear(){let e=this.a;for(;e!==kt.Undefined;){const t=e.next;e.prev=kt.Undefined,e.next=kt.Undefined,e=t}this.a=kt.Undefined,this.b=kt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new kt(e);if(this.a===kt.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==kt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==kt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==kt.Undefined&&e.next!==kt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===kt.Undefined&&e.next===kt.Undefined?(this.a=kt.Undefined,this.b=kt.Undefined):e.next===kt.Undefined?(this.b=this.b.prev,this.b.next=kt.Undefined):e.prev===kt.Undefined&&(this.a=this.a.next,this.a.prev=kt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==kt.Undefined;)yield e.element,e=e.next}},tk=globalThis.performance&&typeof globalThis.performance.now=="function",sn=class px{static create(t){return new px(t)}constructor(t){this.c=tk&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},rk=!1,B0=!1,ik=!1,Et;(function(e){e.None=()=>Ee.None;function t(X){if(ik){const{onDidAddListener:q}=X,ie=tp.create();let G=0;X.onDidAddListener=()=>{++G===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),ie.print()),q?.()}}}function r(X,q){return p(X,()=>{},0,void 0,!0,void 0,q)}e.defer=r;function i(X){return(q,ie=null,G)=>{let ae=!1,xe;return xe=X(pe=>{if(!ae)return xe?xe.dispose():ae=!0,q.call(ie,pe)},null,G),ae&&xe.dispose(),xe}}e.once=i;function s(X,q){return e.once(e.filter(X,q))}e.onceIf=s;function n(X,q,ie){return h((G,ae=null,xe)=>X(pe=>G.call(ae,q(pe)),null,xe),ie)}e.map=n;function o(X,q,ie){return h((G,ae=null,xe)=>X(pe=>{q(pe),G.call(ae,pe)},null,xe),ie)}e.forEach=o;function a(X,q,ie){return h((G,ae=null,xe)=>X(pe=>q(pe)&&G.call(ae,pe),null,xe),ie)}e.filter=a;function c(X){return X}e.signal=c;function l(...X){return(q,ie=null,G)=>{const ae=j0(...X.map(xe=>xe(pe=>q.call(ie,pe))));return f(ae,G)}}e.any=l;function u(X,q,ie,G){let ae=ie;return n(X,xe=>(ae=q(ae,xe),ae),G)}e.reduce=u;function h(X,q){let ie;const G={onWillAddFirstListener(){ie=X(ae.fire,ae)},onDidRemoveLastListener(){ie?.dispose()}};q||t(G);const ae=new R(G);return q?.add(ae),ae.event}function f(X,q){return q instanceof Array?q.push(X):q&&q.add(X),X}function p(X,q,ie=100,G=!1,ae=!1,xe,pe){let Ke,ze,yt,xt=0,jt;const rt={leakWarningThreshold:xe,onWillAddFirstListener(){Ke=X(Kr=>{xt++,ze=q(ze,Kr),G&&!yt&&(Qt.fire(ze),ze=void 0),jt=()=>{const ei=ze;ze=void 0,yt=void 0,(!G||xt>1)&&Qt.fire(ei),xt=0},typeof ie=="number"?(clearTimeout(yt),yt=setTimeout(jt,ie)):yt===void 0&&(yt=0,queueMicrotask(jt))})},onWillRemoveListener(){ae&&xt>0&&jt?.()},onDidRemoveLastListener(){jt=void 0,Ke.dispose()}};pe||t(rt);const Qt=new R(rt);return pe?.add(Qt),Qt.event}e.debounce=p;function m(X,q=0,ie){return e.debounce(X,(G,ae)=>G?(G.push(ae),G):[ae],q,void 0,!0,void 0,ie)}e.accumulate=m;function w(X,q=(G,ae)=>G===ae,ie){let G=!0,ae;return a(X,xe=>{const pe=G||!q(xe,ae);return G=!1,ae=xe,pe},ie)}e.latch=w;function $(X,q,ie){return[e.filter(X,q,ie),e.filter(X,G=>!q(G),ie)]}e.split=$;function P(X,q=!1,ie=[],G){let ae=ie.slice(),xe=X(ze=>{ae?ae.push(ze):Ke.fire(ze)});G&&G.add(xe);const pe=()=>{ae?.forEach(ze=>Ke.fire(ze)),ae=null},Ke=new R({onWillAddFirstListener(){xe||(xe=X(ze=>Ke.fire(ze)),G&&G.add(xe))},onDidAddFirstListener(){ae&&(q?setTimeout(pe):pe())},onDidRemoveLastListener(){xe&&xe.dispose(),xe=null}});return G&&G.add(Ke),Ke.event}e.buffer=P;function A(X,q){return(G,ae,xe)=>{const pe=q(new z);return X(function(Ke){const ze=pe.evaluate(Ke);ze!==L&&G.call(ae,ze)},void 0,xe)}}e.chain=A;const L=Symbol("HaltChainable");class z{constructor(){this.f=[]}map(q){return this.f.push(q),this}forEach(q){return this.f.push(ie=>(q(ie),ie)),this}filter(q){return this.f.push(ie=>q(ie)?ie:L),this}reduce(q,ie){let G=ie;return this.f.push(ae=>(G=q(G,ae),G)),this}latch(q=(ie,G)=>ie===G){let ie=!0,G;return this.f.push(ae=>{const xe=ie||!q(ae,G);return ie=!1,G=ae,xe?ae:L}),this}evaluate(q){for(const ie of this.f)if(q=ie(q),q===L)break;return q}}function W(X,q,ie=G=>G){const G=(...Ke)=>pe.fire(ie(...Ke)),ae=()=>X.on(q,G),xe=()=>X.removeListener(q,G),pe=new R({onWillAddFirstListener:ae,onDidRemoveLastListener:xe});return pe.event}e.fromNodeEventEmitter=W;function J(X,q,ie=G=>G){const G=(...Ke)=>pe.fire(ie(...Ke)),ae=()=>X.addEventListener(q,G),xe=()=>X.removeEventListener(q,G),pe=new R({onWillAddFirstListener:ae,onDidRemoveLastListener:xe});return pe.event}e.fromDOMEventEmitter=J;function ne(X){return new Promise(q=>i(X)(q))}e.toPromise=ne;function Y(X){const q=new R;return X.then(ie=>{q.fire(ie)},()=>{q.fire(void 0)}).finally(()=>{q.dispose()}),q.event}e.fromPromise=Y;function se(X,q){return X(ie=>q.fire(ie))}e.forward=se;function Te(X,q,ie){return q(ie),X(G=>q(G))}e.runAndSubscribe=Te;class ve{constructor(q,ie){this._observable=q,this.f=0,this.g=!1;const G={onWillAddFirstListener:()=>{q.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{q.removeObserver(this)}};ie||t(G),this.emitter=new R(G),ie&&ie.add(this.emitter)}beginUpdate(q){this.f++}handlePossibleChange(q){}handleChange(q,ie){this.g=!0}endUpdate(q){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function Ze(X,q){return new ve(X,q).emitter.event}e.fromObservable=Ze;function at(X){return(q,ie,G)=>{let ae=0,xe=!1;const pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(X.reportChanges(),xe&&(xe=!1,q.call(ie)))},handlePossibleChange(){},handleChange(){xe=!0}};X.addObserver(pe),X.reportChanges();const Ke={dispose(){X.removeObserver(pe)}};return G instanceof Pe?G.add(Ke):Array.isArray(G)&&G.push(Ke),Ke}}e.fromObservableLight=at})(Et||(Et={}));var sk=class l0{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${l0.f++}`,l0.all.add(this)}start(t){this.g=new sn,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},z0=-1,nk=class gx{static{this.f=1}constructor(t,r,i=(gx.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new ok(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},tp=class mx{static create(){const t=new Error;return new mx(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},ok=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},ak=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},ck=0,Jl=class{constructor(e){this.value=e,this.id=ck++}},lk=2,W0=(e,t)=>{if(e instanceof Jl)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},Zl;if(rk){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),Zl=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var R=class{constructor(e){this.z=0,this.f=e,this.g=z0>0||this.f?.leakWarningThreshold?new nk(e?.onListenerError??Sr,this.f?.leakWarningThreshold??z0):void 0,this.j=this.f?._profName?new sk(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(B0){const e=this.u;queueMicrotask(()=>{W0(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new ak(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||Sr)(l),Ee.None}if(this.m)return Ee.None;t&&(e=e.bind(t));const i=new Jl(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=tp.create(),s=this.g.check(i.stack,this.z+1)),B0&&(i.stack=n??tp.create()),this.u?this.u instanceof Jl?(this.w??=new uk,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.z++;const o=$e(()=>{Zl?.unregister(o),s?.(),this.A(i)});if(r instanceof Pe?r.add(o):Array.isArray(r)&&r.push(o),Zl){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);Zl.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*lk<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||Sr;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Jl)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},uk=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Da=class extends R{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new Ia),W0(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){Sr(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Sr(c.reason)})}}},Xl=class extends R{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Ia,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},hk=class extends Xl{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},Pa;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Pa||(Pa={}));var V0;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(V0||(V0={}));var q0;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(q0||(q0={}));function G0(e){const t=Ne.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function dk(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var Q0;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(Q0||(Q0={}));var Aa={exports:{}};(function(){function t(n){const o=[];typeof n=="number"&&o.push("code/timeOrigin",n);function a(l){o.push(l,Date.now())}function c(){const l=[];for(let u=0;u<o.length;u+=2)l.push({name:o[u],startTime:o[u+1]});return l}return{mark:a,getMarks:c}}function r(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?t():{mark(n){performance.mark(n)},getMarks(){let n=performance.timeOrigin;typeof n!="number"&&(n=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const o=[{name:"code/timeOrigin",startTime:Math.round(n)}];for(const a of performance.getEntriesByType("mark"))o.push({name:a.name,startTime:Math.round(n+a.startTime)});return o}};if(typeof process=="object"){const n=performance?.timeOrigin;return t(n)}else return console.trace("perf-util loaded in UNKNOWN environment"),t()}function i(n){return n.MonacoPerformanceMarks||(n.MonacoPerformanceMarks=r()),n.MonacoPerformanceMarks}var s;typeof global=="object"?s=global:typeof self=="object"?s=self:s={},typeof Aa=="object"&&typeof Aa.exports=="object"?Aa.exports=i(s):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),s.perf=i(s))})();var lr=Aa.exports.mark,fk=Aa.exports.getMarks;function pk(){return globalThis._VSCODE_NLS_MESSAGES}function J0(){return globalThis._VSCODE_NLS_LANGUAGE}var gk=J0()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Yl(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),gk&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function d(e,t,...r){return Yl(typeof e=="number"?Z0(e,t):t,r)}function Z0(e,t){const r=pk()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function rp(e,t,...r){let i;typeof e=="number"?i=Z0(e,t):i=t;const s=Yl(i,r);return{value:s,original:t===i?s:Yl(t,r)}}var nn="en",Ta=!1,Ra=!1,La=!1,mk=!1,X0=!1,ip=!1,vk=!1,Y0=!1,K0=!1,wk=!1,Kl=void 0,eu=nn,ew=nn,bk=void 0,Wi=void 0,Vi=globalThis,Mr=void 0;typeof Vi.vscode<"u"&&typeof Vi.vscode.process<"u"?Mr=Vi.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Mr=process);var tw=typeof Mr?.versions?.electron=="string",yk=tw&&Mr?.type==="renderer";if(typeof Mr=="object"){Ta=Mr.platform==="win32",Ra=Mr.platform==="darwin",La=Mr.platform==="linux",mk=La&&!!Mr.env.SNAP&&!!Mr.env.SNAP_REVISION,vk=tw,K0=!!Mr.env.CI||!!Mr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Kl=nn,eu=nn;const e=Mr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Kl=t.userLocale,ew=t.osLocale,eu=t.resolvedLanguage||nn,bk=t.languagePack?.translationsConfigFile}catch{}X0=!0}else typeof navigator=="object"&&!yk?(Wi=navigator.userAgent,Ta=Wi.indexOf("Windows")>=0,Ra=Wi.indexOf("Macintosh")>=0,Y0=(Wi.indexOf("Macintosh")>=0||Wi.indexOf("iPad")>=0||Wi.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,La=Wi.indexOf("Linux")>=0,wk=Wi?.indexOf("Mobi")>=0,ip=!0,eu=J0()||nn,Kl=navigator.language.toLowerCase(),ew=Kl):console.error("Unable to resolve platform.");var rw;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(rw||(rw={}));function xk(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var sp=0;Ra?sp=1:Ta?sp=3:La&&(sp=2);var Cr=Ta,ii=Ra,xs=La,Ek=X0,np=ip,kk=ip&&typeof Vi.importScripts=="function",$k=kk?Vi.origin:void 0,on=K0,Si=Wi,Es=eu,iw;(function(e){function t(){return Es}e.value=t;function r(){return Es.length===2?Es==="en":Es.length>=3?Es[0]==="e"&&Es[1]==="n"&&Es[2]==="-":!1}e.isDefaultVariant=r;function i(){return Es==="en"}e.isDefault=i})(iw||(iw={}));var Sk=typeof Vi.postMessage=="function"&&!Vi.importScripts,sw=(()=>{if(Sk){const e=[];Vi.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),Vi.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),nw;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(nw||(nw={}));var Ck=Ra||Y0?2:Ta?1:3,ow=!0,aw=!1;function cw(){if(!aw){aw=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,ow=new Uint16Array(e.buffer)[0]===513}return ow}var lw=!!(Si&&Si.indexOf("Chrome")>=0),Ik=!!(Si&&Si.indexOf("Firefox")>=0),Dk=!!(!lw&&Si&&Si.indexOf("Safari")>=0),Pk=!!(Si&&Si.indexOf("Edg/")>=0),vL=!!(Si&&Si.indexOf("Android")>=0),an,op=globalThis.vscode;if(typeof op<"u"&&typeof op.process<"u"){const e=op.process;an={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?an={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:an={get platform(){return Cr?"win32":ii?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var eo=an.cwd,ap=an.env,Ak=an.platform,wL=an.arch,Tk=65,Rk=97,Lk=90,Nk=122,ks=46,Yt=47,Ir=92,$s=58,Fk=63,uw=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function Mk(e,t){if(e===null||typeof e!="object")throw new uw(t,"Object",e)}function Dt(e,t){if(typeof e!="string")throw new uw(t,"string",e)}var Dr=Ak==="win32";function Fe(e){return e===Yt||e===Ir}function cp(e){return e===Yt}function Ss(e){return e>=Tk&&e<=Lk||e>=Rk&&e<=Nk}function tu(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=Yt}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==ks||s.charCodeAt(s.length-2)!==ks){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===ks&&a!==-1?++a:a=-1}return s}function Ok(e){return e?`${e[0]==="."?"":"."}${e}`:""}function hw(e,t){Mk(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${Ok(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var Pt={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Dt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=eo():(n=ap[`=${t}`]||eo(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Ir)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Fe(u)&&(a=1,l=!0);else if(Fe(u))if(l=!0,Fe(n.charCodeAt(1))){let h=2,f=h;for(;h<o&&!Fe(n.charCodeAt(h));)h++;if(h<o&&h!==f){const p=n.slice(f,h);for(f=h;h<o&&Fe(n.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!Fe(n.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${p}\\${n.slice(f,h)}`,a=h)}}}else a=1;else Ss(u)&&n.charCodeAt(1)===$s&&(c=n.slice(0,2),a=2,o>2&&Fe(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=tu(r,!i,"\\",Fe),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){Dt(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return cp(n)?"\\":e;if(Fe(n))if(s=!0,Fe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Fe(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Fe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Fe(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else Ss(n)&&e.charCodeAt(1)===$s&&(i=e.slice(0,2),r=2,t>2&&Fe(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?tu(e.slice(r),!s,"\\",Fe):"";return o.length===0&&!s&&(o="."),o.length>0&&Fe(e.charCodeAt(t-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){Dt(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return Fe(r)||t>2&&Ss(r)&&e.charCodeAt(1)===$s&&Fe(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];Dt(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&Fe(r.charCodeAt(0))){++s;const n=r.length;n>1&&Fe(r.charCodeAt(1))&&(++s,n>2&&(Fe(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&Fe(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Pt.normalize(t)},relative(e,t){if(Dt(e,"from"),Dt(t,"to"),e===t)return"";const r=Pt.resolve(e),i=Pt.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===Ir;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Ir;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Ir;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Ir;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const m=e.charCodeAt(s+f);if(m!==t.charCodeAt(a+f))break;m===Ir&&(h=f)}if(f!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+f)===Ir)return i.slice(a+f+1);if(f===2)return i.slice(a+f)}o>u&&(e.charCodeAt(s+f)===Ir?h=f:f===2&&(h=3)),h===-1&&(h=0)}let p="";for(f=s+h+1;f<=n;++f)(f===n||e.charCodeAt(f)===Ir)&&(p+=p.length===0?"..":"\\..");return a+=h,p.length>0?`${p}${i.slice(a,c)}`:(i.charCodeAt(a)===Ir&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Pt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Ir){if(t.charCodeAt(1)===Ir){const r=t.charCodeAt(2);if(r!==Fk&&r!==ks)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Ss(t.charCodeAt(0))&&t.charCodeAt(1)===$s&&t.charCodeAt(2)===Ir)return`\\\\?\\${t}`;return e},dirname(e){Dt(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return Fe(s)?e:".";if(Fe(s)){if(r=i=1,Fe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Fe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Fe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Fe(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else Ss(s)&&e.charCodeAt(1)===$s&&(r=t>2&&Fe(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if(Fe(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&Dt(t,"suffix"),Dt(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&Ss(e.charCodeAt(0))&&e.charCodeAt(1)===$s&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(Fe(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(Fe(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Dt(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===$s&&Ss(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Fe(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===ks?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:hw.bind(null,"\\"),parse(e){Dt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return Fe(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Fe(s)){if(i=1,Fe(e.charCodeAt(1))){let h=2,f=h;for(;h<r&&!Fe(e.charCodeAt(h));)h++;if(h<r&&h!==f){for(f=h;h<r&&Fe(e.charCodeAt(h));)h++;if(h<r&&h!==f){for(f=h;h<r&&!Fe(e.charCodeAt(h));)h++;h===r?i=h:h!==f&&(i=h+1)}}}}else if(Ss(s)&&e.charCodeAt(1)===$s){if(r<=2)return t.root=t.dir=e,t;if(i=2,Fe(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),Fe(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===ks?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Uk=(()=>{if(Dr){const e=/\\/g;return()=>{const t=eo().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>eo()})(),je={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const s=i>=0?e[i]:Uk();Dt(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===Yt)}return t=tu(t,!r,"/",cp),r?`/${t}`:t.length>0?t:"."},normalize(e){if(Dt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Yt,r=e.charCodeAt(e.length-1)===Yt;return e=tu(e,!t,"/",cp),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Dt(e,"path"),e.length>0&&e.charCodeAt(0)===Yt},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];Dt(i,"path"),i.length>0&&(t===void 0?t=i:t+=`/${i}`)}return t===void 0?".":je.normalize(t)},relative(e,t){if(Dt(e,"from"),Dt(t,"to"),e===t||(e=je.resolve(e),t=je.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===Yt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Yt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===Yt?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===Yt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Dt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Yt;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Yt){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&Dt(t,"ext"),Dt(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Yt){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Yt){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Dt(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===Yt){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===ks?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:hw.bind(null,"/"),parse(e){Dt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===Yt;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===Yt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===ks?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};je.win32=Pt.win32=Pt,je.posix=Pt.posix=je;var to=Dr?Pt.normalize:je.normalize,ru=Dr?Pt.isAbsolute:je.isAbsolute,lp=Dr?Pt.join:je.join,Hk=Dr?Pt.resolve:je.resolve,Na=Dr?Pt.relative:je.relative,ro=Dr?Pt.dirname:je.dirname,Pr=Dr?Pt.basename:je.basename,up=Dr?Pt.extname:je.extname,bL=Dr?Pt.format:je.format,yL=Dr?Pt.parse:je.parse,xL=Dr?Pt.toNamespacedPath:je.toNamespacedPath,si=Dr?Pt.sep:je.sep,EL=Dr?Pt.delimiter:je.delimiter,jk=/^\w[\w\d+.-]*$/,_k=/^\//,Bk=/^\/\//;function zk(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!jk.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!_k.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Bk.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function Wk(e,t){return!e&&!t?"file":e}function Vk(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==ni&&(t=ni+t):t=ni;break}return t}var ft="",ni="/",qk=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,x=class Cf{static isUri(t){return t instanceof Cf?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ft,this.authority=t.authority||ft,this.path=t.path||ft,this.query=t.query||ft,this.fragment=t.fragment||ft):(this.scheme=Wk(t,o),this.authority=r||ft,this.path=Vk(this.scheme,i||ft),this.query=s||ft,this.fragment=n||ft,zk(this,o))}get fsPath(){return iu(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=ft),i===void 0?i=this.authority:i===null&&(i=ft),s===void 0?s=this.path:s===null&&(s=ft),n===void 0?n=this.query:n===null&&(n=ft),o===void 0?o=this.fragment:o===null&&(o=ft),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new io(r,i,s,n,o)}static parse(t,r=!1){const i=qk.exec(t);return i?new io(i[2]||ft,su(i[4]||ft),su(i[5]||ft),su(i[7]||ft),su(i[9]||ft),r):new io(ft,ft,ft,ft,ft)}static file(t){let r=ft;if(Cr&&(t=t.replace(/\\/g,ni)),t[0]===ni&&t[1]===ni){const i=t.indexOf(ni,2);i===-1?(r=t.substring(2),t=ni):(r=t.substring(2,i),t=t.substring(i)||ni)}return new io("file",r,t,ft,ft)}static from(t,r){return new io(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Cr&&t.scheme==="file"?i=Cf.file(Pt.join(iu(t,!0),...r)).path:i=je.join(t.path,...r),t.with({path:i})}toString(t=!1){return hp(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Cf)return t;{const r=new io(t);return r._formatted=t.external??null,r._fsPath=t._sep===fw?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function dw(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var fw=Cr?1:void 0,io=class extends x{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=iu(this,!1)),this._fsPath}toString(e=!1){return e?hp(this,!0):(this._formatted||(this._formatted=hp(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=fw),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},pw={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function gw(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=pw[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function Gk(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=pw[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function iu(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,Cr&&(r=r.replace(/\//g,"\\")),r}function hp(e,t){const r=t?Gk:gw;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=ni,i+=ni),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:gw(c,!1,!1)),i}function mw(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+mw(e.substr(3)):e}}var vw=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function su(e){return e.match(vw)?e.replace(vw,t=>mw(t)):e}var ww=class vx{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++vx.count}},bw=[];function j(e){const t=new ww(e);return bw[t.nid]=t,t}function nu(e){return bw[e].sid}var Or=class{constructor(e){this.value=e}},yw;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(yw||(yw={}));var xw;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(xw||(xw={}));var Ew;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Ew||(Ew={}));var kw;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(kw||(kw={}));var $w;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})($w||($w={}));var Sw;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(Sw||(Sw={}));var Cw;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Cw||(Cw={}));var dp;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(dp||(dp={}));var kL=class wx{static{this.a=0}static mixin(t){return t._id=wx.a++,t}},Iw;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(Iw||(Iw={}));var Dw;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(Dw||(Dw={}));var Pw;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(Pw||(Pw={}));var Z={MainThreadAuthentication:j("MainThreadAuthentication"),MainThreadBulkEdits:j("MainThreadBulkEdits"),MainThreadLanguageModels:j("MainThreadLanguageModels"),MainThreadEmbeddings:j("MainThreadEmbeddings"),MainThreadChatAgents2:j("MainThreadChatAgents2"),MainThreadCodeMapper:j("MainThreadCodeMapper"),MainThreadChatVariables:j("MainThreadChatVariables"),MainThreadLanguageModelTools:j("MainThreadChatSkills"),MainThreadClipboard:j("MainThreadClipboard"),MainThreadCommands:j("MainThreadCommands"),MainThreadComments:j("MainThreadComments"),MainThreadConfiguration:j("MainThreadConfiguration"),MainThreadConsole:j("MainThreadConsole"),MainThreadDebugService:j("MainThreadDebugService"),MainThreadDecorations:j("MainThreadDecorations"),MainThreadDiagnostics:j("MainThreadDiagnostics"),MainThreadDialogs:j("MainThreadDiaglogs"),MainThreadDocuments:j("MainThreadDocuments"),MainThreadDocumentContentProviders:j("MainThreadDocumentContentProviders"),MainThreadTextEditors:j("MainThreadTextEditors"),MainThreadEditorInsets:j("MainThreadEditorInsets"),MainThreadEditorTabs:j("MainThreadEditorTabs"),MainThreadErrors:j("MainThreadErrors"),MainThreadTreeViews:j("MainThreadTreeViews"),MainThreadDownloadService:j("MainThreadDownloadService"),MainThreadLanguageFeatures:j("MainThreadLanguageFeatures"),MainThreadLanguages:j("MainThreadLanguages"),MainThreadLogger:j("MainThreadLogger"),MainThreadMessageService:j("MainThreadMessageService"),MainThreadOutputService:j("MainThreadOutputService"),MainThreadProgress:j("MainThreadProgress"),MainThreadQuickDiff:j("MainThreadQuickDiff"),MainThreadQuickOpen:j("MainThreadQuickOpen"),MainThreadStatusBar:j("MainThreadStatusBar"),MainThreadSecretState:j("MainThreadSecretState"),MainThreadStorage:j("MainThreadStorage"),MainThreadSpeech:j("MainThreadSpeechProvider"),MainThreadTelemetry:j("MainThreadTelemetry"),MainThreadTerminalService:j("MainThreadTerminalService"),MainThreadTerminalShellIntegration:j("MainThreadTerminalShellIntegration"),MainThreadWebviews:j("MainThreadWebviews"),MainThreadWebviewPanels:j("MainThreadWebviewPanels"),MainThreadWebviewViews:j("MainThreadWebviewViews"),MainThreadCustomEditors:j("MainThreadCustomEditors"),MainThreadUrls:j("MainThreadUrls"),MainThreadUriOpeners:j("MainThreadUriOpeners"),MainThreadProfileContentHandlers:j("MainThreadProfileContentHandlers"),MainThreadWorkspace:j("MainThreadWorkspace"),MainThreadFileSystem:j("MainThreadFileSystem"),MainThreadFileSystemEventService:j("MainThreadFileSystemEventService"),MainThreadExtensionService:j("MainThreadExtensionService"),MainThreadSCM:j("MainThreadSCM"),MainThreadSearch:j("MainThreadSearch"),MainThreadShare:j("MainThreadShare"),MainThreadTask:j("MainThreadTask"),MainThreadWindow:j("MainThreadWindow"),MainThreadLabelService:j("MainThreadLabelService"),MainThreadNotebook:j("MainThreadNotebook"),MainThreadNotebookDocuments:j("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:j("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:j("MainThreadNotebookKernels"),MainThreadNotebookRenderers:j("MainThreadNotebookRenderers"),MainThreadInteractive:j("MainThreadInteractive"),MainThreadTheming:j("MainThreadTheming"),MainThreadTunnelService:j("MainThreadTunnelService"),MainThreadManagedSockets:j("MainThreadManagedSockets"),MainThreadTimeline:j("MainThreadTimeline"),MainThreadTesting:j("MainThreadTesting"),MainThreadLocalization:j("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:j("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:j("MainThreadAiEmbeddingVector")},ue={ExtHostCodeMapper:j("ExtHostCodeMapper"),ExtHostCommands:j("ExtHostCommands"),ExtHostConfiguration:j("ExtHostConfiguration"),ExtHostDiagnostics:j("ExtHostDiagnostics"),ExtHostDebugService:j("ExtHostDebugService"),ExtHostDecorations:j("ExtHostDecorations"),ExtHostDocumentsAndEditors:j("ExtHostDocumentsAndEditors"),ExtHostDocuments:j("ExtHostDocuments"),ExtHostDocumentContentProviders:j("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:j("ExtHostDocumentSaveParticipant"),ExtHostEditors:j("ExtHostEditors"),ExtHostTreeViews:j("ExtHostTreeViews"),ExtHostFileSystem:j("ExtHostFileSystem"),ExtHostFileSystemInfo:j("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:j("ExtHostFileSystemEventService"),ExtHostLanguages:j("ExtHostLanguages"),ExtHostLanguageFeatures:j("ExtHostLanguageFeatures"),ExtHostQuickOpen:j("ExtHostQuickOpen"),ExtHostQuickDiff:j("ExtHostQuickDiff"),ExtHostStatusBar:j("ExtHostStatusBar"),ExtHostShare:j("ExtHostShare"),ExtHostExtensionService:j("ExtHostExtensionService"),ExtHostLogLevelServiceShape:j("ExtHostLogLevelServiceShape"),ExtHostTerminalService:j("ExtHostTerminalService"),ExtHostTerminalShellIntegration:j("ExtHostTerminalShellIntegration"),ExtHostSCM:j("ExtHostSCM"),ExtHostSearch:j("ExtHostSearch"),ExtHostTask:j("ExtHostTask"),ExtHostWorkspace:j("ExtHostWorkspace"),ExtHostWindow:j("ExtHostWindow"),ExtHostWebviews:j("ExtHostWebviews"),ExtHostWebviewPanels:j("ExtHostWebviewPanels"),ExtHostCustomEditors:j("ExtHostCustomEditors"),ExtHostWebviewViews:j("ExtHostWebviewViews"),ExtHostEditorInsets:j("ExtHostEditorInsets"),ExtHostEditorTabs:j("ExtHostEditorTabs"),ExtHostProgress:j("ExtHostProgress"),ExtHostComments:j("ExtHostComments"),ExtHostSecretState:j("ExtHostSecretState"),ExtHostStorage:j("ExtHostStorage"),ExtHostUrls:j("ExtHostUrls"),ExtHostUriOpeners:j("ExtHostUriOpeners"),ExtHostProfileContentHandlers:j("ExtHostProfileContentHandlers"),ExtHostOutputService:j("ExtHostOutputService"),ExtHostLabelService:j("ExtHostLabelService"),ExtHostNotebook:j("ExtHostNotebook"),ExtHostNotebookDocuments:j("ExtHostNotebookDocuments"),ExtHostNotebookEditors:j("ExtHostNotebookEditors"),ExtHostNotebookKernels:j("ExtHostNotebookKernels"),ExtHostNotebookRenderers:j("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:j("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:j("ExtHostInteractive"),ExtHostChatAgents2:j("ExtHostChatAgents"),ExtHostChatVariables:j("ExtHostChatVariables"),ExtHostLanguageModelTools:j("ExtHostChatSkills"),ExtHostChatProvider:j("ExtHostChatProvider"),ExtHostSpeech:j("ExtHostSpeech"),ExtHostEmbeddings:j("ExtHostEmbeddings"),ExtHostAiRelatedInformation:j("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:j("ExtHostAiEmbeddingVector"),ExtHostTheming:j("ExtHostTheming"),ExtHostTunnelService:j("ExtHostTunnelService"),ExtHostManagedSockets:j("ExtHostManagedSockets"),ExtHostAuthentication:j("ExtHostAuthentication"),ExtHostTimeline:j("ExtHostTimeline"),ExtHostTesting:j("ExtHostTesting"),ExtHostTelemetry:j("ExtHostTelemetry"),ExtHostLocalization:j("ExtHostLocalization")},Aw=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),ct;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof ou?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Et.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Aw})})(ct||(ct={}));var ou=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Aw:(this.b||(this.b=new R),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},At=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new ou),this.f}cancel(){this.f?this.f instanceof ou&&this.f.cancel():this.f=ct.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof ou&&this.f.dispose():this.f=ct.None}};function Qk(e){return e}var Jk=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=Qk):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function au(e){return!e||typeof e!="string"?!0:e.trim().length===0}var Zk=/{([^}]+)}/g;function Tw(e,t){return Object.keys(t).length===0?e:e.replace(Zk,(r,i)=>t[i]??r)}function cn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Xk(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function Yk(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function fp(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function Kk(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=cn(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function Rw(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function Lw(e){return e.split(/\r\n|\r|\n/)}function pp(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function e3(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function t3(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function ln(e,t){return e<t?-1:e>t?1:0}function gp(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function Nw(e,t){return Fa(e,t,0,e.length,0,t.length)}function Fa(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return gp(e.toLowerCase(),t.toLowerCase(),r,i,s,n);Fw(c)&&(c-=32),Fw(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function Fw(e){return e>=97&&e<=122}function Cs(e,t){return e.length===t.length&&Fa(e,t)===0}function mp(e,t){const r=t.length;return t.length>e.length?!1:Fa(e,t,0,r)===0}function r3(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function cu(e){return 55296<=e&&e<=56319}function lu(e){return 56320<=e&&e<=57343}function vp(e,t){return(e-55296<<10)+(t-56320)+65536}function Mw(e,t,r){const i=e.charCodeAt(r);if(cu(i)&&r+1<t){const s=e.charCodeAt(r+1);if(lu(s))return vp(i,s)}return i}function i3(e,t){const r=e.charCodeAt(t-1);if(lu(r)&&t>1){const i=e.charCodeAt(t-2);if(cu(i))return vp(i,r)}return r}var s3=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=i3(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=Mw(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},n3=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new s3(e,t)}nextGraphemeLength(){const e=zw.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(_w(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=zw.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(_w(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function Ow(e,t){return new n3(e,t).nextGraphemeLength()}var wp=void 0;function o3(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Uw(e){return wp||(wp=o3()),wp.test(e)}var a3=/^[\t\n\r\x20-\x7E]*$/;function c3(e){return a3.test(e)}var l3=/[\u2028\u2029]/;function Hw(e){return l3.test(e)}var u3="\uFEFF";function h3(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function jw(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function d3(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function _w(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var Bw;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(Bw||(Bw={}));var zw=class Ll{static{this.c=null}static getInstance(){return Ll.c||(Ll.c=new Ll),Ll.c}constructor(){this.d=f3()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function f3(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var Ww;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(Ww||(Ww={}));var $L=class Nl{static{this.c=new $r(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new Jk({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let f=0;f<u.length;f+=2)h.set(u[f],u[f+1]);return h}function i(u,h){const f=new Map(u);for(const[p,m]of h)f.set(p,m);return f}function s(u,h){if(!u)return h;const f=new Map;for(const[p,m]of u)h.has(p)&&f.set(p,m);return f}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new Nl(l)})}static getInstance(t){return Nl.d.get(Array.from(t))}static{this.e=new $r(()=>Object.keys(Nl.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return Nl.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},SL=class Fl{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(Fl.c())),this.d}static isInvisibleCharacter(t){return Fl.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&Fl.isInvisibleCharacter(i))return!0}return!1}static get codePoints(){return Fl.e()}};function Me(e){return typeof e=="string"}function p3(e){return Array.isArray(e)&&e.every(t=>Me(t))}function $t(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function g3(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function Is(e){return typeof e=="number"&&!isNaN(e)}function Ma(e){return typeof e>"u"}function un(e){return!St(e)}function St(e){return Ma(e)||e===null}function Vw(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function so(e){if(St(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var m3=Object.prototype.hasOwnProperty;function qw(e){if(!$t(e))return!1;for(const t in e)if(m3.call(e,t))return!1;return!0}function v3(e){return typeof e=="function"}function w3(e,t){if(Me(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(v3(t)){try{if(e instanceof t)return}catch{}if(!St(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Ds(e){return e===47||e===92}function Gw(e){return e.replace(/[\\/]/g,je.sep)}function b3(e){return e.indexOf("/")===-1&&(e=Gw(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function Qw(e,t=je.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(Ds(i)){if(Ds(e.charCodeAt(1))&&!Ds(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!Ds(e.charCodeAt(n));n++);if(o!==n&&!Ds(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(Ds(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(Jw(i)&&e.charCodeAt(1)===58)return Ds(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(Ds(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var y3=/[\\/:\*\?"<>\|]/g,x3=/[/]/g,E3=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function k3(e,t=Cr){const r=t?y3:x3;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&E3.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function uu(e,t,r,i=si){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!mp(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function Jw(e){return e>=65&&e<=90||e>=97&&e<=122}function $3(e,t=Cr){return t?Jw(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var te;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output"})(te||(te={}));function bp(e,t){return x.isUri(e)?Cs(e.scheme,t):mp(e,t+":")}function S3(e,...t){return t.some(r=>bp(e,r))}var C3="tkn",I3=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=P3(e,t)}getServerRootPath(){return this.f}get g(){return je.join(this.f,te.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Sr(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${C3}=${encodeURIComponent(s)}`),x.from({scheme:np?this.d:te.vscodeRemoteResource,authority:`${r}:${i}`,path:this.g,query:n})}},D3=new I3;function P3(e,t){return je.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var A3="vscode-app",T3=class If{static{this.a=A3}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===te.vscodeRemote?D3.rewrite(t):t.scheme===te.file&&(Ek||$k===`${te.vscodeFileResource}://${If.a}`)?t.with({scheme:te.vscodeFileResource,authority:t.authority||If.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===te.vscodeFileResource?t.with({scheme:te.file,authority:t.authority!==If.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(x.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return x.joinPath(x.parse(i,!0),t);const s=lp(i,t);return x.file(s)}return x.parse(r.toUrl(t))}},R3=new T3,Zw;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:x.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(Zw||(Zw={}));function oi(e){return iu(e,!0)}var Oa=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:ln(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===te.file)return uu(oi(e),oi(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(Kw(e.authority,t.authority))return uu(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return x.joinPath(e,...t)}basenameOrAuthority(e){return Ps(e)||e.authority}basename(e){return je.basename(e.path)}extname(e){return je.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===te.file?t=x.file(ro(oi(e))).path:(t=je.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===te.file?t=x.file(to(oi(e))).path:t=je.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Kw(e.authority,t.authority))return;if(e.scheme===te.file){const s=Na(oi(e),oi(t));return Cr?Gw(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return je.relative(r,i)}resolvePath(e,t){if(e.scheme===te.file){const r=x.file(Hk(oi(e),t));return e.with({authority:r.authority,path:r.path})}return t=b3(t),e.with({path:je.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Cs(e,t)}hasTrailingPathSeparator(e,t=si){if(e.scheme===te.file){const r=oi(e);return r.length>Qw(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=si){return eb(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=si){let r=!1;if(e.scheme===te.file){const i=oi(e);r=i!==void 0&&i.length===Qw(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!eb(e,t)?e.with({path:e.path+"/"}):e}},Ve=new Oa(()=>!1),L3=new Oa(e=>e.scheme===te.file?!xs:!0),N3=new Oa(e=>!0),Xw=Ve.isEqual.bind(Ve),CL=Ve.isEqualOrParent.bind(Ve),IL=Ve.getComparisonKey.bind(Ve),yp=Ve.basenameOrAuthority.bind(Ve),Ps=Ve.basename.bind(Ve),DL=Ve.extname.bind(Ve),xp=Ve.dirname.bind(Ve),nr=Ve.joinPath.bind(Ve),PL=Ve.normalizePath.bind(Ve),Yw=Ve.relativePath.bind(Ve),AL=Ve.resolvePath.bind(Ve),F3=Ve.isAbsolutePath.bind(Ve),Kw=Ve.isEqualAuthority.bind(Ve),eb=Ve.hasTrailingPathSeparator.bind(Ve),TL=Ve.removeTrailingPathSeparator.bind(Ve),RL=Ve.addTrailingPathSeparator.bind(Ve),tb;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(tb||(tb={}));var M3=Symbol("MicrotaskDelay");function As(e){return!!e&&typeof e.then=="function"}function O3(e){const t=new At,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new $i)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function rb(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function U3(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new $i)});e.then(r,i).finally(()=>s.dispose())})}function rr(e){return new Promise((t,r)=>{const i=e();As(i)?i.then(t,r):t(i)})}function H3(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var j3=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},_3=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},B3=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},z3=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===M3?B3(r):_3(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new $i),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},W3=class{constructor(e){this.a=new z3(e),this.b=new j3}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},Ci=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function Ii(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new $i)})}):O3(r=>Ii(e,r))}function V3(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=$e(()=>{clearTimeout(i),r?.deleteAndLeak(s)});return r?.add(s),s}var q3=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new R}whenIdle(){return this.size>0?Et.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},G3=class extends q3{constructor(){super(1)}},Q3=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new oo;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ve){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=Ve){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new G3;const n=this.f++,o=Et.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Xf),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},J3=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new P0("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=$e(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},no=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},ib,hu;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?hu=(e,t)=>{sw(()=>{if(r)return;const i=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:hu=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},ib=e=>hu(globalThis,e)})();var Z3=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=hu(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},X3=class extends Z3{constructor(e){super(globalThis,e)}},sb;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(sb||(sb={}));var oo=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new $i)}},ao;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(ao||(ao={}));var nb;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(nb||(nb={}));var Ua=class _r{static fromArray(t){return new _r(r=>{r.emitMany(t)})}static fromPromise(t){return new _r(async r=>{r.emitMany(await t)})}static fromPromises(t){return new _r(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new _r(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=_r.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new R,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await Et.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new _r(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return _r.map(this,t)}static filter(t,r){return new _r(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return _r.filter(this,t)}static coalesce(t){return _r.filter(t,r=>!!r)}coalesce(){return _r.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return _r.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Ep=class{constructor(e){this.a=new oo,this.b=new Ua(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}},LL=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function ob(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?x.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof Ne)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=ob(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function Ha(e,t){const r=ob(e,t,!1,0);return r===null?e:r}var ab=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Sr(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},Y3=class extends ab{constructor(){super(),this.h=!0,this.i=new $i}},cb;function kp(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var $p="$$ref$$",K3={[$p]:-1};function lb(e,t=null,r=!1){const i=[];return{jsonString:(r?kp:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return K3;if(typeof o=="object"){if(o instanceof Ne){const a=i.push(o)-1;return{[$p]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function ub(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[$p];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function hb(e,t){return JSON.stringify(e,t)}function e$(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var db;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(db||(db={}));var fb;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(fb||(fb={}));var t$=()=>{},r$=Symbol.for("rpcProtocol"),i$=Symbol.for("rpcProxy"),s$=class u0 extends Ee{static{cb=r$}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[cb]=!0,this.b=this.B(new R),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=e$(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=ww.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new no(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(D0())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+u0.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+u0.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Ha(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===i$?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=Ct.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=Ur.deserializeRequestJSONArgs(i);this.g&&(c=Ha(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=Ur.deserializeRequestMixedArgs(i);this.g&&(c=Ha(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=Ur.deserializeReplyOKJSON(i);this.g&&(o=Ha(o,this.g)),this.O(r,n,o);break}case 10:{const o=Ur.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=Ur.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=Ur.deserializeReplyErrError(i);this.g&&(o=Ha(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${nu(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new At;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=t$;this.u[a]=l;const u=Ur.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const f=Ur.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(f.byteLength,r,1,"reply:",h),this.c.send(f)},h=>{delete this.u[a];const f=Ur.serializeReplyErr(r,h);this.f?.logOutgoing(f.byteLength,r,1,"replyErr:",h),this.c.send(f)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+nu(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+nu(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new Y3;let s=null;if(i.length>0&&ct.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(D0());const n=Ur.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new ab,l=new Pe;s&&l.add(s.onCancellationRequested(()=>{const h=Ur.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(Ur.serializeCancel(o))})),this.w[a]=new n$(c,l),this.F(o);const u=Ur.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${nu(t)}.${r}(`,i),this.c.send(u),c}},n$=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Ct=class h0{static alloc(t,r,i){const s=new h0(Ne.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new h0(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new Or(ub(o,a,null));break}case 4:r[i]=void 0;break}return r}},pb;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(pb||(pb={}));var Ur=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof Ne||e[t]instanceof Or||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof Ne)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof Or){const{jsonString:o,referencedBuffers:a}=lb(n.value,t);r[i]={type:3,value:Ne.fromString(o),buffers:a}}else r[i]={type:1,value:Ne.fromString(hb(n,t))}}return{type:1,args:r}}return{type:0,args:hb(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=Ne.fromString(r),o=Ne.fromString(i);let a=0;a+=Ct.sizeUInt8(),a+=Ct.sizeShortString(n),a+=Ct.sizeLongString(o);const c=Ct.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=Ne.fromString(r);let o=0;o+=Ct.sizeUInt8(),o+=Ct.sizeShortString(n),o+=Ct.sizeMixedArray(i);const a=Ct.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return Ct.alloc(5,e,0).buffer}static serializeCancel(e){return Ct.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof Ne)return this.e(e,t);if(t instanceof Or){const{jsonString:i,referencedBuffers:s}=lb(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,kp(t,r))}static d(e){return Ct.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=Ct.sizeVSBuffer(t);const i=Ct.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=Ne.fromString(t);let i=0;i+=Ct.sizeLongString(r);const s=Ct.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=Ne.fromString(t);let s=0;s+=Ct.sizeUInt32,s+=Ct.sizeLongString(i);for(const o of r)s+=Ct.sizeVSBuffer(o);const n=Ct.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new Or(ub(i,s,t))}static serializeReplyErr(e,t){const r=t?kp($a(t),null):void 0;if(typeof r!="string")return this.h(e);const i=Ne.fromString(r);let s=0;s+=Ct.sizeLongString(i);const n=Ct.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Ct.alloc(12,e,0).buffer}},gb;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(gb||(gb={}));var mb;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(mb||(mb={}));function Sp(e,t){return t&&(e.stack||e.stacktrace)?d(108,null,wb(e),vb(e.stack)||vb(e.stacktrace)):wb(e)}function vb(e){return Array.isArray(e)?e.join(`
`):e}function wb(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(109,null,e.message):e.message||d(110,null)}function hn(e=null,t=!1){if(!e)return d(111,null);if(Array.isArray(e)){const r=Ft(e),i=hn(r[0],t);return r.length>1?d(112,null,i,r.length):i}if(Me(e))return e;if(e.detail){const r=e.detail;if(r.error)return Sp(r.error,t);if(r.exception)return Sp(r.exception,t)}return e.stack?Sp(e,t):e.message?e.message:d(113,null)}function ja(e){return Cp(e,0)}function Cp(e,t){switch(typeof e){case"object":return e===null?qi(349,t):Array.isArray(e)?a$(e,t):c$(e,t);case"string":return bb(e,t);case"boolean":return o$(e,t);case"number":return qi(e,t);case"undefined":return qi(937,t);default:return qi(617,t)}}function qi(e,t){return(t<<5)-t+e|0}function o$(e,t){return qi(e?433:863,t)}function bb(e,t){t=qi(149417,t);for(let r=0,i=e.length;r<i;r++)t=qi(e.charCodeAt(r),t);return t}function a$(e,t){return t=qi(104579,t),e.reduce((r,i)=>Cp(i,r),t)}function c$(e,t){return t=qi(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=bb(i,r),Cp(e[i],r)),t)}var yb;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(yb||(yb={}));function Ip(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function xb(e,t=0,r=e.byteLength,i=0){for(let s=0;s<r;s++)e[t+s]=i}function l$(e,t,r="0"){for(;e.length<t;)e=r+e;return e}function _a(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):l$((e>>>0).toString(16),t/4)}var NL=class bx{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(cu(o))if(a+1<r){const l=t.charCodeAt(a+1);lu(l)?(a++,c=vp(o,l)):c=65533}else{n=o;break}else lu(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),_a(this.h)+_a(this.l)+_a(this.m)+_a(this.n)+_a(this.o)}x(){this.p[this.r++]=128,xb(this.p,this.r),this.r>56&&(this.y(),xb(this.p));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=bx.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Ip(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Ip(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Ip(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},Eb;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(Eb||(Eb={}));function Dp(...e){switch(e.length){case 1:return d(1704,null,e[0]);case 2:return d(1705,null,e[0],e[1]);case 3:return d(1706,null,e[0],e[1],e[2]);default:return}}var u$=d(1707,null),h$=d(1708,null),Ba=class d0{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Wf(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(Dp("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Dp("&&"));break;case 124:this.h(124)?this.k(16):this.l(Dp("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=d0.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(u$);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(h$);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&d0.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},ai;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(ai||(ai={}));var du=ee("instantiationService");function d$(e,t,r){t[ai.DI_TARGET]===t?t[ai.DI_DEPENDENCIES].push({id:e,index:r}):(t[ai.DI_DEPENDENCIES]=[{id:e,index:r}],t[ai.DI_TARGET]=t)}function ee(e){if(ai.serviceIds.has(e))return ai.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");d$(t,r,s)};return t.toString=()=>e,ai.serviceIds.set(e,t),t}function FL(e){return e}var Wt=new Map;Wt.set("false",!1),Wt.set("true",!0),Wt.set("isMac",ii),Wt.set("isLinux",xs),Wt.set("isWindows",Cr),Wt.set("isWeb",np),Wt.set("isMacNative",ii&&!np),Wt.set("isEdge",Pk),Wt.set("isFirefox",Ik),Wt.set("isChrome",lw),Wt.set("isSafari",Dk);var f$=Object.prototype.hasOwnProperty,kb;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(kb||(kb={}));var p$={regexParsingWithErrorRecovery:!0},g$=d(1684,null),m$=d(1685,null),v$=d(1686,null),$b=d(1687,null),w$=d(1688,null),b$=d(1689,null),y$=d(1690,null),x$=d(1691,null),Sb=class Ml{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=p$){this.k=t,this.d=new Ba,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:g$,offset:0,lexeme:"",additionalInfo:m$});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?b$:void 0;throw this.h.push({message:w$,offset:i.offset,lexeme:Ba.getLexeme(i),additionalInfo:s}),Ml.c}return r}catch(r){if(r!==Ml.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:Vt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:Vt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),ur.INSTANCE;case 12:return this.z(),Ar.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,$b),r?.negate()}case 17:return this.z(),Va.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Vt.true();case 12:return this.z(),Vt.false();case 0:{this.z();const r=this.l();return this.A(1,$b),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return Fp.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(Ba.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return Vt.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!au(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return Fp.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,v$);const s=this.u();return Vt.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return Vt.equals(r,s);switch(s){case"true":return Vt.has(r);case"false":return Vt.not(r);default:return Vt.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return Vt.notEquals(r,s);switch(s){case"true":return Vt.not(r);case"false":return Vt.has(r);default:return Vt.notEquals(r,s)}}case 5:return this.z(),Lp.create(r,this.u());case 6:return this.z(),Np.create(r,this.u());case 7:return this.z(),Tp.create(r,this.u());case 8:return this.z(),Rp.create(r,this.u());case 13:return this.z(),Vt.in(r,this.u());default:return Vt.has(r)}}case 20:throw this.h.push({message:y$,offset:t.offset,lexeme:"",additionalInfo:x$}),Ml.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=d(1692,null,t,Ba.getLexeme(r)),n=r.offset,o=Ba.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),Ml.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Vt=class{static false(){return ur.INSTANCE}static true(){return Ar.INSTANCE}static has(e){return Wa.create(e)}static equals(e,t){return Pp.create(e,t)}static notEquals(e,t){return Ap.create(e,t)}static regex(e,t){return Fp.create(e,t)}static in(e,t){return Cb.create(e,t)}static notIn(e,t){return Ib.create(e,t)}static not(e){return Va.create(e)}static and(...e){return Pb.create(e,null,!0)}static or(...e){return Mp.create(e,null,!0)}static greater(e,t){return Tp.create(e,t)}static greaterEquals(e,t){return Rp.create(e,t)}static smaller(e,t){return Lp.create(e,t)}static smallerEquals(e,t){return Np.create(e,t)}static{this.c=new Sb({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function E$(e){const t=new Sb({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?d(1693,null,i.additionalInfo):d(1694,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function za(e,t){return e.cmp(t)}var ur=class yx{static{this.INSTANCE=new yx}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Ar.INSTANCE}},Ar=class xx{static{this.INSTANCE=new xx}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return ur.INSTANCE}},Wa=class Ex{static create(t,r=null){const i=Wt.get(t);return typeof i=="boolean"?i?Ar.INSTANCE:ur.INSTANCE:new Ex(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:Ab(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Wt.get(this.key);return typeof t=="boolean"?t?Ar.INSTANCE:ur.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Va.create(this.key,this)),this.c}},Pp=class kx{static create(t,r,i=null){if(typeof r=="boolean")return r?Wa.create(t,i):Va.create(t,i);const s=Wt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?Ar.INSTANCE:ur.INSTANCE:new kx(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Wt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?Ar.INSTANCE:ur.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Ap.create(this.c,this.d,this)),this.f}},Cb=class $x{static create(t,r){return new $x(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?f$.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=Ib.create(this.d,this.f)),this.c}},Ib=class Sx{static create(t,r){return new Sx(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=Cb.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Ap=class Cx{static create(t,r,i=null){if(typeof r=="boolean")return r?Va.create(t,i):Wa.create(t,i);const s=Wt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?ur.INSTANCE:Ar.INSTANCE:new Cx(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Wt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?ur.INSTANCE:Ar.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Pp.create(this.c,this.d,this)),this.f}},Va=class Ix{static create(t,r=null){const i=Wt.get(t);return typeof i=="boolean"?i?ur.INSTANCE:Ar.INSTANCE:new Ix(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:Ab(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Wt.get(this.c);return typeof t=="boolean"?t?ur.INSTANCE:Ar.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=Wa.create(this.c,this)),this.d}};function fu(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):ur.INSTANCE}var Tp=class Dx{static create(t,r,i=null){return fu(r,s=>new Dx(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Np.create(this.c,this.d,this)),this.f}},Rp=class Px{static create(t,r,i=null){return fu(r,s=>new Px(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Lp.create(this.c,this.d,this)),this.f}},Lp=class Ax{static create(t,r,i=null){return fu(r,s=>new Ax(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Rp.create(this.c,this.d,this)),this.f}},Np=class Tx{static create(t,r,i=null){return fu(r,s=>new Tx(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:dn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Tp.create(this.c,this.d,this)),this.f}},Fp=class Rx{static create(t,r){return new Rx(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=k$.create(this)),this.c}},k$=class f0{static create(t){return new f0(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new f0(this.c.map(t))}negate(){return this.c}};function Db(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var Pb=class va{static create(t,r,i){return va.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=za(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=Db(this.expr);return t===this.expr?this:va.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return ur.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Ar.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(za);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=Mp.create(o.expr.map(u=>va.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(za))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return ur.INSTANCE;if(s.length===1)return s[0]}return new va(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new va(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=Mp.create(t,this,!0)}return this.c}},Mp=class qn{static create(t,r,i){return qn.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=za(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=Db(this.expr);return t===this.expr?this:qn.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Ar.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return ur.INSTANCE;s.sort(za)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Ar.INSTANCE;if(s.length===1)return s[0]}return new qn(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new qn(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of Tb(r))for(const o of Tb(i))s.push(Pb.create([n,o],null,!1));t.unshift(qn.create(s,null,!1))}this.c=qn.create(t,this,!0)}return this.c}},Q=class Df extends Wa{static{this.d=[]}static all(){return Df.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Df.d.push({...i,key:t}):i!==!0&&Df.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Pp.create(this.key,t)}notEqualsTo(t){return Ap.create(this.key,t)}},$$=ee("contextKeyService");function Ab(e,t){return e<t?-1:e>t?1:0}function dn(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function Tb(e){return e.type===9?e.expr:[e]}var Xe=ee("logService"),qa=ee("loggerService");function S$(e){return Is(e)}var _e;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(_e||(_e={}));var C$=_e.Info;function I$(e,t,r){switch(t){case _e.Trace:e.trace(r);break;case _e.Debug:e.debug(r);break;case _e.Info:e.info(r);break;case _e.Warning:e.warn(r);break;case _e.Error:e.error(r);break;case _e.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function co(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=hn(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var Rb=class extends Ee{constructor(){super(...arguments),this.b=C$,this.c=this.B(new R),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==_e.Off&&this.b<=e}},Lb=class extends Rb{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.f(_e.Trace)&&this.g(_e.Trace,co([e,...t],!0))}debug(e,...t){this.f(_e.Debug)&&this.g(_e.Debug,co([e,...t]))}info(e,...t){this.f(_e.Info)&&this.g(_e.Info,co([e,...t]))}warn(e,...t){this.f(_e.Warning)&&this.g(_e.Warning,co([e,...t]))}error(e,...t){if(this.f(_e.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.g(_e.Error,co(r))}else this.g(_e.Error,co([e,...t]))}flush(){}},D$=class extends Rb{constructor(e){super(),this.g=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.g)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.g)r.trace(e,...t)}debug(e,...t){for(const r of this.g)r.debug(e,...t)}info(e,...t){for(const r of this.g)r.info(e,...t)}warn(e,...t){for(const r of this.g)r.warn(e,...t)}error(e,...t){for(const r of this.g)r.error(e,...t)}flush(){for(const e of this.g)e.flush()}dispose(){for(const e of this.g)e.dispose();super.dispose()}},P$=class extends Ee{constructor(e,t,r){if(super(),this.h=e,this.j=t,this.b=new Xt,this.c=this.B(new R),this.onDidChangeLoggers=this.c.event,this.f=this.B(new R),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new R),this.onDidChangeVisibility=this.g.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}m(e){return Me(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const r=this.n(e),i=Me(e)?e:t?.id??ja(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?_e.Trace:t?.logLevel;s||(s=this.s(r,n??this.getLogLevel(r)??this.h,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}n(e){return Me(e)?nr(this.j,`${e}.log`):e}setLogLevel(e,t){if(x.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.h?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.f.fire([r,i]))}else{this.h=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const r=this.m(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.g.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function A$(e){switch(e){case _e.Trace:return"trace";case _e.Debug:return"debug";case _e.Info:return"info";case _e.Warning:return"warn";case _e.Error:return"error";case _e.Off:return"off"}}function T$(e){switch(e){case"trace":return _e.Trace;case"debug":return _e.Debug;case"info":return _e.Info;case"warn":return _e.Warning;case"error":return _e.Error;case"critical":return _e.Error;case"off":return _e.Off}}var ML=new Q("logLevel",A$(_e.Info)),Gi=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},Nb=[],Fb;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(Fb||(Fb={}));function it(e,t,r){t instanceof Gi||(t=new Gi(t,[],!!r)),Nb.push([e,t])}function R$(){return Nb}var Op=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},ir=ee("IExtHostInitDataService"),L$=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},Mb=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new L$(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},N$=!1,Ob=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},F$=class p0{constructor(t=new Op,r=!1,i,s=N$){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(du,this),this._globalGraph=s?i?._globalGraph??new Mb(n=>n):void 0}dispose(){if(!this.f){this.f=!0,zi(this.h),this.h.clear();for(const t of this.g)_E(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends p0{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=Up.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Wf("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof Gi?(i=Up.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=Up.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=ai.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof Gi)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof Gi?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new Mb(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new Ob(s);for(const l of ai.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Gi){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new Ob(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Gi){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof Gi)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new p0(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new X3(()=>{const u=a.o(r,i,n);for(const[h,f]of c){const p=u[h];if(typeof p=="function")for(const m of f)m.disposable=p.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new Ia,c.set(h,m)),($,P,A)=>{if(l.isInitialized)return l.value[h]($,P,A);{const L={listener:[$,P,A],disposable:void 0},z=m.push(L);return $e(()=>{z(),L.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let p=f[h];return typeof p!="function"||(p=p.bind(f),u[h]=p),p},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},Ub;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(Ub||(Ub={}));var Up=class Ui{static{this.all=new Set}static{this.c=new class extends Ui{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new Ui(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Ui.c}static traceCreation(t,r){return t?new Ui(1,r.name):Ui.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new Ui(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;Ui.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const f=i(n+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Ui.f.toFixed(2)}ms)`];(t>2||r)&&Ui.all.add(s.join(`
`))}},Qe=ee("IExtHostRpcService"),M$=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},pu=ee("IURITransformerService"),O$=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},U$=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},H$=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?gp(e,this.b,0,e.length,this.c,this.d):Fa(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},Hb=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?gp(e,this.b,0,e.length,this.d,this.e):Fa(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},jb;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(jb||(jb={}));var j$=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new Hb(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return Nw(e,this.c.scheme);if(this.d[this.e]===2)return Nw(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return ln(e,this.c.query);if(this.d[this.e]===5)return ln(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},gu=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},_b;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(_b||(_b={}));var Qi=class Ol{static forUris(t=()=>!1,r=()=>!1){return new Ol(new j$(t,r))}static forPaths(t=!1){return new Ol(new Hb(void 0,!t))}static forStrings(){return new Ol(new U$)}static forConfigKeys(){return new Ol(new H$)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);T0(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);T0(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new gu,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new gu,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new gu,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new gu,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=r,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value&&r.push([t.key,t.value]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}};function pt(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?pt(i):i}),t}function Bb(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(zb.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!g3(s)&&t.push(s)}}return e}var zb=Object.prototype.hasOwnProperty;function mu(e,t){return Hp(e,t,new Set)}function Hp(e,t,r){if(St(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Hp(n,t,r));return s}if($t(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)zb.call(e,n)&&(s[n]=Hp(e[n],t,r));return r.delete(e),s}return e}function fn(e,t,r=!0){return $t(e)?($t(t)&&Object.keys(t).forEach(i=>{i in e?r&&($t(e[i])&&$t(t[i])?fn(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function ci(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!ci(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!ci(s,n))return!1;for(r=0;r<s.length;r++)if(!ci(e[s[r]],t[s[r]]))return!1}return!0}function _$(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if($t(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function Wb(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var B$=class{constructor(){this.a=0}getNext(){return this.a++}},Ga;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ga||(Ga={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?Cs(t,c)?e.Error:Cs(r,c)||Cs(i,c)?e.Warning:Cs(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(Ga||(Ga={}));var It=Ga,z$=It,OL=ee("notificationService"),Vb;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(Vb||(Vb={}));var qb;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(qb||(qb={}));var Gb;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(Gb||(Gb={}));var jp=ee("contextService");function W$(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.uri)}function V$(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.configPath)}var Qb;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(Qb||(Qb={}));var q$=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=Qi.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Qi.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},Jb=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return nr(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function _p(e){return new Jb({uri:e,index:0,name:yp(e)},{uri:e.toString()})}var Zb="code-workspace",UL=`.${Zb}`,HL=[{name:d(2505,null),extensions:[Zb]}],G$=class{constructor(){this.a=new Set(Object.keys(te)),this.b=new Map,this.extUri=new Oa(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},lo=ee("IExtHostFileSystemInfo"),qr=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const t=new Uint8Array(16),r=[];for(let i=0;i<256;i++)r.push(i.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let s=0,n="";return n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n}}(),Bp=Object.freeze({create:e=>Zn(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Bp.split(e).filter(t=>!t.startsWith("#"))}),jL=new Uint32Array(10),Xb;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(Xb||(Xb={}));var Yb;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(Yb||(Yb={}));var Kb;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(Kb||(Kb={}));var _L=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),BL=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),zL=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),WL=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function ey(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var VL=ry.bind(void 0,!1),ty=ry.bind(void 0,!0);function ry(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=mp(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function Q$(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function J$(e,t){return zp(e.toLowerCase(),t.toLowerCase(),0,0)}function zp(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=zp(e,t,r+1,i+1))?sy({start:i,end:i+1},s):null}return zp(e,t,r,i+1)}function Wp(e){return 97<=e&&e<=122}function vu(e){return 65<=e&&e<=90}function Vp(e){return 48<=e&&e<=57}function Z$(e){return e===32||e===9||e===10||e===13}var X$=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>X$.add(e.charCodeAt(0)));function iy(e){return Wp(e)||vu(e)||Vp(e)}function sy(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function ny(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(vu(i)||Vp(i)||r>0&&!iy(e.charCodeAt(r-1)))return r}return e.length}function qp(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=qp(e,t,r+1,i+1);!s&&(n=ny(t,n))<t.length;)s=qp(e,t,r+1,n),n++;return s===null?null:sy({start:i,end:i+1},s)}}function Y$(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),vu(n)&&t++,Wp(n)&&r++,iy(n)&&i++,Vp(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function K$(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function eS(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function tS(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),vu(i)&&t++,Wp(i)&&r++,Z$(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function oy(e,t){if(!t||(t=t.trim(),t.length===0)||!tS(e))return null;t.length>60&&(t=t.substring(0,60));const r=Y$(t);if(!eS(r)){if(!K$(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=qp(e,t,0,s))===null;)s=ny(t,s+1);return i}var qL=ey(ty,oy,Q$),GL=ey(ty,oy,J$),QL=new Jf(1e4),wu=128;function Gp(){const e=[],t=[];for(let r=0;r<=wu;r++)t[r]=0;for(let r=0;r<=wu;r++)e.push(t.slice(0));return e}function ay(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var JL=ay(2*wu),ZL=ay(2*wu),XL=Gp(),YL=Gp(),KL=Gp(),cy;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(cy||(cy={}));var ly;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(ly||(ly={}));var eN=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},Qp=Object.create(null);function g(e,t){if(Me(t)){const r=Qp[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return Qp[e]=t,{id:e}}function rS(){return Qp}var iS={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468)},sS={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},fe={...iS,...sS},uo;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(uo||(uo={}));var qt;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(f){const p=t.exec(f.id);if(!p)return r(fe.error);const[,m,w]=p,$=["codicon","codicon-"+m];return w&&$.push("codicon-modifier-"+w.substring(1)),$}e.asClassNameArray=r;function i(f){return r(f).join(" ")}e.asClassName=i;function s(f){return"."+r(f).join(".")}e.asCSSSelector=s;function n(f){return f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||uo.isThemeColor(f.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const p=o.exec(f);if(!p)return;const[,m]=p;return{id:m}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,p){let m=f.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),p&&(m=`${m}~${p}`),{id:m}}e.modify=l;function u(f){const p=f.id.lastIndexOf("~");if(p!==-1)return f.id.substring(p+1)}e.getModifier=u;function h(f,p){return f.id===p.id&&f.color?.id===p.color?.id}e.isEqual=h})(qt||(qt={}));var Jp=new RegExp(`\\$\\(${qt.iconNameExpression}(?:${qt.iconModifierExpression})?\\)`,"g"),nS=new RegExp(`(\\\\)?${Jp.source}`,"g");function oS(e){return e.replace(nS,(t,r)=>r?t:`\\${t}`)}var tN=new RegExp(`\\\\${Jp.source}`,"g"),rN=new RegExp(`(\\s)?(\\\\)?${Jp.source}(\\s)?`,"g"),iN=new RegExp(`\\$\\(${qt.iconNameCharacter}+\\)`,"g"),uy;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(uy||(uy={}));var hy=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Ae("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=aS(this.supportThemeIcons?oS(e):e).replace(/([ \t]+)/g,(r,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${cS(t,e)}
`,this}appendLink(e,t,r){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(e,t){const r=new RegExp(cn(t),"g");return e.replace(r,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};function pn(e){return e instanceof hy?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function aS(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function cS(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function lS(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}var Gt={};(function(){function e(t,r){r(Gt)}e.amd=!0,function(t,r){typeof e=="function"&&e.amd?e(["exports"],r):typeof exports=="object"&&typeof module<"u"?r(exports):(t=typeof globalThis<"u"?globalThis:t||self,r(t.marked={}))}(this,function(t){"use strict";function r(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}t.defaults=r();function i(N){t.defaults=N}const s=/[&<>"']/,n=new RegExp(s.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=N=>c[N];function u(N,y){if(y){if(s.test(N))return N.replace(n,l)}else if(o.test(N))return N.replace(a,l);return N}const h=/(^|[^\[])\^/g;function f(N,y){let E=typeof N=="string"?N:N.source;y=y||"";const k={replace:(C,T)=>{let M=typeof T=="string"?T:T.source;return M=M.replace(h,"$1"),E=E.replace(C,M),k},getRegex:()=>new RegExp(E,y)};return k}function p(N){try{N=encodeURI(N).replace(/%25/g,"%")}catch{return null}return N}const m={exec:()=>null};function w(N,y){const E=N.replace(/\|/g,(T,M,_)=>{let K=!1,oe=M;for(;--oe>=0&&_[oe]==="\\";)K=!K;return K?"|":" |"}),k=E.split(/ \|/);let C=0;if(k[0].trim()||k.shift(),k.length>0&&!k[k.length-1].trim()&&k.pop(),y)if(k.length>y)k.splice(y);else for(;k.length<y;)k.push("");for(;C<k.length;C++)k[C]=k[C].trim().replace(/\\\|/g,"|");return k}function $(N,y,E){const k=N.length;if(k===0)return"";let C=0;for(;C<k;){const T=N.charAt(k-C-1);if(T===y&&!E)C++;else if(T!==y&&E)C++;else break}return N.slice(0,k-C)}function P(N,y){if(N.indexOf(y[1])===-1)return-1;let E=0;for(let k=0;k<N.length;k++)if(N[k]==="\\")k++;else if(N[k]===y[0])E++;else if(N[k]===y[1]&&(E--,E<0))return k;return-1}function A(N,y,E,k){const C=y.href,T=y.title?u(y.title):null,M=N[1].replace(/\\([\[\]])/g,"$1");if(N[0].charAt(0)!=="!"){k.state.inLink=!0;const _={type:"link",raw:E,href:C,title:T,text:M,tokens:k.inlineTokens(M)};return k.state.inLink=!1,_}return{type:"image",raw:E,href:C,title:T,text:u(M)}}function L(N,y){const E=N.match(/^(\s+)(?:```)/);if(E===null)return y;const k=E[1];return y.split(`
`).map(C=>{const T=C.match(/^\s+/);if(T===null)return C;const[M]=T;return M.length>=k.length?C.slice(k.length):C}).join(`
`)}class z{options;rules;lexer;constructor(y){this.options=y||t.defaults}space(y){const E=this.rules.block.newline.exec(y);if(E&&E[0].length>0)return{type:"space",raw:E[0]}}code(y){const E=this.rules.block.code.exec(y);if(E){const k=E[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:E[0],codeBlockStyle:"indented",text:this.options.pedantic?k:$(k,`
`)}}}fences(y){const E=this.rules.block.fences.exec(y);if(E){const k=E[0],C=L(k,E[3]||"");return{type:"code",raw:k,lang:E[2]?E[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):E[2],text:C}}}heading(y){const E=this.rules.block.heading.exec(y);if(E){let k=E[2].trim();if(/#$/.test(k)){const C=$(k,"#");(this.options.pedantic||!C||/ $/.test(C))&&(k=C.trim())}return{type:"heading",raw:E[0],depth:E[1].length,text:k,tokens:this.lexer.inline(k)}}}hr(y){const E=this.rules.block.hr.exec(y);if(E)return{type:"hr",raw:$(E[0],`
`)}}blockquote(y){const E=this.rules.block.blockquote.exec(y);if(E){let k=$(E[0],`
`).split(`
`),C="",T="";const M=[];for(;k.length>0;){let _=!1;const K=[];let oe;for(oe=0;oe<k.length;oe++)if(/^ {0,3}>/.test(k[oe]))K.push(k[oe]),_=!0;else if(!_)K.push(k[oe]);else break;k=k.slice(oe);const ke=K.join(`
`),Be=ke.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");C=C?`${C}
${ke}`:ke,T=T?`${T}
${Be}`:Be;const ut=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Be,M,!0),this.lexer.state.top=ut,k.length===0)break;const Lt=M[M.length-1];if(Lt?.type==="code")break;if(Lt?.type==="blockquote"){const dt=Lt,kr=dt.raw+`
`+k.join(`
`),Wr=this.blockquote(kr);M[M.length-1]=Wr,C=C.substring(0,C.length-dt.raw.length)+Wr.raw,T=T.substring(0,T.length-dt.text.length)+Wr.text;break}else if(Lt?.type==="list"){const dt=Lt,kr=dt.raw+`
`+k.join(`
`),Wr=this.list(kr);M[M.length-1]=Wr,C=C.substring(0,C.length-Lt.raw.length)+Wr.raw,T=T.substring(0,T.length-dt.raw.length)+Wr.raw,k=kr.substring(M[M.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:C,tokens:M,text:T}}}list(y){let E=this.rules.block.list.exec(y);if(E){let k=E[1].trim();const C=k.length>1,T={type:"list",raw:"",ordered:C,start:C?+k.slice(0,-1):"",loose:!1,items:[]};k=C?`\\d{1,9}\\${k.slice(-1)}`:`\\${k}`,this.options.pedantic&&(k=C?k:"[*+-]");const M=new RegExp(`^( {0,3}${k})((?:[	 ][^\\n]*)?(?:\\n|$))`);let _=!1;for(;y;){let K=!1,oe="",ke="";if(!(E=M.exec(y))||this.rules.block.hr.test(y))break;oe=E[0],y=y.substring(oe.length);let Be=E[2].split(`
`,1)[0].replace(/^\t+/,xa=>" ".repeat(3*xa.length)),ut=y.split(`
`,1)[0],Lt=!Be.trim(),dt=0;if(this.options.pedantic?(dt=2,ke=Be.trimStart()):Lt?dt=E[1].length+1:(dt=E[2].search(/[^ ]/),dt=dt>4?1:dt,ke=Be.slice(dt),dt+=E[1].length),Lt&&/^ *$/.test(ut)&&(oe+=ut+`
`,y=y.substring(ut.length+1),K=!0),!K){const xa=new RegExp(`^ {0,${Math.min(3,dt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),jl=new RegExp(`^ {0,${Math.min(3,dt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_l=new RegExp(`^ {0,${Math.min(3,dt-1)}}(?:\`\`\`|~~~)`),Bl=new RegExp(`^ {0,${Math.min(3,dt-1)}}#`);for(;y;){const Ea=y.split(`
`,1)[0];if(ut=Ea,this.options.pedantic&&(ut=ut.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_l.test(ut)||Bl.test(ut)||xa.test(ut)||jl.test(y))break;if(ut.search(/[^ ]/)>=dt||!ut.trim())ke+=`
`+ut.slice(dt);else{if(Lt||Be.search(/[^ ]/)>=4||_l.test(Be)||Bl.test(Be)||jl.test(Be))break;ke+=`
`+ut}!Lt&&!ut.trim()&&(Lt=!0),oe+=Ea+`
`,y=y.substring(Ea.length+1),Be=ut.slice(dt)}}T.loose||(_?T.loose=!0:/\n *\n *$/.test(oe)&&(_=!0));let kr=null,Wr;this.options.gfm&&(kr=/^\[[ xX]\] /.exec(ke),kr&&(Wr=kr[0]!=="[ ] ",ke=ke.replace(/^\[[ xX]\] +/,""))),T.items.push({type:"list_item",raw:oe,task:!!kr,checked:Wr,loose:!1,text:ke,tokens:[]}),T.raw+=oe}T.items[T.items.length-1].raw=T.items[T.items.length-1].raw.trimEnd(),T.items[T.items.length-1].text=T.items[T.items.length-1].text.trimEnd(),T.raw=T.raw.trimEnd();for(let K=0;K<T.items.length;K++)if(this.lexer.state.top=!1,T.items[K].tokens=this.lexer.blockTokens(T.items[K].text,[]),!T.loose){const oe=T.items[K].tokens.filter(Be=>Be.type==="space"),ke=oe.length>0&&oe.some(Be=>/\n.*\n/.test(Be.raw));T.loose=ke}if(T.loose)for(let K=0;K<T.items.length;K++)T.items[K].loose=!0;return T}}html(y){const E=this.rules.block.html.exec(y);if(E)return{type:"html",block:!0,raw:E[0],pre:E[1]==="pre"||E[1]==="script"||E[1]==="style",text:E[0]}}def(y){const E=this.rules.block.def.exec(y);if(E){const k=E[1].toLowerCase().replace(/\s+/g," "),C=E[2]?E[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",T=E[3]?E[3].substring(1,E[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):E[3];return{type:"def",tag:k,raw:E[0],href:C,title:T}}}table(y){const E=this.rules.block.table.exec(y);if(!E||!/[:|]/.test(E[2]))return;const k=w(E[1]),C=E[2].replace(/^\||\| *$/g,"").split("|"),T=E[3]&&E[3].trim()?E[3].replace(/\n[ \t]*$/,"").split(`
`):[],M={type:"table",raw:E[0],header:[],align:[],rows:[]};if(k.length===C.length){for(const _ of C)/^ *-+: *$/.test(_)?M.align.push("right"):/^ *:-+: *$/.test(_)?M.align.push("center"):/^ *:-+ *$/.test(_)?M.align.push("left"):M.align.push(null);for(let _=0;_<k.length;_++)M.header.push({text:k[_],tokens:this.lexer.inline(k[_]),header:!0,align:M.align[_]});for(const _ of T)M.rows.push(w(_,M.header.length).map((K,oe)=>({text:K,tokens:this.lexer.inline(K),header:!1,align:M.align[oe]})));return M}}lheading(y){const E=this.rules.block.lheading.exec(y);if(E)return{type:"heading",raw:E[0],depth:E[2].charAt(0)==="="?1:2,text:E[1],tokens:this.lexer.inline(E[1])}}paragraph(y){const E=this.rules.block.paragraph.exec(y);if(E){const k=E[1].charAt(E[1].length-1)===`
`?E[1].slice(0,-1):E[1];return{type:"paragraph",raw:E[0],text:k,tokens:this.lexer.inline(k)}}}text(y){const E=this.rules.block.text.exec(y);if(E)return{type:"text",raw:E[0],text:E[0],tokens:this.lexer.inline(E[0])}}escape(y){const E=this.rules.inline.escape.exec(y);if(E)return{type:"escape",raw:E[0],text:u(E[1])}}tag(y){const E=this.rules.inline.tag.exec(y);if(E)return!this.lexer.state.inLink&&/^<a /i.test(E[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(E[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(E[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(E[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:E[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:E[0]}}link(y){const E=this.rules.inline.link.exec(y);if(E){const k=E[2].trim();if(!this.options.pedantic&&/^</.test(k)){if(!/>$/.test(k))return;const M=$(k.slice(0,-1),"\\");if((k.length-M.length)%2===0)return}else{const M=P(E[2],"()");if(M>-1){const K=(E[0].indexOf("!")===0?5:4)+E[1].length+M;E[2]=E[2].substring(0,M),E[0]=E[0].substring(0,K).trim(),E[3]=""}}let C=E[2],T="";if(this.options.pedantic){const M=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(C);M&&(C=M[1],T=M[3])}else T=E[3]?E[3].slice(1,-1):"";return C=C.trim(),/^</.test(C)&&(this.options.pedantic&&!/>$/.test(k)?C=C.slice(1):C=C.slice(1,-1)),A(E,{href:C&&C.replace(this.rules.inline.anyPunctuation,"$1"),title:T&&T.replace(this.rules.inline.anyPunctuation,"$1")},E[0],this.lexer)}}reflink(y,E){let k;if((k=this.rules.inline.reflink.exec(y))||(k=this.rules.inline.nolink.exec(y))){const C=(k[2]||k[1]).replace(/\s+/g," "),T=E[C.toLowerCase()];if(!T){const M=k[0].charAt(0);return{type:"text",raw:M,text:M}}return A(k,T,k[0],this.lexer)}}emStrong(y,E,k=""){let C=this.rules.inline.emStrongLDelim.exec(y);if(!C||C[3]&&k.match(/[\p{L}\p{N}]/u))return;if(!(C[1]||C[2]||"")||!k||this.rules.inline.punctuation.exec(k)){const M=[...C[0]].length-1;let _,K,oe=M,ke=0;const Be=C[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Be.lastIndex=0,E=E.slice(-1*y.length+M);(C=Be.exec(E))!=null;){if(_=C[1]||C[2]||C[3]||C[4]||C[5]||C[6],!_)continue;if(K=[..._].length,C[3]||C[4]){oe+=K;continue}else if((C[5]||C[6])&&M%3&&!((M+K)%3)){ke+=K;continue}if(oe-=K,oe>0)continue;K=Math.min(K,K+oe+ke);const ut=[...C[0]][0].length,Lt=y.slice(0,M+C.index+ut+K);if(Math.min(M,K)%2){const kr=Lt.slice(1,-1);return{type:"em",raw:Lt,text:kr,tokens:this.lexer.inlineTokens(kr)}}const dt=Lt.slice(2,-2);return{type:"strong",raw:Lt,text:dt,tokens:this.lexer.inlineTokens(dt)}}}}codespan(y){const E=this.rules.inline.code.exec(y);if(E){let k=E[2].replace(/\n/g," ");const C=/[^ ]/.test(k),T=/^ /.test(k)&&/ $/.test(k);return C&&T&&(k=k.substring(1,k.length-1)),k=u(k,!0),{type:"codespan",raw:E[0],text:k}}}br(y){const E=this.rules.inline.br.exec(y);if(E)return{type:"br",raw:E[0]}}del(y){const E=this.rules.inline.del.exec(y);if(E)return{type:"del",raw:E[0],text:E[2],tokens:this.lexer.inlineTokens(E[2])}}autolink(y){const E=this.rules.inline.autolink.exec(y);if(E){let k,C;return E[2]==="@"?(k=u(E[1]),C="mailto:"+k):(k=u(E[1]),C=k),{type:"link",raw:E[0],text:k,href:C,tokens:[{type:"text",raw:k,text:k}]}}}url(y){let E;if(E=this.rules.inline.url.exec(y)){let k,C;if(E[2]==="@")k=u(E[0]),C="mailto:"+k;else{let T;do T=E[0],E[0]=this.rules.inline._backpedal.exec(E[0])?.[0]??"";while(T!==E[0]);k=u(E[0]),E[1]==="www."?C="http://"+E[0]:C=E[0]}return{type:"link",raw:E[0],text:k,href:C,tokens:[{type:"text",raw:k,text:k}]}}}inlineText(y){const E=this.rules.inline.text.exec(y);if(E){let k;return this.lexer.state.inRawBlock?k=E[0]:k=u(E[0]),{type:"text",raw:E[0],text:k}}}}const W=/^(?: *(?:\n|$))+/,J=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,ne=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Y=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,se=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Te=/(?:[*+-]|\d{1,9}[.)])/,ve=f(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Te).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Ze=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,at=/^[^\n]+/,X=/(?!\s*\])(?:\\.|[^\[\]\\])+/,q=f(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",X).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ie=f(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Te).getRegex(),G="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ae=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xe=f("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ae).replace("tag",G).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pe=f(Ze).replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex(),ze={blockquote:f(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pe).getRegex(),code:J,def:q,fences:ne,heading:se,hr:Y,html:xe,lheading:ve,list:ie,newline:W,paragraph:pe,table:m,text:at},yt=f("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex(),xt={...ze,table:yt,paragraph:f(Ze).replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",yt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex()},jt={...ze,html:f(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ae).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:m,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:f(Ze).replace("hr",Y).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ve).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},rt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Qt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Kr=/^( {2,}|\\)\n(?!\s*$)/,ei=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Nr="\\p{P}\\p{S}",Ie=f(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Nr).getRegex(),ti=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,We=f(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Nr).getRegex(),Br=f("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Nr).getRegex(),xr=f("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Nr).getRegex(),Er=f(/\\([punct])/,"gu").replace(/punct/g,Nr).getRegex(),vs=f(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ws=f(ae).replace("(?:-->|$)","-->").getRegex(),Ys=f("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ws).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ei=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ks=f(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ei).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ji=f(/^!?\[(label)\]\[(ref)\]/).replace("label",Ei).replace("ref",X).getRegex(),_i=f(/^!?\[(ref)\](?:\[\])?/).replace("ref",X).getRegex(),Jt=f("reflink|nolink(?!\\()","g").replace("reflink",ji).replace("nolink",_i).getRegex(),Fr={_backpedal:m,anyPunctuation:Er,autolink:vs,blockSkip:ti,br:Kr,code:Qt,del:m,emStrongLDelim:We,emStrongRDelimAst:Br,emStrongRDelimUnd:xr,escape:rt,link:Ks,nolink:_i,punctuation:Ie,reflink:ji,reflinkSearch:Jt,tag:Ys,text:ei,url:m},mt={...Fr,link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",Ei).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ei).getRegex()},Rt={...Fr,escape:f(rt).replace("])","~|])").getRegex(),url:f(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ki={...Rt,br:f(Kr).replace("{2,}","*").getRegex(),text:f(Rt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bs={normal:ze,gfm:xt,pedantic:jt},zr={normal:Fr,gfm:Rt,breaks:ki,pedantic:mt};class _t{tokens;options;state;tokenizer;inlineQueue;constructor(y){this.tokens=[],this.tokens.links=Object.create(null),this.options=y||t.defaults,this.options.tokenizer=this.options.tokenizer||new z,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const E={block:bs.normal,inline:zr.normal};this.options.pedantic?(E.block=bs.pedantic,E.inline=zr.pedantic):this.options.gfm&&(E.block=bs.gfm,this.options.breaks?E.inline=zr.breaks:E.inline=zr.gfm),this.tokenizer.rules=E}static get rules(){return{block:bs,inline:zr}}static lex(y,E){return new _t(E).lex(y)}static lexInline(y,E){return new _t(E).inlineTokens(y)}lex(y){y=y.replace(/\r\n|\r/g,`
`),this.blockTokens(y,this.tokens);for(let E=0;E<this.inlineQueue.length;E++){const k=this.inlineQueue[E];this.inlineTokens(k.src,k.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(y,E=[],k=!1){this.options.pedantic?y=y.replace(/\t/g,"    ").replace(/^ +$/gm,""):y=y.replace(/^( *)(\t+)/gm,(_,K,oe)=>K+"    ".repeat(oe.length));let C,T,M;for(;y;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(C=_.call({lexer:this},y,E))?(y=y.substring(C.raw.length),E.push(C),!0):!1))){if(C=this.tokenizer.space(y)){y=y.substring(C.raw.length),C.raw.length===1&&E.length>0?E[E.length-1].raw+=`
`:E.push(C);continue}if(C=this.tokenizer.code(y)){y=y.substring(C.raw.length),T=E[E.length-1],T&&(T.type==="paragraph"||T.type==="text")?(T.raw+=`
`+C.raw,T.text+=`
`+C.text,this.inlineQueue[this.inlineQueue.length-1].src=T.text):E.push(C);continue}if(C=this.tokenizer.fences(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.heading(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.hr(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.blockquote(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.list(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.html(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.def(y)){y=y.substring(C.raw.length),T=E[E.length-1],T&&(T.type==="paragraph"||T.type==="text")?(T.raw+=`
`+C.raw,T.text+=`
`+C.raw,this.inlineQueue[this.inlineQueue.length-1].src=T.text):this.tokens.links[C.tag]||(this.tokens.links[C.tag]={href:C.href,title:C.title});continue}if(C=this.tokenizer.table(y)){y=y.substring(C.raw.length),E.push(C);continue}if(C=this.tokenizer.lheading(y)){y=y.substring(C.raw.length),E.push(C);continue}if(M=y,this.options.extensions&&this.options.extensions.startBlock){let _=1/0;const K=y.slice(1);let oe;this.options.extensions.startBlock.forEach(ke=>{oe=ke.call({lexer:this},K),typeof oe=="number"&&oe>=0&&(_=Math.min(_,oe))}),_<1/0&&_>=0&&(M=y.substring(0,_+1))}if(this.state.top&&(C=this.tokenizer.paragraph(M))){T=E[E.length-1],k&&T?.type==="paragraph"?(T.raw+=`
`+C.raw,T.text+=`
`+C.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=T.text):E.push(C),k=M.length!==y.length,y=y.substring(C.raw.length);continue}if(C=this.tokenizer.text(y)){y=y.substring(C.raw.length),T=E[E.length-1],T&&T.type==="text"?(T.raw+=`
`+C.raw,T.text+=`
`+C.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=T.text):E.push(C);continue}if(y){const _="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,E}inline(y,E=[]){return this.inlineQueue.push({src:y,tokens:E}),E}inlineTokens(y,E=[]){let k,C,T,M=y,_,K,oe;if(this.tokens.links){const ke=Object.keys(this.tokens.links);if(ke.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(M))!=null;)ke.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(M=M.slice(0,_.index)+"["+"a".repeat(_[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(M))!=null;)M=M.slice(0,_.index)+"["+"a".repeat(_[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.anyPunctuation.exec(M))!=null;)M=M.slice(0,_.index)+"++"+M.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;y;)if(K||(oe=""),K=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(ke=>(k=ke.call({lexer:this},y,E))?(y=y.substring(k.raw.length),E.push(k),!0):!1))){if(k=this.tokenizer.escape(y)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.tag(y)){y=y.substring(k.raw.length),C=E[E.length-1],C&&k.type==="text"&&C.type==="text"?(C.raw+=k.raw,C.text+=k.text):E.push(k);continue}if(k=this.tokenizer.link(y)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.reflink(y,this.tokens.links)){y=y.substring(k.raw.length),C=E[E.length-1],C&&k.type==="text"&&C.type==="text"?(C.raw+=k.raw,C.text+=k.text):E.push(k);continue}if(k=this.tokenizer.emStrong(y,M,oe)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.codespan(y)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.br(y)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.del(y)){y=y.substring(k.raw.length),E.push(k);continue}if(k=this.tokenizer.autolink(y)){y=y.substring(k.raw.length),E.push(k);continue}if(!this.state.inLink&&(k=this.tokenizer.url(y))){y=y.substring(k.raw.length),E.push(k);continue}if(T=y,this.options.extensions&&this.options.extensions.startInline){let ke=1/0;const Be=y.slice(1);let ut;this.options.extensions.startInline.forEach(Lt=>{ut=Lt.call({lexer:this},Be),typeof ut=="number"&&ut>=0&&(ke=Math.min(ke,ut))}),ke<1/0&&ke>=0&&(T=y.substring(0,ke+1))}if(k=this.tokenizer.inlineText(T)){y=y.substring(k.raw.length),k.raw.slice(-1)!=="_"&&(oe=k.raw.slice(-1)),K=!0,C=E[E.length-1],C&&C.type==="text"?(C.raw+=k.raw,C.text+=k.text):E.push(k);continue}if(y){const ke="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(ke);break}else throw new Error(ke)}}return E}}class D{options;parser;constructor(y){this.options=y||t.defaults}space(y){return""}code({text:y,lang:E,escaped:k}){const C=(E||"").match(/^\S*/)?.[0],T=y.replace(/\n$/,"")+`
`;return C?'<pre><code class="language-'+u(C)+'">'+(k?T:u(T,!0))+`</code></pre>
`:"<pre><code>"+(k?T:u(T,!0))+`</code></pre>
`}blockquote({tokens:y}){return`<blockquote>
${this.parser.parse(y)}</blockquote>
`}html({text:y}){return y}heading({tokens:y,depth:E}){return`<h${E}>${this.parser.parseInline(y)}</h${E}>
`}hr(y){return`<hr>
`}list(y){const E=y.ordered,k=y.start;let C="";for(let _=0;_<y.items.length;_++){const K=y.items[_];C+=this.listitem(K)}const T=E?"ol":"ul",M=E&&k!==1?' start="'+k+'"':"";return"<"+T+M+`>
`+C+"</"+T+`>
`}listitem(y){let E="";if(y.task){const k=this.checkbox({checked:!!y.checked});y.loose?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=k+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=k+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",raw:k+" ",text:k+" "}):E+=k+" "}return E+=this.parser.parse(y.tokens,!!y.loose),`<li>${E}</li>
`}checkbox({checked:y}){return"<input "+(y?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:y}){return`<p>${this.parser.parseInline(y)}</p>
`}table(y){let E="",k="";for(let T=0;T<y.header.length;T++)k+=this.tablecell(y.header[T]);E+=this.tablerow({text:k});let C="";for(let T=0;T<y.rows.length;T++){const M=y.rows[T];k="";for(let _=0;_<M.length;_++)k+=this.tablecell(M[_]);C+=this.tablerow({text:k})}return C&&(C=`<tbody>${C}</tbody>`),`<table>
<thead>
`+E+`</thead>
`+C+`</table>
`}tablerow({text:y}){return`<tr>
${y}</tr>
`}tablecell(y){const E=this.parser.parseInline(y.tokens),k=y.header?"th":"td";return(y.align?`<${k} align="${y.align}">`:`<${k}>`)+E+`</${k}>
`}strong({tokens:y}){return`<strong>${this.parser.parseInline(y)}</strong>`}em({tokens:y}){return`<em>${this.parser.parseInline(y)}</em>`}codespan({text:y}){return`<code>${y}</code>`}br(y){return"<br>"}del({tokens:y}){return`<del>${this.parser.parseInline(y)}</del>`}link({href:y,title:E,tokens:k}){const C=this.parser.parseInline(k),T=p(y);if(T===null)return C;y=T;let M='<a href="'+y+'"';return E&&(M+=' title="'+E+'"'),M+=">"+C+"</a>",M}image({href:y,title:E,text:k}){const C=p(y);if(C===null)return k;y=C;let T=`<img src="${y}" alt="${k}"`;return E&&(T+=` title="${E}"`),T+=">",T}text(y){return"tokens"in y&&y.tokens?this.parser.parseInline(y.tokens):y.text}}class F{strong({text:y}){return y}em({text:y}){return y}codespan({text:y}){return y}del({text:y}){return y}html({text:y}){return y}text({text:y}){return y}link({text:y}){return""+y}image({text:y}){return""+y}br(){return""}}class U{options;renderer;textRenderer;constructor(y){this.options=y||t.defaults,this.options.renderer=this.options.renderer||new D,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new F}static parse(y,E){return new U(E).parse(y)}static parseInline(y,E){return new U(E).parseInline(y)}parse(y,E=!0){let k="";for(let C=0;C<y.length;C++){const T=y[C];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[T.type]){const _=T,K=this.options.extensions.renderers[_.type].call({parser:this},_);if(K!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type)){k+=K||"";continue}}const M=T;switch(M.type){case"space":{k+=this.renderer.space(M);continue}case"hr":{k+=this.renderer.hr(M);continue}case"heading":{k+=this.renderer.heading(M);continue}case"code":{k+=this.renderer.code(M);continue}case"table":{k+=this.renderer.table(M);continue}case"blockquote":{k+=this.renderer.blockquote(M);continue}case"list":{k+=this.renderer.list(M);continue}case"html":{k+=this.renderer.html(M);continue}case"paragraph":{k+=this.renderer.paragraph(M);continue}case"text":{let _=M,K=this.renderer.text(_);for(;C+1<y.length&&y[C+1].type==="text";)_=y[++C],K+=`
`+this.renderer.text(_);E?k+=this.renderer.paragraph({type:"paragraph",raw:K,text:K,tokens:[{type:"text",raw:K,text:K}]}):k+=K;continue}default:{const _='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(_),"";throw new Error(_)}}}return k}parseInline(y,E){E=E||this.renderer;let k="";for(let C=0;C<y.length;C++){const T=y[C];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[T.type]){const _=this.options.extensions.renderers[T.type].call({parser:this},T);if(_!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(T.type)){k+=_||"";continue}}const M=T;switch(M.type){case"escape":{k+=E.text(M);break}case"html":{k+=E.html(M);break}case"link":{k+=E.link(M);break}case"image":{k+=E.image(M);break}case"strong":{k+=E.strong(M);break}case"em":{k+=E.em(M);break}case"codespan":{k+=E.codespan(M);break}case"br":{k+=E.br(M);break}case"del":{k+=E.del(M);break}case"text":{k+=E.text(M);break}default:{const _='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(_),"";throw new Error(_)}}}return k}}class ce{options;constructor(y){this.options=y||t.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(y){return y}postprocess(y){return y}processAllTokens(y){return y}}class be{defaults=r();options=this.setOptions;parse=this.parseMarkdown(_t.lex,U.parse);parseInline=this.parseMarkdown(_t.lexInline,U.parseInline);Parser=U;Renderer=D;TextRenderer=F;Lexer=_t;Tokenizer=z;Hooks=ce;constructor(...y){this.use(...y)}walkTokens(y,E){let k=[];for(const C of y)switch(k=k.concat(E.call(this,C)),C.type){case"table":{const T=C;for(const M of T.header)k=k.concat(this.walkTokens(M.tokens,E));for(const M of T.rows)for(const _ of M)k=k.concat(this.walkTokens(_.tokens,E));break}case"list":{const T=C;k=k.concat(this.walkTokens(T.items,E));break}default:{const T=C;this.defaults.extensions?.childTokens?.[T.type]?this.defaults.extensions.childTokens[T.type].forEach(M=>{const _=T[M].flat(1/0);k=k.concat(this.walkTokens(_,E))}):T.tokens&&(k=k.concat(this.walkTokens(T.tokens,E)))}}return k}use(...y){const E=this.defaults.extensions||{renderers:{},childTokens:{}};return y.forEach(k=>{const C={...k};if(C.async=this.defaults.async||C.async||!1,k.extensions&&(k.extensions.forEach(T=>{if(!T.name)throw new Error("extension name required");if("renderer"in T){const M=E.renderers[T.name];M?E.renderers[T.name]=function(..._){let K=T.renderer.apply(this,_);return K===!1&&(K=M.apply(this,_)),K}:E.renderers[T.name]=T.renderer}if("tokenizer"in T){if(!T.level||T.level!=="block"&&T.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const M=E[T.level];M?M.unshift(T.tokenizer):E[T.level]=[T.tokenizer],T.start&&(T.level==="block"?E.startBlock?E.startBlock.push(T.start):E.startBlock=[T.start]:T.level==="inline"&&(E.startInline?E.startInline.push(T.start):E.startInline=[T.start]))}"childTokens"in T&&T.childTokens&&(E.childTokens[T.name]=T.childTokens)}),C.extensions=E),k.renderer){const T=this.defaults.renderer||new D(this.defaults);for(const M in k.renderer){if(!(M in T))throw new Error(`renderer '${M}' does not exist`);if(["options","parser"].includes(M))continue;const _=M,K=k.renderer[_],oe=T[_];T[_]=(...ke)=>{let Be=K.apply(T,ke);return Be===!1&&(Be=oe.apply(T,ke)),Be||""}}C.renderer=T}if(k.tokenizer){const T=this.defaults.tokenizer||new z(this.defaults);for(const M in k.tokenizer){if(!(M in T))throw new Error(`tokenizer '${M}' does not exist`);if(["options","rules","lexer"].includes(M))continue;const _=M,K=k.tokenizer[_],oe=T[_];T[_]=(...ke)=>{let Be=K.apply(T,ke);return Be===!1&&(Be=oe.apply(T,ke)),Be}}C.tokenizer=T}if(k.hooks){const T=this.defaults.hooks||new ce;for(const M in k.hooks){if(!(M in T))throw new Error(`hook '${M}' does not exist`);if(M==="options")continue;const _=M,K=k.hooks[_],oe=T[_];ce.passThroughHooks.has(M)?T[_]=ke=>{if(this.defaults.async)return Promise.resolve(K.call(T,ke)).then(ut=>oe.call(T,ut));const Be=K.call(T,ke);return oe.call(T,Be)}:T[_]=(...ke)=>{let Be=K.apply(T,ke);return Be===!1&&(Be=oe.apply(T,ke)),Be}}C.hooks=T}if(k.walkTokens){const T=this.defaults.walkTokens,M=k.walkTokens;C.walkTokens=function(_){let K=[];return K.push(M.call(this,_)),T&&(K=K.concat(T.call(this,_))),K}}this.defaults={...this.defaults,...C}}),this}setOptions(y){return this.defaults={...this.defaults,...y},this}lexer(y,E){return _t.lex(y,E??this.defaults)}parser(y,E){return U.parse(y,E??this.defaults)}parseMarkdown(y,E){return(C,T)=>{const M={...T},_={...this.defaults,...M},K=this.onError(!!_.silent,!!_.async);if(this.defaults.async===!0&&M.async===!1)return K(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof C>"u"||C===null)return K(new Error("marked(): input parameter is undefined or null"));if(typeof C!="string")return K(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(C)+", string expected"));if(_.hooks&&(_.hooks.options=_),_.async)return Promise.resolve(_.hooks?_.hooks.preprocess(C):C).then(oe=>y(oe,_)).then(oe=>_.hooks?_.hooks.processAllTokens(oe):oe).then(oe=>_.walkTokens?Promise.all(this.walkTokens(oe,_.walkTokens)).then(()=>oe):oe).then(oe=>E(oe,_)).then(oe=>_.hooks?_.hooks.postprocess(oe):oe).catch(K);try{_.hooks&&(C=_.hooks.preprocess(C));let oe=y(C,_);_.hooks&&(oe=_.hooks.processAllTokens(oe)),_.walkTokens&&this.walkTokens(oe,_.walkTokens);let ke=E(oe,_);return _.hooks&&(ke=_.hooks.postprocess(ke)),ke}catch(oe){return K(oe)}}}onError(y,E){return k=>{if(k.message+=`
Please report this to https://github.com/markedjs/marked.`,y){const C="<p>An error occurred:</p><pre>"+u(k.message+"",!0)+"</pre>";return E?Promise.resolve(C):C}if(E)return Promise.reject(k);throw k}}}const lt=new be;function le(N,y){return lt.parse(N,y)}le.options=le.setOptions=function(N){return lt.setOptions(N),le.defaults=lt.defaults,i(le.defaults),le},le.getDefaults=r,le.defaults=t.defaults,le.use=function(...N){return lt.use(...N),le.defaults=lt.defaults,i(le.defaults),le},le.walkTokens=function(N,y){return lt.walkTokens(N,y)},le.parseInline=lt.parseInline,le.Parser=U,le.parser=U.parse,le.Renderer=D,le.TextRenderer=F,le.Lexer=_t,le.lexer=_t.lex,le.Tokenizer=z,le.Hooks=ce,le.parse=le;const Zt=le.options,wt=le.setOptions,Bt=le.use,sr=le.walkTokens,vt=le.parseInline,S=le,bt=U.parse,tr=_t.lex;t.Hooks=ce,t.Lexer=_t,t.Marked=be,t.Parser=U,t.Renderer=D,t.TextRenderer=F,t.Tokenizer=z,t.getDefaults=r,t.lexer=tr,t.marked=le,t.options=Zt,t.parse=S,t.parseInline=vt,t.parser=bt,t.setOptions=wt,t.use=Bt,t.walkTokens=sr})})();var sN=Gt.Hooks||exports.Hooks,nN=Gt.Lexer||exports.Lexer,oN=Gt.Marked||exports.Marked,aN=Gt.Parser||exports.Parser,cN=Gt.Renderer||exports.Renderer,lN=Gt.TextRenderer||exports.TextRenderer,uN=Gt.Tokenizer||exports.Tokenizer,hN=Gt.defaults||exports.defaults,dN=Gt.getDefaults||exports.getDefaults,fN=Gt.lexer||exports.lexer,dy=Gt.marked||exports.marked,pN=Gt.options||exports.options,gN=Gt.parse||exports.parse,mN=Gt.parseInline||exports.parseInline,vN=Gt.parser||exports.parser,wN=Gt.setOptions||exports.setOptions,bN=Gt.use||exports.use,yN=Gt.walkTokens||exports.walkTokens;function uS(e){return JSON.stringify(e,hS)}function fy(e){let t=JSON.parse(e);return t=hr(t),t}function hS(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function hr(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return x.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof Ne||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=hr(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=hr(e[r],t+1))}return e}var Ji=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),dS=/^(.+)\/(.+?)(;.+)?$/;function py(e,t){const r=dS.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var dr=Symbol("unset"),fS=class{constructor(){this.a=new Zp,this.b=0}get size(){return this.b}get nodes(){return this.a.children?.values()||Vr.empty()}get entries(){return this.a.children?.entries()||Vr.empty()}insert(e,t,r){this.d(e,i=>i._value=t,r)}mutate(e,t){this.d(e,r=>r._value=t(r._value===dr?void 0:r._value))}mutatePath(e,t){this.d(e,()=>{},r=>t(r))}delete(e){const t=this.c(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==dr){for(this.b--,t[r].node._value=dr;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==dr)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.c(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==dr)break}for(const i of gy(r))i._value!==dr&&(this.b--,yield i._value)}find(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===dr?void 0:t._value}hasKeyOrParent(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==dr)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==dr}c(e){const t=[{part:"",node:this.a}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}d(e,t,r){let i=this.a;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new Zp;i.children.set(o,a),i=a}else{const a=new Zp;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===dr?0:1;t(i);const n=i._value===dr?0:1;this.b+=n-s}*values(){for(const{_value:e}of gy(this.a))e!==dr&&(yield e)}};function*gy(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var Zp=class{constructor(){this._value=dr}get value(){return this._value===dr?void 0:this._value}set value(e){this._value=e===void 0?dr:e}},Hr=class Gn{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Gn(t,r)}delta(t=0,r=0){return this.with(this.lineNumber+t,this.column+r)}equals(t){return Gn.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Gn.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Gn.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Gn(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Gn(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},tt=class Ht{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Ht.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Ht.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return Ht.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return Ht.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return Ht.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Ht(i,s,n,o)}intersectRanges(t){return Ht.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new Ht(i,s,n,o)}equalsRange(t){return Ht.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return Ht.getEndPosition(this)}static getEndPosition(t){return new Hr(t.endLineNumber,t.endColumn)}getStartPosition(){return Ht.getStartPosition(this)}static getStartPosition(t){return new Hr(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new Ht(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new Ht(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return Ht.collapseToStart(this)}static collapseToStart(t){return new Ht(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Ht.collapseToEnd(this)}static collapseToEnd(t){return new Ht(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Ht(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,r=t){return new Ht(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new Ht(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=r.endColumn|0;return h-f}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},my=class{constructor(){this.a=new Map,this.b=new Map,this.c=new R,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),$e(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new pS(this,e,t);return this.b.set(e,r),$e(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},pS=class extends Ee{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},vy;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(vy||(vy={}));var wy;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(wy||(wy={}));var by;(function(e){const t=new Map;t.set(0,fe.symbolMethod),t.set(1,fe.symbolFunction),t.set(2,fe.symbolConstructor),t.set(3,fe.symbolField),t.set(4,fe.symbolVariable),t.set(5,fe.symbolClass),t.set(6,fe.symbolStruct),t.set(7,fe.symbolInterface),t.set(8,fe.symbolModule),t.set(9,fe.symbolProperty),t.set(10,fe.symbolEvent),t.set(11,fe.symbolOperator),t.set(12,fe.symbolUnit),t.set(13,fe.symbolValue),t.set(15,fe.symbolEnum),t.set(14,fe.symbolConstant),t.set(15,fe.symbolEnum),t.set(16,fe.symbolEnumMember),t.set(17,fe.symbolKeyword),t.set(27,fe.symbolSnippet),t.set(18,fe.symbolText),t.set(19,fe.symbolColor),t.set(20,fe.symbolFile),t.set(21,fe.symbolReference),t.set(22,fe.symbolCustomColor),t.set(23,fe.symbolFolder),t.set(24,fe.symbolTypeParameter),t.set(25,fe.account),t.set(26,fe.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=fe.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(by||(by={}));var yy;(function(e){e[e.Deprecated=1]="Deprecated"})(yy||(yy={}));var xy;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(xy||(xy={}));var Ey;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(Ey||(Ey={}));var ky;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(ky||(ky={}));var bu;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(bu||(bu={}));var $y;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})($y||($y={}));var Sy;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(Sy||(Sy={}));var Cy;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(Cy||(Cy={}));var Iy;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Iy||(Iy={}));function gS(e){return e&&x.isUri(e.uri)&&tt.isIRange(e.range)&&(tt.isIRange(e.originSelectionRange)||tt.isIRange(e.targetSelectionRange))}var Dy;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(Dy||(Dy={}));var xN={17:d(795,null),16:d(796,null),4:d(797,null),13:d(798,null),8:d(799,null),9:d(800,null),21:d(801,null),23:d(802,null),7:d(803,null),0:d(804,null),11:d(805,null),10:d(806,null),19:d(807,null),5:d(808,null),1:d(809,null),2:d(810,null),20:d(811,null),15:d(812,null),18:d(813,null),24:d(814,null),3:d(815,null),6:d(816,null),14:d(817,null),22:d(818,null),25:d(819,null),12:d(820,null)},Py;(function(e){e[e.Deprecated=1]="Deprecated"})(Py||(Py={}));var Ay;(function(e){const t=new Map;t.set(0,fe.symbolFile),t.set(1,fe.symbolModule),t.set(2,fe.symbolNamespace),t.set(3,fe.symbolPackage),t.set(4,fe.symbolClass),t.set(5,fe.symbolMethod),t.set(6,fe.symbolProperty),t.set(7,fe.symbolField),t.set(8,fe.symbolConstructor),t.set(9,fe.symbolEnum),t.set(10,fe.symbolInterface),t.set(11,fe.symbolFunction),t.set(12,fe.symbolVariable),t.set(13,fe.symbolConstant),t.set(14,fe.symbolString),t.set(15,fe.symbolNumber),t.set(16,fe.symbolBoolean),t.set(17,fe.symbolArray),t.set(18,fe.symbolObject),t.set(19,fe.symbolKey),t.set(20,fe.symbolNull),t.set(21,fe.symbolEnumMember),t.set(22,fe.symbolStruct),t.set(23,fe.symbolEvent),t.set(24,fe.symbolOperator),t.set(25,fe.symbolTypeParameter);function r(i){let s=t.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=fe.symbolProperty),s}e.toIcon=r})(Ay||(Ay={}));var ho=class Xs{static{this.Comment=new Xs("comment")}static{this.Imports=new Xs("imports")}static{this.Region=new Xs("region")}static fromValue(t){switch(t){case"comment":return Xs.Comment;case"imports":return Xs.Imports;case"region":return Xs.Region}return new Xs(t)}constructor(t){this.value=t}},Ty;(function(e){e[e.AIGenerated=1]="AIGenerated"})(Ty||(Ty={}));var yu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(yu||(yu={}));var Xp;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(Xp||(Xp={}));var fo;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(fo||(fo={}));var Qa;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Qa||(Qa={}));var Ja;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ja||(Ja={}));var Ry;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Ry||(Ry={}));var Ly;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(Ly||(Ly={}));var Ny;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(Ny||(Ny={}));var EN=new my,kN=new my,Fy;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(Fy||(Fy={}));var xu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(xu||(xu={}));var My;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(My||(My={}));var fr;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(fr||(fr={})),function(e){function t(o,a){return a-o}e.compare=t;const r=Object.create(null);r[e.Error]=d(1981,null),r[e.Warning]=d(1982,null),r[e.Info]=d(1983,null);function i(o){return r[o]||""}e.toString=i;function s(o){switch(o){case It.Error:return e.Error;case It.Warning:return e.Warning;case It.Info:return e.Info;case It.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return It.Error;case e.Warning:return It.Warning;case e.Info:return It.Info;case e.Hint:return It.Ignore}}e.toSeverity=n}(fr||(fr={}));var Oy;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(fr.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(Oy||(Oy={}));var $N=ee("markerService");function Tr(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function mS(e,t="Unreachable"){throw new Error(t)}function Uy(e){if(!e()){debugger;e(),Sr(new P0("Assertion Failed"))}}var vS=class{constructor(){this.a=new Map}add(e,t){Tr(Me(e)),Tr($t(t)),Tr(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},Kt=new vS,wS=ee("fileService"),gn;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(gn||(gn={}));var po;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(po||(po={}));var Hy;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(Hy||(Hy={}));var jy;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(jy||(jy={}));var Ce;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(Ce||(Ce={}));var _y=class Lx extends Error{static create(t,r){const i=new Lx(t.toString(),r);return By(i,r),i}constructor(t,r){super(t),this.code=r}};function By(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Eu(e){if(!e)return Ce.Unknown;if(e instanceof _y)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return Ce.Unknown;switch(t[1]){case Ce.FileExists:return Ce.FileExists;case Ce.FileIsADirectory:return Ce.FileIsADirectory;case Ce.FileNotADirectory:return Ce.FileNotADirectory;case Ce.FileNotFound:return Ce.FileNotFound;case Ce.FileTooLarge:return Ce.FileTooLarge;case Ce.FileWriteLocked:return Ce.FileWriteLocked;case Ce.NoPermissions:return Ce.NoPermissions;case Ce.Unavailable:return Ce.Unavailable}return Ce.Unknown}function bS(e){if(e instanceof Yp)return e.fileOperationResult;switch(Eu(e)){case Ce.FileNotFound:return 1;case Ce.FileIsADirectory:return 0;case Ce.FileNotADirectory:return 9;case Ce.FileWriteLocked:return 5;case Ce.NoPermissions:return 6;case Ce.FileExists:return 4;case Ce.FileTooLarge:return 7;default:return 10}}var zy;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(zy||(zy={}));var Wy;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(Wy||(Wy={}));var SN=class Pf{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new $r(()=>{const i=Qi.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new $r(()=>{const i=Qi.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new $r(()=>{const i=Qi.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==Pf.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=Pf.a):this.b!==void 0&&(this.b=Pf.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},Yp=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},Vy;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(Vy||(Vy={}));var qy;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(qy||(qy={}));var yS="";function Gy(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var CN=class br{static{this.KB=1024}static{this.MB=br.KB*br.KB}static{this.GB=br.MB*br.KB}static{this.TB=br.GB*br.KB}static formatSize(t){return Is(t)||(t=0),t<br.KB?d(1882,null,t.toFixed(0)):t<br.MB?d(1883,null,(t/br.KB).toFixed(2)):t<br.GB?d(1884,null,(t/br.MB).toFixed(2)):t<br.TB?d(1885,null,(t/br.GB).toFixed(2)):d(1886,null,(t/br.TB).toFixed(2))}},xS=class extends Ee{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new R),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},IN=class g0{constructor(){this.id=g0.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new g0,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},DN=class Nx extends xS{static{this.ID="vs.actions.empty"}constructor(){super(Nx.ID,d(42,null),void 0,!1)}},ES={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},kS={id:"default",displayName:d(4073,null),providerDisplayName:d(4074,null)},Qy;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(Qy||(Qy={}));var Jy;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(Jy||(Jy={}));function ku(e){if(Ts(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function Zy(e){if(Ts(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Kp(e){if(Ts(e)||ku(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function $u(e){if(Ts(e))return!1;const t=e;return x.isUri(t?.base?.resource)&&x.isUri(t?.input1?.resource)&&x.isUri(t?.input2?.resource)&&x.isUri(t?.result?.resource)}var Xy;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(Xy||(Xy={}));var Yy;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(Yy||(Yy={}));var $S=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},PN=new $S,Ky;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(Ky||(Ky={}));var SS=class extends Ee{};function Ts(e){return e instanceof SS}function CS(e){const t=e;return x.isUri(t?.preferredResource)}function IS(e){const t=e;return Ts(t?.primary)&&Ts(t?.secondary)}function DS(e){const t=e;return Ts(t?.modified)&&Ts(t?.original)}var e4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(e4||(e4={}));var t4;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(t4||(t4={}));var Rs;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(Rs||(Rs={}));var PS=class{getOriginalUri(e,t){if(!e)return;if($u(e))return i4.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===Rs.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Rs.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Rs.PRIMARY?i:s}}if(ku(e)||Zy(e)||Kp(e)||$u(e))return;const r=CS(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return IS(e)||Kp(e)?{primary:e.primary,secondary:e.secondary}:DS(e)||ku(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if($u(e))return i4.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===Rs.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Rs.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Rs.PRIMARY?i:s}}if(ku(e)||Zy(e)||Kp(e)||$u(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},r4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(r4||(r4={}));var i4=new PS,s4;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(s4||(s4={}));var AS=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(du);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return so(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),$e(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Kt.add(ES.EditorFactory,new AS);var n4;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(n4||(n4={}));var Za=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return TS(e,this)}},o4=new Map,eg=new WeakMap;function TS(e,t){const r=eg.get(e);if(r)return r;const i=RS(e,t);if(i){let s=o4.get(i)??0;s++,o4.set(i,s);const n=s===1?i:`${i}#${s}`;return eg.set(e,n),n}}function RS(e,t){const r=eg.get(e);if(r)return r;const i=t.owner?NS(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=tg(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=LS(t.owner,e);if(a!==void 0)return i+a}}function LS(e,t){for(const r in e)if(e[r]===t)return r}var a4=new Map,c4=new WeakMap;function NS(e){const t=c4.get(e);if(t)return t;const r=FS(e);let i=a4.get(r)??0;i++,a4.set(r,i);const s=i===1?r:`${r}#${i}`;return c4.set(e,s),s}function FS(e){const t=e.constructor;return t?t.name:"Object"}function tg(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var rg=(e,t)=>e===t,l4;function MS(e){l4=e}function Di(){return l4}var OS=class{constructor(){this.a=0,this.d=new WeakMap}b(e){return US([go(_S("|  ",this.a)),e])}c(e){return e.hadValue?e.didChange?[go(" "),li(Ya(e.oldValue,70),{color:"red",strikeThrough:!0}),go(" "),li(Ya(e.newValue,60),{color:"green"})]:[go(" (unchanged)")]:[go(" "),li(Ya(e.newValue,60),{color:"green"}),go(" (initial)")]}handleObservableChanged(e,t){console.log(...this.b([Xa("observable value changed"),li(e.debugName,{color:"BlueViolet"}),...this.c(t)]))}formatChanges(e){if(e.size!==0)return li(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleDerivedRecomputed(e,t){const r=this.d.get(e);console.log(...this.b([Xa("derived recomputed"),li(e.debugName,{color:"BlueViolet"}),...this.c(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.b([Xa("observable from event triggered"),li(e.debugName,{color:"BlueViolet"}),...this.c(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleAutorunTriggered(e){const t=this.d.get(e);console.log(...this.b([Xa("autorun"),li(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.b([Xa("transaction"),li(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function US(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function go(e){return li(e,{color:"black"})}function Xa(e){return li(BS(`${e}: `,10),{color:"black",bold:!0})}function li(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function Ya(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?HS(e,t):jS(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function HS(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${Ya(s,t-r.length)}`}return r+=" ]",r}function jS(e,t){let r="{ ",i=!0;for(const[s,n]of Object.entries(e)){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${s}: ${Ya(n,t-r.length)}`}return r+=" }",r}function _S(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function BS(e,t){for(;e.length<t;)e+=" ";return e}var u4;function zS(e){u4=e}var h4;function WS(e){h4=e}var ig;function VS(e){ig=e}var qS=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return ig({owner:r,debugName:()=>{const s=tg(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}flatten(){return ig({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(u4(this,t)),this}keepObserved(e){return e.add(h4(this)),this}get a(){return this.get()}},sg=class extends qS{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function GS(e,t){const r=new d4(e,t);try{e(r)}finally{r.finish()}}function QS(e,t,r){e?t(e):GS(t,r)}var d4=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Di()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():tg(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this.a=null,Di()?.handleEndTransaction()}};function JS(e,t){let r;return typeof e=="string"?r=new Za(void 0,e,void 0):r=new Za(e,void 0,void 0),new ZS(r,t,rg)}var ZS=class extends sg{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.g=r,this.d=t}get(){return this.d}set(e,t,r){if(r===void 0&&this.g(this.d,e))return;let i;t||(t=i=new d4(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),Di()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function f4(e){return new g4(new Za(void 0,void 0,e),e,void 0,void 0)}var p4;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(p4||(p4={}));var g4=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.i=r,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.h=this.i?.(),Di()?.handleAutorunCreated(this),this.k(),Yn(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),Kn(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){Di()?.handleAutorunTriggered(this);const r=this.h;try{this.h=this.i?.(),this._runFn(this,r)}catch(i){Wl(i)}}}finally{t||Di()?.handleAutorunFinished(this);for(const r of this.g)r.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}Uy(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:i=>i===e},this.h):!0)&&(this.a=2)}catch(r){Wl(r)}}readObservable(e){if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=g4})(f4||(f4={}));function XS(e,t){return new YS(new Za(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??rg)}VS(XS);var m4;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(m4||(m4={}));var YS=class extends sg{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.n=r,this.p=i,this.q=s,this.s=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.m=this.n?.(),Di()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0;for(const e of this.k)e.removeObserver(this);this.k.clear(),this.q?.()}get(){if(this.b.size===0){const e=this._computeFn(this,this.n?.());return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.u()}while(this.g!==3);return this.h}}u(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,r=this.h;this.g=3;let i=!1;try{const s=this.m;this.m=this.n?.();try{this.h=this._computeFn(this,s)}finally{for(const n of this.l)n.removeObserver(this);this.l.clear()}i=t&&!this.s(r,this.h),Di()?.handleDerivedRecomputed(this,{oldValue:r,newValue:this.h,change:void 0,didChange:i,hadValue:t})}catch(s){Wl(s)}if(i)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.j++;const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const r of this.b)r.handlePossibleChange(this);if(t)for(const r of this.b)r.beginUpdate(this)}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const r of t)r.endUpdate(this)}Uy(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let r=!1;try{r=this.p?this.p({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){Wl(s)}const i=this.g===3;if(r&&(this.g===1||i)&&(this.g=2,i))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.b.has(e)&&this.j>0;super.removeObserver(e),t&&e.endUpdate(this)}};function v4(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new mo(new Za(t,void 0,i),r,i,()=>mo.globalTransaction,rg)}var mo=class extends sg{constructor(e,t,r,i,s){super(),this.k=e,this.l=t,this._getValue=r,this.n=i,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,QS(this.n(),u=>{Di()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||Di()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=mo;function t(r,i){let s=!1;mo.globalTransaction===void 0&&(mo.globalTransaction=r,s=!0);try{i()}finally{s&&(mo.globalTransaction=void 0)}}e.batchEventsGlobally=t})(v4||(v4={}));function KS(e){const t=new w4(!1,void 0);return e.addObserver(t),$e(()=>{e.removeObserver(t)})}WS(KS);function e2(e,t){const r=new w4(!0,t);return e.addObserver(r),t?t(e.get()):e.reportChanges(),$e(()=>{e.removeObserver(r)})}zS(e2);var w4=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},t2=!1;t2&&MS(new OS);function ng(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var r2=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],b4;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(b4||(b4={}));var y4;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(y4||(y4={}));var Ye=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return Cs(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},mn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Ye.toKey(e))}delete(e){return this.c.delete(Ye.toKey(e))}has(e){return this.c.has(Ye.toKey(e))}},Zi=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Ye.toKey(e))}get(e){return this.c.get(Ye.toKey(e))}has(e){return this.c.has(Ye.toKey(e))}set(e,t){this.c.set(Ye.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},AN=ee("IBuiltinExtensionsScannerService"),i2=ee("productService"),s2="vscode://schemas/vscode-product",Su=ee("configurationService"),x4;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(x4||(x4={}));function og(e,t){const r=Object.create(null);for(const i in e)E4(r,i,e[i],t);return r}function E4(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function n2(e,t){const r=t.split(".");k4(e,r)}function k4(e,t){const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(k4(i,t),Object.keys(i).length===0&&delete e[r])}}function Cu(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function o2(e){return e.replace(/[\[\]]/g,"")}function a2(e){let t=!1;const r=new Map,i=new Map;if(c2(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=r.get(h);if(!f){const p={schemas:[u]};return r.set(h,p),i.set(u,p),!0}return f.schemas.push(u),i.set(u,f),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const p=i.get(f);if(p&&p.schemas.length>1)return p.id||(p.id=`_${o.length}`,o.push(p.schemas[0])),{$ref:`#/${n}/${p.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function vo(e){return typeof e=="object"&&e!==null}function c2(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)vo(l)&&o.push(l)},i=(...c)=>{for(const l of c)if(vo(l))for(const u in l){const h=l[u];vo(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)vo(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)vo(l)&&o.push(l);else vo(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Iu={JSONContribution:"base.contributions.json"};function l2(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var u2=class{constructor(){this.b=new R,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[l2(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?a2(t):void 0}hasSchemaContent(e){return!!this.a[e]}},h2=new u2;Kt.add(Iu.JSONContribution,h2);var $4;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})($4||($4={}));var wo={Configuration:"base.contributions.configuration"},S4;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(S4||(S4={}));var Du={properties:{},patternProperties:{}},Pu={properties:{},patternProperties:{}},Au={properties:{},patternProperties:{}},Tu={properties:{},patternProperties:{}},Ru={properties:{},patternProperties:{}},Ka={properties:{},patternProperties:{}},vn="vscode://schemas/settings/resourceLanguage",Lu=Kt.as(Iu.JSONContribution),d2=class{constructor(){this.a=[],this.i=new Set,this.j=new R,this.onDidSchemaChange=this.j.event,this.k=new R,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1673,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Lu.registerSchema(vn,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),Lu.registerSchema(vn,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Lu.registerSchema(vn,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),Lu.registerSchema(vn,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),Pi.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...ec(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),Pi.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!qw(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:d(1674,null,o2(e)),$ref:vn,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if($t(a)&&(Ma(s[o])||$t(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if($t(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Ma(n)||$t(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...$t(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=3,n){s=St(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&p2(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),Pi.test(c)?l.scope=void 0:(l.scope=St(l.scope)?s:l.scope,l.restricted=St(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(Du.properties[e]=t,t.scope){case 1:Pu.properties[e]=t;break;case 2:Au.properties[e]=t;break;case 6:Tu.properties[e]=t;break;case 3:Ru.properties[e]=t;break;case 4:Ka.properties[e]=t;break;case 5:Ka.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Du.properties[e],t.scope){case 1:delete Pu.properties[e];break;case 2:delete Au.properties[e];break;case 6:delete Tu.properties[e];break;case 3:delete Ru.properties[e];break;case 4:case 5:delete Ka.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:d(1675,null),errorMessage:d(1676,null),$ref:vn};this.A(t,r),Du.properties[t]=r,Pu.properties[t]=r,Au.properties[t]=r,Tu.properties[t]=r,Ru.properties[t]=r,Ka.properties[t]=r}}z(){const e={type:"object",description:d(1677,null),errorMessage:d(1678,null),$ref:vn};Du.patternProperties[wn]=e,Pu.patternProperties[wn]=e,Au.patternProperties[wn]=e,Tu.patternProperties[wn]=e,Ru.patternProperties[wn]=e,Ka.patternProperties[wn]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),Ma(i)&&(i=t.defaultDefaultValue,s=void 0),Ma(i)&&(i=f2(t.type)),t.default=i,t.defaultValueSource=s}},C4="\\[([^\\]]+)\\]",I4=new RegExp(C4,"g"),wn=`^(${C4})+$`,Pi=new RegExp(wn);function ec(e){const t=[];if(Pi.test(e)){let r=I4.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=I4.exec(e)}}return Zn(t)}function f2(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Nu=new d2;Kt.add(wo.Configuration,Nu);function p2(e,t){return e.trim()?Pi.test(e)?d(1680,null,e):Nu.getConfigurationProperties()[e]!==void 0?d(1681,null,e):t.policy?.name&&Nu.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1682,null,e,t.policy?.name,Nu.getPolicyConfigurations().get(t.policy?.name)):null:d(1679,null)}var g2=ee("requestService");function m2(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function v2(e){return e.res.statusCode===204}async function w2(e){if(!m2(e))throw new Error("Server returned "+e.res.statusCode);if(v2(e))return null;const r=(await YE(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var ag;function b2(e){const t=Kt.as(wo.Configuration),r=ag;ag={id:"http",order:15,title:d(2066,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2067,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:d(2068,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2069,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2070,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2071,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2072,null),d(2073,null),d(2074,null),d(2075,null)],default:"override",description:d(2076,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:d(2077,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:d(2078,null),restricted:!0},"http.electronFetch":{type:"boolean",default:!1,description:d(2079,null),restricted:!0}}},t.updateConfigurations({add:[ag],remove:r?[r]:[]})}b2(1);var tc;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(tc||(tc={}));var ui;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(ui||(ui={}));var TN=class Fx extends Ee{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new Xl),this.onDidChangeStorage=this.b.event,this.c=ui.None,this.f=new Map,this.g=this.B(new W3(Fx.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===ui.Closed)return;let i=!1;St(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===ui.None&&(this.c=ui.Initialized,this.s.hint!==tc.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return St(i)?r:i}getBoolean(t,r){const i=this.get(t);return St(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return St(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return St(i)?r:fy(i)}async set(t,r,i=!1){if(this.c===ui.Closed)return;if(St(r))return this.delete(t,i);const s=$t(r)||Array.isArray(r)?uS(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===ui.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==ui.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=ui.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===ui.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===tc.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===tc.STORAGE_IN_MEMORY}},cg=ee("environmentService"),RN=cg,D4=ee("IUriIdentityService"),P4;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(P4||(P4={}));function y2(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&x.isUri(t.location)&&x.isUri(t.globalStorageHome)&&x.isUri(t.settingsResource)&&x.isUri(t.keybindingsResource)&&x.isUri(t.tasksResource)&&x.isUri(t.snippetsHome)&&x.isUri(t.extensionsResource))}var x2=ee("IUserDataProfilesService");function Fu(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,shortName:s?.shortName,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:nr(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:nr(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:nr(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:nr(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:nr(r,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:nr(r,"extensions.json"),cacheHome:nr(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var A4=class extends Ee{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.D.profiles,...this.s.profiles]}constructor(t,r,i,s){super(),this.t=t,this.u=r,this.y=i,this.z=s,this.f=!0,this.h=this.B(new R),this.onDidChangeProfiles=this.h.event,this.j=this.B(new R),this.onWillCreateProfile=this.j.event,this.m=this.B(new R),this.onWillRemoveProfile=this.m.event,this.n=this.B(new R),this.onDidResetWorkspaces=this.n.event,this.r=new Map,this.s={profiles:[],emptyWindows:new Map},this.profilesHome=nr(this.t.userRoamingDataHome,"profiles"),this.g=nr(this.t.cacheHome,"CachedProfilesData")}init(){this.C=void 0}setEnablement(t){this.f!==t&&(this.C=void 0,this.f=t)}isEnabled(){return this.f}get D(){if(!this.C){const t=this.F(),r=[t];if(this.f)try{for(const s of this.P()){if(!s.name||!Me(s.name)||!s.location){this.z.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(Fu(Ps(s.location),s.name,s.location,this.g,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.z.error(s)}const i=new Map;if(r.length)try{const s=this.R();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=x.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.z.error(s)}this.C={profiles:r,emptyWindows:i}}return this.C}F(){const t=Fu("__default__profile__",d(2458,null),this.t.userRoamingDataHome,this.g);return{...t,extensionsResource:this.U()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${cn(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(ja(qr()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(ja(qr()).toString(16),t,r,i)}async createProfile(t,r,i,s){if(!this.f)throw new Error("Profiles are disabled in the current environment.");return await this.G(t,r,i,s)}async G(t,r,i,s){if(!Me(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.r.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.H(s):void 0;x.isUri(a)&&(i={...i,workspaces:[a]});const c=Fu(t,r,nr(this.profilesHome,t),this.g,i,this.defaultProfile);await this.u.createFolder(c.location);const l=[];return this.j.fire({profile:c,join(u){l.push(u)}}),await ao.settled(l),a&&!x.isUri(a)&&this.M(a,c,!!c.isTransient),this.J([c],[],[]),c}finally{this.r.delete(r)}})(),this.r.set(r,n)),n}async updateProfile(t,r){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=Fu(n.id,r.name??n.name,n.location,this.g,{shortName:r.shortName??n.shortName,icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.y.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.J([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(!this.f)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.m.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.z.error(s)}this.J([],[r],[]);try{await this.u.del(r.cacheHome,{recursive:!0})}catch(s){bS(s)!==1&&this.z.error(s)}}async setProfileForWorkspace(t,r){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.H(t);if(x.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.y.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.M(s,i,!1),this.N(this.profiles)}unsetWorkspace(t,r=!1){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=this.H(t);if(x.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.y.extUri.isEqual(n,i))})}else this.M(i,void 0,r),this.N(this.profiles)}async resetWorkspaces(){this.s.emptyWindows.clear(),this.D.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.J([],[],this.profiles),this.n.fire()}async cleanUp(){if(this.f&&await this.u.exists(this.profilesHome)){const t=await this.u.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.y.extUri.isEqual(i.location,r.resource))).map(r=>this.u.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.f)return;const t=this.s.profiles.filter(r=>!this.I(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.H(t);return x.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.y.extUri.isEqual(s,r))):this.D.emptyWindows.get(r)??this.s.emptyWindows.get(r)}H(t){return W$(t)?t.uri:V$(t)?t.configPath:t.id}I(t){return!!(t.workspaces?.length||[...this.D.emptyWindows.values()].some(r=>this.y.extUri.isEqual(r.location,t.location))||[...this.s.emptyWindows.values()].some(r=>this.y.extUri.isEqual(r.location,t.location)))}J(t,r,i){const s=[...this.profiles,...t],n=this.s.profiles;this.s.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.D.emptyWindows.keys()])a.id===this.D.emptyWindows.get(c)?.id&&this.D.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.s.profiles.push(a);else if(c){for(const[l,u]of this.s.emptyWindows.entries())if(a.id===u.id){this.s.emptyWindows.delete(l),this.D.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.N(o),this.L(t,r,i)}L(t,r,i){this.h.fire({added:t,removed:r,updated:i,all:this.profiles})}M(t,r,i){i=r?.isTransient?!0:i,i?r?this.s.emptyWindows.set(t,r):this.s.emptyWindows.delete(t):(this.s.emptyWindows.delete(t),r?this.D.emptyWindows.set(t,r):this.D.emptyWindows.delete(t))}N(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,shortName:n.shortName,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.D.emptyWindows.entries())s[n.toString()]=o.id;this.S({workspaces:i,emptyWindows:s}),this.Q(r),this.C=void 0}O(t){const r={},i=this.F();if(t.workspaces)for(const[n,o]of Object.entries(t.workspaces)){const a=x.parse(o);r[n]=this.y.extUri.isEqual(a,i.location)?i.id:this.y.extUri.basename(a)}const s={};if(t.emptyWindows)for(const[n,o]of Object.entries(t.emptyWindows)){const a=x.parse(o);s[n]=this.y.extUri.isEqual(a,i.location)?i.id:this.y.extUri.basename(a)}return{workspaces:r,emptyWindows:s}}P(){return[]}Q(t){throw new Error("not implemented")}R(){return{}}S(t){throw new Error("not implemented")}U(){}};A4=__decorate([__param(0,cg),__param(1,wS),__param(2,D4),__param(3,Xe)],A4);var E2="__$__isNewStorageMarker",Mu="__$__targetStorageMarker",k2=ee("storageService"),bo;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(bo||(bo={}));var T4;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(T4||(T4={}));var R4;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(R4||(R4={}));function $2(e){const t=e.get(Mu);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var NN=class Mx extends Ee{static{this.a=60*1e3}constructor(t={flushInterval:Mx.a}){super(),this.m=t,this.b=this.B(new Xl),this.c=this.B(new Xl),this.onDidChangeTarget=this.c.event,this.f=this.B(new R),this.onWillSaveState=this.f.event,this.h=this.B(new no(()=>this.n(),this.m.flushInterval)),this.j=this.B(new ys),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(t,r,i){return Et.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}n(){this.j.value=ib(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){zi([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{lr("code/willInitStorage");try{await this.O()}finally{lr("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,r){const{key:i,external:s}=r;if(i===Mu){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.J(t)[i],external:s})}w(t){this.f.fire({reason:t})}get(t,r,i){return this.P(r)?.get(t,i)}getBoolean(t,r,i){return this.P(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.P(r)?.getNumber(t,i)}getObject(t,r,i){return this.P(r)?.getObject(t,i)}storeAll(t,r){this.y(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(St(r)){this.remove(t,i,n);return}this.y(()=>{this.z(t,i,s),this.P(i)?.set(t,r,n)})}remove(t,r,i=!1){this.y(()=>{this.z(t,r,void 0),this.P(r)?.delete(t,i)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,r){const i=[],s=this.J(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}z(t,r,i,s=!1){const n=this.J(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.P(r)?.set(Mu,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(r)?.set(Mu,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const r=this.P(t);return r?$2(r):Object.create(null)}isNew(t){return this.getBoolean(E2,t)===!0}async flush(t=bo.NONE){this.f.fire({reason:t});const r=this.P(-1),i=this.P(0),s=this.P(1);switch(t){case bo.NONE:await ao.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case bo.SHUTDOWN:await ao.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,r=this.P(0)?.items??new Map,i=this.P(1)?.items??new Map;return S2(t,r,i,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,r){return this.w(bo.NONE),y2(t)?this.R(t,r):this.S(t,r)}M(t,r){return!(t.id===r.id||L4(r)&&L4(t))}N(t,r,i){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.u(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.u(i,{key:n,external:!0})})}};function L4(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function S2(e,t,r,i,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,$)=>{a.set($,w),c.set($,o(w))});const l=new Map,u=new Map;t.forEach((w,$)=>{l.set($,w),u.set($,o(w))});const h=new Map,f=new Map;r.forEach((w,$)=>{h.set($,w),f.set($,o(w))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const p=[];if(a.forEach((w,$)=>{p.push({key:$,value:w})}),console.table(p),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach(($,P)=>{w.push({key:P,value:$})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,$)=>{m.push({key:$,value:w})}),console.table(m),console.groupEnd(),console.log(f)}var FN=new Q("chatSessionResponseVote","",{type:"string",description:d(4796,null)}),MN=new Q("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(4797,null)}),ON=new Q("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(4798,null)}),UN=new Q("chatSessionResponseFiltered",!1,{type:"boolean",description:d(4799,null)}),HN=new Q("chatSessionResponseError",!1,{type:"boolean",description:d(4800,null)}),jN=new Q("chatSessionRequestInProgress",!1,{type:"boolean",description:d(4801,null)}),_N=new Q("chatResponse",!1,{type:"boolean",description:d(4802,null)}),BN=new Q("chatRequest",!1,{type:"boolean",description:d(4803,null)}),zN=new Q("chatItemId","",{type:"string",description:d(4804,null)}),WN=new Q("chatLastItemId",[],{type:"string",description:d(4805,null)}),VN=new Q("chatEditApplied",!1,{type:"boolean",description:d(4806,null)}),qN=new Q("chatInputHasText",!1,{type:"boolean",description:d(4807,null)}),GN=new Q("chatInputHasFocus",!1,{type:"boolean",description:d(4808,null)}),QN=new Q("inChatInput",!1,{type:"boolean",description:d(4809,null)}),JN=new Q("inChat",!1,{type:"boolean",description:d(4810,null)}),C2=new Q("chatIsEnabled",!1,{type:"boolean",description:d(4811,null)}),I2=new Q("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(4812,null)}),ZN=new Q("chatExtensionInvalid",!1,{type:"boolean",description:d(4813,null)}),XN=new Q("chatCursorAtTop",!1),YN=new Q("chatInputHasAgent",!1),KN=new Q("chatLocation",void 0),eF=new Q("quickChatHasFocus",!1,{type:"boolean",description:d(4814,null)}),tF=new Q("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(4815,null)}),rF=new Q("chatParticipantSupportsModelPicker",!0,{type:"boolean",description:d(4816,null)}),iF=new Q("chatEditingEnabled",!1),rc,pr;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(pr||(pr={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(pr||(pr={}));var sF=ee("chatAgentService"),N4=class{static{this.AGENT_LEADER="@"}constructor(t){this.g=t,this.b=new Map,this.d=new R,this.onDidChangeAgents=this.d.event,this.h=new Map,this.j=new Map,this.e=C2.bindTo(this.g),this.f=I2.bindTo(this.g)}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);r.isDefault&&this.f.set(!0);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.g.contextMatchesRules(Vt.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.d.fire(void 0),$e(()=>{this.b.delete(t),r.isDefault&&this.f.set(!1),this.d.fire(void 0)})}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.e.set(!0),i.impl=r,this.d.fire(new Ou(i.data,r)),$e(()=>{i.impl=void 0,this.d.fire(void 0),i.data.isDefault&&this.e.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.d.fire(new Ou(t,r)),$e(()=>{this.b.delete(t.id),this.d.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.h.set(t,r),{dispose:()=>{this.h.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.h.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.d.fire(new Ou(i.data,i.impl))}getDefaultAgent(t){return $E(this.getActivatedAgents(),r=>!!r.isDefault&&r.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return Vr.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t){if(this.i(t))return this.b.get(t)?.data}i(t){const r=this.b.get(t);return!r?.data.when||this.g.contextMatchesRules(Vt.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=Vr.find(this.b.values(),i=>D2(i.data)===t)?.data;if(!(r&&!this.i(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.i(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.i(t.data.id)).map(t=>new Ou(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.j.set(t,r),$e(()=>{this.j.delete(t)})}hasChatParticipantDetectionProviders(){return this.j.size>0}async detectAgentOrCommand(t,r,i,s){const n=Vr.first(this.j.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:f.disambiguation??[]});return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};N4=__decorate([__param(0,$$)],N4);var Ou=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},oF=ee("chatAgentNameService"),F4=class{static{rc=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.g=r,this.h=i,this.i=s,this.e=JS(this,Object.create(null)),this.f=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(rc.b,-1);try{this.e.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(rc.b,-1)}this.j()}j(){this.f||this.k().catch(t=>this.h.warn("Failed to fetch chat participant registry",t)).then(()=>Ii(5*60*1e3)).then(()=>this.j())}async k(){const t=await this.g.request({type:"GET",url:this.d},ct.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await w2(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.e.set(i,void 0),this.i.store(rc.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.l(t.name,t).get(),i=!t.fullName||this.l(t.fullName.replace(/\s/g,""),t).get();return r&&i}l(t,r){return this.e.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>Cs(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.f=!0}};F4=rc=__decorate([__param(0,i2),__param(1,g2),__param(2,Xe),__param(3,k2)],F4);function D2(e){return`${e.extensionId.value}.${e.id}`}var bn="**",lg="/",Uu="[/\\\\]",Hu="[^/\\\\]",P2=/\//g;function M4(e,t){switch(e){case 0:return"";case 1:return`${Hu}*?`;default:return`(?:${Uu}|${Hu}+${Uu}${t?`|${Uu}${Hu}+`:""})*?`}}function ug(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function O4(e){if(!e)return"";let t="";const r=ug(e,lg);if(r.every(i=>i===bn))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===bn){if(i)return;t+=M4(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===lg?h="":h=cn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${ug(a,",").map(p=>O4(p)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Hu;continue;case"*":t+=M4(1);continue;default:t+=cn(u)}}n<r.length-1&&(r[n+1]!==bn||n+2<r.length)&&(t+=Uu)}i=s===bn})}return t}var A2=/^\*\*\/\*\.[\w\.-]+$/,T2=/^\*\*\/([\w\.-]+)\/?$/,R2=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,L2=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,N2=/^\*\*((\/[\w\.-]+)+)\/?$/,F2=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,U4=new Jf(1e4),H4=function(){return!1},Ai=function(){return null};function hg(e,t){if(!e)return Ai;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=U4.get(i);if(s)return j4(s,e);let n;return A2.test(r)?s=M2(r.substr(4),r):(n=T2.exec(dg(r,t)))?s=O2(n[1],r):(t.trimForExclusions?L2:R2).test(r)?s=U2(r,t):(n=N2.exec(dg(r,t)))?s=_4(n[1].substr(1),r,!0):(n=F2.exec(dg(r,t)))?s=_4(n[1],r,!1):s=H2(r),U4.set(i,s),j4(s,e)}function j4(e,t){if(typeof t=="string")return e;const r=function(i,s){return uu(i,t.base,!xs)?e(Yk(i.substr(t.base.length),si),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function dg(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function M2(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function O2(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function U2(e,t){const r=B4(e.slice(1,-1).split(",").map(a=>hg(a,t)).filter(a=>a!==Ai),e),i=r.length;if(!i)return Ai;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function _4(e,t,r){const i=si===je.sep,s=i?e:e.replace(P2,si),n=si+s,o=je.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function H2(e){try{const t=new RegExp(`^${O4(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return Ai}}function ic(e,t,r){return!e||typeof t!="string"?!1:yo(e)(t,void 0,r)}function yo(e,t={}){if(!e)return H4;if(typeof e=="string"||j2(e)){const r=hg(e,t);if(r===Ai)return H4;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return _2(e,t)}function j2(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function _2(e,t){const r=B4(Object.getOwnPropertyNames(e).map(a=>B2(a,e[a],t)).filter(a=>a!==Ai)),i=r.length;if(!i)return Ai;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let f;for(let p=0,m=r.length;p<m;p++){const w=r[p](u,h);if(typeof w=="string")return w;As(w)&&(f||(f=[]),f.push(w))}return f?(async()=>{for(const p of f){const m=await p;if(typeof m=="string")return m}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let f=0,p=r.length;f<p;f++){const m=r[f];m.requiresSiblings&&l&&(c||(c=Pr(a)),u||(u=c.substr(0,c.length-up(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;As(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const f of h){const p=await f;if(typeof p=="string")return p}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function B2(e,t,r){if(t===!1)return Ai;const i=hg(e,r);if(i===Ai)return Ai;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return As(h)?h.then(f=>f?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function B4(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}var z2=ee("notebookDocumentService"),fg=["W","X","Y","Z","a","b","c","d","e","f"],W2=new RegExp(`^[${fg.join("")}]+`),z4=7;function W4(e){if(e.scheme!==te.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(W2,""),z4),i=_0(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function V2(e,t){const r=t.toString(z4),s=`${r.length<fg.length?fg[r.length-1]:"z"}${r}s${ep(Ne.fromString(e.scheme),!0,!0)}`;return e.with({scheme:te.vscodeNotebookCell,fragment:s})}function q2(e){if(e.scheme!==te.vscodeNotebookMetadata)return;const t=_0(e.fragment).toString();return e.with({scheme:t,fragment:null})}function G2(e){const t=`${ep(Ne.fromString(e.scheme),!0,!0)}`;return e.with({scheme:te.vscodeNotebookMetadata,fragment:t})}var Q2=class{constructor(){this.a=new Xt}getNotebook(e){if(e.scheme===te.vscodeNotebookCell){const t=W4(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};it(z2,Q2,1);var xo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(xo||(xo={}));var cF=["application/json","application/javascript","text/html","image/svg+xml",Ji.latex,Ji.markdown,"image/png","image/jpeg",Ji.text],lF=[Ji.latex,Ji.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Ji.text],V4;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(V4||(V4={}));var sc;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(sc||(sc={}));var q4;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(q4||(q4={}));var G4;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(G4||(G4={}));var Q4;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(Q4||(Q4={}));var hi;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(hi||(hi={}));var J4;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(J4||(J4={}));var Z4;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(Z4||(Z4={}));var X4;(function(e){e.scheme=te.vscodeNotebookMetadata;function t(i){return G2(i)}e.generate=t;function r(i){return q2(i)}e.parse=r})(X4||(X4={}));var Y4;(function(e){e.scheme=te.vscodeNotebookCell;function t(a,c){return V2(a,c)}e.generate=t;function r(a){return W4(a)}e.parse=r;function i(a,c){return a.with({scheme:te.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==te.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==te.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||te.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(Y4||(Y4={}));var uF=new Q("notebookEditorCursorAtBoundary","none"),hF=new Q("notebookEditorCursorAtLineBoundary","none"),K4;(function(e){e.default="default",e.option="option"})(K4||(K4={}));var e5;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(e5||(e5={}));var t5;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(t5||(t5={}));var dF=class Af{static{this.d="notebook/"}static create(t,r){return`${Af.d}${t}/${r??t}`}static parse(t){if(t.startsWith(Af.d)){const r=t.substring(Af.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function r5(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var J2=new TextDecoder;function Z2(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=Y2(t);const s=Ne.concat(t.map(o=>Ne.wrap(o))),n=iC(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var ju="\x1B[A",pg=ju.split("").map(e=>e.charCodeAt(0)),X2=10;function Y2(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<ju.length)return;const s=e[i-1],n=r.subarray(0,ju.length);if(n[0]===pg[0]&&n[1]===pg[1]&&n[2]===pg[2]){const o=s.lastIndexOf(X2);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(ju.length)}}),t}function K2(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function eC(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var tC=8,rC=13;function iC(e){return!e.buffer.includes(tC)&&!e.buffer.includes(rC)?e:Ne.fromString(eC(K2(J2.decode(e.buffer))))}var i5;(function(e){e.Delimiter="\0"})(i5||(i5={}));var s5;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(s5||(s5={}));var Oe=class Xr{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new Xr([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new Xr(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new Xr(t.split("\0"))}static join(t,r){return new Xr([...t.path,r])}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:Xr.isChild(t,r)?2:Xr.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new Xr(this.path,1)}get parentId(){return this.d>1?new Xr(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new Xr(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new Xr(this.path,t)}compare(t){if(typeof t=="string")return Xr.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},n5;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(n5||(n5={}));var o5;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(o5||(o5={}));var a5;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(a5||(a5={}));var c5;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(c5||(c5={}));var sC=e=>"runId"in e,Eo;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:tt.lift(r.range),uri:t.asCanonicalUri(x.revive(r.uri))})})(Eo||(Eo={}));var l5;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(l5||(l5={}));var _u;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(x.revive(r.uri)):void 0,position:r.position?Hr.lift(r.position):void 0})})(_u||(_u={}));var Bu;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Eo.serialize(t.location),stackTrace:t.stackTrace?.map(_u.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&Eo.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>_u.deserialize(t,i))})})(Bu||(Bu={}));var zu;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Eo.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&Eo.deserialize(t,r.location)})})(zu||(zu={}));var Wu;(function(e){e.serialize=t=>t.type===0?Bu.serialize(t):zu.serialize(t),e.deserialize=(t,r)=>r.type===0?Bu.deserialize(t,r):zu.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Wu||(Wu={}));var nc;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Wu.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>Wu.deserialize(t,i))})})(nc||(nc={}));var u5="\0",Vu=(e,t)=>e+u5+t,h5=e=>{const t=e.indexOf(u5);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},qu;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(x.revive(r.uri)):void 0,range:r.range?tt.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(qu||(qu={}));var d5;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(d5||(d5={}));var Ls;(function(e){e.serialize=t=>({expand:t.expand,item:qu.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:Oe.root(r.item.extId),expand:r.expand,item:qu.deserialize(t,r.item)})})(Ls||(Ls={}));var oc;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?tt.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(oc||(oc={}));var gg=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},f5;(function(e){e.serializeWithoutMessages=t=>({...Ls.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(nc.serializeWithoutMessages)}),e.serialize=t=>({...Ls.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(nc.serialize)}),e.deserialize=(t,r)=>({...Ls.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>nc.deserialize(t,i)),retired:!0})})(f5||(f5={}));var mg;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})(mg||(mg={}));var p5;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(x.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:mg.empty()})})(p5||(p5={}));function vg(e){return{...e,location:e.location?.toJSON()}}function wg(e){return e.location=e.location?Hr.isIPosition(e.location)?Hr.lift(e.location):tt.lift(e.location):void 0,e}var g5;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(g5||(g5={}));var m5;(function(e){e.serialize=t=>t.type===0?Qu.serialize(t):Ju.serialize(t),e.deserialize=t=>t.type===0?Qu.deserialize(t):Ju.deserialize(t)})(m5||(m5={}));var Gu;(function(e){e.serialize=vg,e.deserialize=wg})(Gu||(Gu={}));var Qu;(function(e){e.serialize=vg,e.deserialize=wg})(Qu||(Qu={}));var Ju;(function(e){e.serialize=t=>({...vg(t),branches:t.branches?.map(Gu.serialize)}),e.deserialize=t=>({...wg(t),branches:t.branches?.map(Gu.deserialize)})})(Ju||(Ju={}));var v5;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(v5||(v5={}));var Zu;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:Ls.deserialize(t,r.item)}:r.op===1?{op:r.op,item:oc.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(x.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:Ls.serialize(t.item)}:t.op===1?{op:t.op,item:oc.serialize(t.item)}:t})(Zu||(Zu={}));var nC=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p(Ls.deserialize(this.l,r.item),t);break;case 1:this.q(oc.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=Oe.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),gg(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=Oe.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},oC=ee("editorGroupsService"),w5;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(w5||(w5={}));var b5;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(b5||(b5={}));var y5;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(y5||(y5={}));var x5;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(x5||(x5={}));var E5;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(E5||(E5={}));var k5;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(k5||(k5={}));var $5;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})($5||($5={}));var fF=ee("editorService"),aC=-1,cC=-2,S5;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(S5||(S5={}));var ac=(e,t)=>e===t,lC={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:ac,label:ac,description:ac,error:ac,sortText:ac,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},uC=Object.entries(lC),hC=(e,t)=>{let r;for(const[i,s]of uC)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},dC=class extends Ee{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new no(()=>this.flushDiff(),200)),this.g=this.B(new R),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){gg(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){gg(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Oe.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:mS(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=Oe.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=hC(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Oe.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>Vu(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Vu(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Vu(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(Oe.joinToString(e.fullId,s.id),t);As(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new Ci;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new Ci,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return As(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(Oe.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},fC=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Xu=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},pC=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},gC=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new Xu(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new pC(c.id,l,e.controllerId);if(n.has(c.id))throw new fC(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new Xu(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},C5=new WeakMap,mC=(e,t)=>{const r={controllerId:t};return C5.set(e,r),r},Yu=e=>{const t=C5.get(e);if(!t)throw new Xu(e?.id||"<unknown>");return t},pF=ee("remoteAuthorityResolverService"),I5;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(I5||(I5={}));var vC=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},wC=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Xi;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Xi||(Xi={}));function D5(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var bg,yn,Yi,yg,xn,Ns,En,xg,Eg,Ku,cc,kg,Ti,Ri,$g,gr,Sg;function de(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var Cg;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(Cg||(Cg={}));var P5;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(P5||(P5={}));var Ue=bg=class{static from(...t){let r=t;return new bg(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ue=bg=__decorate([de],Ue);var Re=yn=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof yn)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof yn)return t;if(this.isPosition(t))return new yn(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw Ae("line must be non-negative");if(r<0)throw Ae("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw Ae();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new yn(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw Ae();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new yn(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Re=yn=__decorate([de],Re);var De=Yi=class{static isRange(t){return t instanceof Yi?!0:t?Re.isPosition(t.start)&&Re.isPosition(t.end):!1}static of(t){if(t instanceof Yi)return t;if(this.isRange(t))return new Yi(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Re(t,r),o=new Re(i,s)):Re.isPosition(t)&&Re.isPosition(r)&&(n=Re.of(t),o=Re.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Yi.isRange(t)?this.contains(t.start)&&this.contains(t.end):Re.isPosition(t)?!(Re.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=Re.Max(t.start,this.c),i=Re.Min(t.end,this.e);if(!r.isAfter(i))return new Yi(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=Re.Min(t.start,this.c),i=Re.Max(t.end,this.end);return new Yi(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw Ae();let i;return t?Re.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new Yi(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return A5(this)}};De=Yi=__decorate([de],De);var Ki=yg=class extends De{static isSelection(t){return t instanceof yg?!0:t?De.isRange(t)&&Re.isPosition(t.anchor)&&Re.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Re(t,r),o=new Re(i,s)):Re.isPosition(t)&&Re.isPosition(r)&&(n=Re.of(t),o=Re.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return bC(this)}};Ki=yg=__decorate([de],Ki);function A5(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function bC(e){let t=A5(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var T5=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ae("connectionToken")},yC=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw Ae("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ae("port");typeof r<"u"&&T5(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},eh=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&T5(t)}},ko=class Tf extends Error{static NotAvailable(t,r){return new Tf(t,Xi.NotAvailable,r)}static TemporarilyNotAvailable(t){return new Tf(t,Xi.TemporarilyNotAvailable)}constructor(t,r=Xi.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,Tf.prototype)}},di;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(di||(di={}));var $o;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})($o||($o={}));var Fs=xn=class{static isTextEdit(t){return t instanceof xn?!0:t?De.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new xn(t,r)}static insert(t,r){return xn.replace(new De(t,t),r)}static delete(t){return xn.replace(t,"")}static setEndOfLine(t){const r=new xn(new De(new Re(0,0),new Re(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!De.isRange(t))throw Ae("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Ae("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Ae("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Fs=xn=__decorate([de],Fs);var th=Ns=class{static isNotebookCellEdit(t){return t instanceof Ns?!0:t?ts.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new Ns(t,r)}static insertCells(t,r){return new Ns(new ts(t,t),r)}static deleteCells(t){return new Ns(t,[])}static updateCellMetadata(t,r){const i=new Ns(new ts(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new Ns(new ts(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};th=Ns=__decorate([de],th);var Ig=class Rf{static isSnippetTextEdit(t){return t instanceof Rf?!0:t?De.isRange(t.range)&&$n.isSnippetString(t.snippet):!1}static replace(t,r){return new Rf(t,r)}static insert(t,r){return Rf.replace(new De(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},R5;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(R5||(R5={}));var kn=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r},notebookMetadata:r})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new Fs(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new De(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,th.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):Ig.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}PE(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new Xt;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};kn=__decorate([de],kn);var $n=En=class{static isSnippetString(t){return t instanceof En?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=En.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new En;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=En.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new En;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};$n=En=__decorate([de],$n);var Sn;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Sn||(Sn={}));var er;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(er||(er={}));var jr=xg=class{static isLocation(t){return t instanceof xg?!0:t?De.isRange(t.range)&&x.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(De.isRange(r))this.range=De.of(r);else if(Re.isPosition(r))this.range=new De(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};jr=xg=__decorate([de],jr);var lc=class{static is(t){return t?typeof t.message=="string"&&t.location&&De.isRange(t.location.range)&&x.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};lc=__decorate([de],lc);var rh=class{constructor(t,r,i=er.Error){if(!De.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:er[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Bi(t.tags,r.tags)&&Bi(t.relatedInformation,r.relatedInformation,lc.isEqual)}};rh=__decorate([de],rh);var ih=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};ih=__decorate([de],ih);var sh=class extends ih{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};sh=__decorate([de],sh);var Dg;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(Dg||(Dg={}));var uc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(uc||(uc={}));var nh=class{constructor(t,r=uc.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:uc[this.kind]}}};nh=__decorate([de],nh);var oh=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};oh=__decorate([de],oh);var st;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(st||(st={}));var hc;(function(e){e[e.Deprecated=1]="Deprecated"})(hc||(hc={}));var So=Eg=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof jr?this.location=s:i instanceof De&&(this.location=new jr(s,i)),Eg.validate(this)}toJSON(){return{name:this.name,kind:st[this.kind],location:this.location,containerName:this.containerName}}};So=Eg=__decorate([de],So);var dc=Ku=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Ku.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],Ku.validate(this)}};dc=Ku=__decorate([de],dc);var fc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(fc||(fc={}));var ah=class{constructor(t,r){this.title=t,this.kind=r}};ah=__decorate([de],ah);var gt=class{static{cc=this}static{this.c="."}constructor(t){this.value=t}append(t){return new cc(this.value?this.value+cc.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+cc.c)}};gt=cc=__decorate([de],gt),gt.Empty=new gt(""),gt.QuickFix=gt.Empty.append("quickfix"),gt.Refactor=gt.Empty.append("refactor"),gt.RefactorExtract=gt.Refactor.append("extract"),gt.RefactorInline=gt.Refactor.append("inline"),gt.RefactorMove=gt.Refactor.append("move"),gt.RefactorRewrite=gt.Refactor.append("rewrite"),gt.Source=gt.Empty.append("source"),gt.SourceOrganizeImports=gt.Source.append("organizeImports"),gt.SourceFixAll=gt.Source.append("fixAll"),gt.Notebook=gt.Empty.append("notebook");var pc=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};pc=__decorate([de],pc);var Pg=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},L5=class{constructor(e,t){this.fromRanges=t,this.from=e}},N5=class{constructor(e,t){this.fromRanges=t,this.to=e}},Co;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Co||(Co={}));var ch=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};ch=__decorate([de],ch);var Rr=kg=class{#e;static isMarkdownString(t){return t instanceof kg?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new hy(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};Rr=kg=__decorate([de],Rr);var Ag=class{constructor(t,r){this.label=t,this.documentation=r}};Ag=__decorate([de],Ag);var Tg=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};Tg=__decorate([de],Tg);var Rg=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Rg=__decorate([de],Rg);var Lg;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(Lg||(Lg={}));var Ng;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(Ng||(Ng={}));var lh=class{constructor(t){this.value=t}};lh=__decorate([de],lh);var uh=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};uh=__decorate([de],uh);var Io;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Io||(Io={}));var ge;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(ge||(ge={}));var gc;(function(e){e[e.Deprecated=1]="Deprecated"})(gc||(gc={}));var hh=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&ge[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};hh=__decorate([de],hh);var Do=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};Do=__decorate([de],Do);var Fg=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};Fg=__decorate([de],Fg);var Mg=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};Mg=__decorate([de],Mg);var Cn;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Cn||(Cn={}));var mc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(mc||(mc={}));var Ms;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Ms||(Ms={}));function xC(e,t){return`${Ye.toKey(e)}.${t}`}var fi;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(fi||(fi={}));var Po;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Po||(Po={}));var dh;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(dh||(dh={}));var Ao;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ao||(Ao={}));var vc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(vc||(vc={}));var In;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(In||(In={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}(Ao||(Ao={}));var To;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(To||(To={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(To||(To={}));var fh=class{constructor(t,r){if(r&&!x.isUri(r))throw Ae("target");if(!De.isRange(t)||t.isEmpty)throw Ae("range");this.range=t,this.target=r}};fh=__decorate([de],fh);var Ro=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Ro=__decorate([de],Ro);var ph=class{constructor(t,r){if(r&&!(r instanceof Ro))throw Ae("color");if(!De.isRange(t)||t.isEmpty)throw Ae("range");this.range=t,this.color=r}};ph=__decorate([de],ph);var gh=class{constructor(t){if(!t||typeof t!="string")throw Ae("label");this.label=t}};gh=__decorate([de],gh);var F5;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(F5||(F5={}));var Og;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(Og||(Og={}));var Ug;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(Ug||(Ug={}));var mh;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(mh||(mh={}));var EC=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw Ae("startIndex");if(typeof t!="number"||t<1)throw Ae("length");if(r!==void 0&&typeof r!="string")throw Ae("tooltip")}},kC=class{constructor(e){this.uri=e}},$C=class{constructor(e){this.terminalCommand=e}},Hg;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(Hg||(Hg={}));var SC=class{constructor(e){if(this.options=e,typeof e!="object")throw Ae("options")}},jg;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(jg||(jg={}));var _g;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(_g||(_g={}));var wc=class{static{Ti=this}static{this.Clean=new Ti("clean","Clean")}static{this.Build=new Ti("build","Build")}static{this.Rebuild=new Ti("rebuild","Rebuild")}static{this.Test=new Ti("test","Test")}static from(t){switch(t){case"clean":return Ti.Clean;case"build":return Ti.Build;case"rebuild":return Ti.Rebuild;case"test":return Ti.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw Ae("name");this.c=t}get id(){return this.c}};wc=Ti=__decorate([de],wc);function M5(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var Lo=class{constructor(t,r,i){if(typeof t!="string")throw Ae("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ae("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return M5(t)}};Lo=__decorate([de],Lo);var Dn=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw Ae("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ae("command");this.e=t,this.f=r,this.g=i}else{if(typeof t!="string")throw Ae("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ae("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ae("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return M5(t)}};Dn=__decorate([de],Dn);var Bg;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Bg||(Bg={}));var Os;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Os||(Os={}));var zg=class{constructor(e){this.c=e}computeId(){return"customExecution"+qr()}set callback(e){this.c=e}get callback(){return this.c}},vh=class{static{Ri=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===Os.Global||r===Os.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Lo?this.l={type:Ri.e,id:this.q.computeId()}:this.q instanceof Dn?this.l={type:Ri.f,id:this.q.computeId()}:this.q instanceof zg?this.l={type:Ri.c,id:this.q.computeId()}:this.l={type:Ri.g,id:qr()}}get definition(){return this.l}set definition(t){if(t==null)throw Ae("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ae("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(Ri.g===r||Ri.e===r||Ri.f===r||Ri.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Ae("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};vh=Ri=__decorate([de],vh);var Pn;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(Pn||(Pn={}));var Wg;(function(e){function t(r){const i=r;return Is(i.value)?i.tooltip&&!Me(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(Wg||(Wg={}));var wh=$g=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=Is(i.checkboxState)?i.checkboxState:$t(i.checkboxState)&&Is(i.checkboxState.state)?i.checkboxState.state:void 0,n=!Is(i.checkboxState)&&$t(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==Li.Checked&&s!==Li.Unchecked||n!==void 0&&!Me(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof $g)return!0;if(i.label!==void 0&&!Me(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Me(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Me(i.iconPath)&&!x.isUri(i.iconPath)&&(!i.iconPath||!Me(i.iconPath.id))){const s=i.iconPath;if(!s||!Me(s.light)&&!x.isUri(s.light)&&!Me(s.dark)&&!x.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Me(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!x.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Me(i.tooltip)&&!(i.tooltip instanceof Rr)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<An.None&&i.collapsibleState>An.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Me(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=An.None){this.collapsibleState=r,x.isUri(t)?this.resourceUri=t:this.label=t}};wh=$g=__decorate([de],wh);var An;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(An||(An={}));var Li;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Li||(Li={}));var bh=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};bh=__decorate([de],bh);var yh=class extends bh{},CC=class extends yh{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},IC=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},bc=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};bc=__decorate([de],bc);var Vg=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};Vg=__decorate([de],Vg);var qg;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(qg||(qg={}));var xh=class Lf{static{this.c="."}constructor(t){this.value=t}append(...t){return new Lf((this.value?[this.value,...t]:t).join(Lf.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Lf.c)}};xh.Empty=new xh("");var DC=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},or=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};or=__decorate([de],or),or.File=new or("file"),or.Folder=new or("folder");var yc=class{constructor(t){this.id=t}};yc=__decorate([de],yc);var No;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(No||(No={}));var Fo=class{get base(){return this.c}set base(t){this.c=t,this.e=x.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!x.isUri(t)&&!x.isUri(t.uri)))throw Ae("base");if(typeof r!="string")throw Ae("pattern");typeof t=="string"?this.baseUri=x.file(t):x.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Fo=__decorate([de],Fo);var O5=new WeakMap;function PC(e,t){O5.set(e,t)}var Mo=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=O5.get(this)??qr()),this.c}};Mo=__decorate([de],Mo);var Tn=class extends Mo{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw Ae("location");this.location=t}};Tn=__decorate([de],Tn);var Rn=class extends Mo{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};Rn=__decorate([de],Rn);var Eh=class extends Mo{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw Ae("dataId");this.label=t,this.dataId=r,this.canPersist=i}};Eh=__decorate([de],Eh);var kh=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};kh=__decorate([de],kh);var xc=class{constructor(t,r){this.port=t,this.host=r}};xc=__decorate([de],xc);var $h=class{constructor(t){this.path=t}};$h=__decorate([de],$h);var Ec=class{constructor(t){this.implementation=t}};Ec=__decorate([de],Ec);var U5=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},H5=class{constructor(e,t){this.session=e,this.threadId=t}},Sh=class{constructor(t,r){this.range=t,this.expression=r}};Sh=__decorate([de],Sh);var kc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(kc||(kc={}));var Ch=class{constructor(t,r){this.range=t,this.text=r}};Ch=__decorate([de],Ch);var Ih=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};Ih=__decorate([de],Ih);var Dh=class{constructor(t,r){this.range=t,this.expression=r}};Dh=__decorate([de],Dh);var Gg=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};Gg=__decorate([de],Gg);var Qg;(function(e){e[e.AIGenerated=1]="AIGenerated"})(Qg||(Qg={}));var $c;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})($c||($c={}));var AC=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Oo;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Oo||(Oo={}));var Mt=gr=class extends Error{static FileExists(t){return new gr(t,Ce.FileExists,gr.FileExists)}static FileNotFound(t){return new gr(t,Ce.FileNotFound,gr.FileNotFound)}static FileNotADirectory(t){return new gr(t,Ce.FileNotADirectory,gr.FileNotADirectory)}static FileIsADirectory(t){return new gr(t,Ce.FileIsADirectory,gr.FileIsADirectory)}static NoPermissions(t){return new gr(t,Ce.NoPermissions,gr.NoPermissions)}static Unavailable(t){return new gr(t,Ce.Unavailable,gr.Unavailable)}constructor(t,r=Ce.Unknown,i){super(x.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",By(this,r),Object.setPrototypeOf(this,gr.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};Mt=gr=__decorate([de],Mt);var Jg=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};Jg=__decorate([de],Jg);var es;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(es||(es={}));var Sc;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Sc||(Sc={}));var Zg;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Zg||(Zg={}));var Xg;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(Xg||(Xg={}));var Cc;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Cc||(Cc={}));var Ic;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ic||(Ic={}));var Dc;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(Dc||(Dc={}));var Yg=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function TC(e){return typeof e>"u"||p3(e)}var RC=class Ox{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(De.isRange(t)&&typeof r=="string"&&TC(i))return this.o(t,r,i);throw Ae()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],p=this.g[5*h+1];f===0?(f=l,p+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=p,l=f,u=p}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],p=t[c+4],m=l-n,w=m===0?u-o:u,$=5*a;s[$+0]=m,s[$+1]=w,s[$+2]=h,s[$+3]=f,s[$+4]=p,n=l,o=u}return s}build(t){return this.f?new Uo(new Uint32Array(this.g),t):new Uo(Ox.r(this.g),t)}},Uo=class{constructor(e,t){this.resultId=t,this.data=e}},j5=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},Ph=class{constructor(e,t){this.resultId=t,this.edits=e}},Ah;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Ah||(Ah={}));var LC=class{constructor(e){this.name=e}},Kg;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(Kg||(Kg={}));var Pc=class{static{this.Back={iconPath:new or("arrow-left")}}constructor(){}};Pc=__decorate([de],Pc);var Ac;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(Ac||(Ac={}));var Ho;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ho||(Ho={}));var Ln;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Ln||(Ln={}));var em=class{static validate(e){if(typeof e.badge=="string"){let t=Ow(e.badge,0);if(t<e.badge.length&&(t+=Ow(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!or.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},Th=class{constructor(t){this.kind=t}};Th=__decorate([de],Th);var Us;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Us||(Us={}));var ts=class m0{static isNotebookRange(t){return t instanceof m0?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw Ae("start must be positive");if(r<0)throw Ae("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new m0(r,i)}},Rh=class v0{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>v0.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,v0.validate(this)}},_5=class{constructor(e){this.cells=e}},B5=class ms{static isNotebookCellOutputItem(t){return t instanceof ms?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return ms.json(r,"application/vnd.code.notebook.error")}static stdout(t){return ms.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return ms.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new ms(t,r)}static#e=new TextEncoder;static text(t,r=Ji.text){const i=ms.#e.encode(String(t));return new ms(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return ms.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=py(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Lh=class w0{static isNotebookCellOutput(t){return t instanceof w0?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=py(o.mime);if(!i.has(a)||r5(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=w0.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=qr(),this.metadata=r??i)}},Nn;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Nn||(Nn={}));var jo;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(jo||(jo={}));var Nh;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Nh||(Nh={}));var Fh;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Fh||(Fh={}));var NC=class{constructor(e,t){this.text=e,this.alignment=t}},tm;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(tm||(tm={}));var Mh;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Mh||(Mh={}));var z5=class{constructor(e,t=[]){this.uri=e,this.provides=ri(t)}},FC=class{constructor(e){this.label=e}},Tc;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(Tc||(Tc={}));var rm=class{constructor(t,r){this.label=t,this.timestamp=r}};rm=__decorate([de],rm);var _o;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(_o||(_o={}));var Oh;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Oh||(Oh={}));var Hs;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Hs||(Hs={}));var MC=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},OC=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},im;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(im||(im={}));var Bo;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(Bo||(Bo={}));var Uh=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};Uh=__decorate([de],Uh);var Hh=Sg=class{static diff(t,r,i){const s=new Sg(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};Hh=Sg=__decorate([de],Hh);var Rc=class{constructor(t){this.id=t}};Rc=__decorate([de],Rc);var UC=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},jh=class{constructor(e,t){this.covered=e,this.total=t,_h(this)}};function _h(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Lc=class Ux{static fromDetails(t,r){const i=new jh(0,0),s=new jh(0,0),n=new jh(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new Ux(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.fromTests=n}},W5=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},V5=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},q5=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},sm;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(sm||(sm={}));var nm;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(nm||(nm={}));var om;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(om||(om={}));var am=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},cm=class{constructor(e){this.uri=e}},Bh=class{constructor(e,t){this.original=e,this.modified=t}},G5=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},lm=class{constructor(e,t){this.uri=e,this.viewType=t}},Q5=class{constructor(e){this.viewType=e}},um=class{constructor(e,t){this.uri=e,this.notebookType=t}},hm=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},J5=class{constructor(){}},Z5=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},X5=class{constructor(){}},Y5=class{constructor(e){this.textDiffs=e}},dm;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(dm||(dm={}));var fm;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(fm||(fm={}));var pm;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(pm||(pm={}));var HC=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},gm;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(gm||(gm={}));var Nc;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(Nc||(Nc={}));var zh=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Rr(e):e}},Fc=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Rr(e):e,this.vulnerabilities=t}},Mc=class{constructor(e,t){this.participant=e,this.command=t}},Wh=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},Vh=class{constructor(e,t){this.value=e,this.baseUri=t}},qh=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Oc=class{constructor(e){this.value=e}},Gh=class{constructor(e,t){this.value=e,this.task=t}},Uc=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Rr(e):e}},Qh=class{constructor(e){this.value=e}},rs=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},Jh=class{constructor(e){this.value=e}},Zh=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},Xh=class{constructor(e,t){this.uri=e,this.range=t}},Hc=class{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}},K5=class{constructor(e,t,r,i){this.prompt=e,this.command=t,this.references=r,this.participant=i}},e6=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},pi;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(pi||(pi={}));var mm;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(mm||(mm={}));var t6=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},r6=class{constructor(e){this.cell=e}},Gr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Gr||(Gr={}));var Yh=class{constructor(e,t,r){this.toolCallId=e,this.content=t,this.isError=r??!1}},i6=class b0{static User(t,r){const i=new b0(Gr.User,typeof t=="string"?t:"",r);return i.content2=[t],i}static Assistant(t,r){return new b0(Gr.Assistant,t,r)}constructor(t,r,i){this.role=t,this.content=r,this.content2=[r],this.name=i}},jc=class{constructor(e,t,r){this.name=e,this.toolCallId=t,this.parameters=r}},_c=class{constructor(e){this.value=e}},is=class Qn extends Error{static NotFound(t){return new Qn(t,Qn.NotFound.name)}static NoPermissions(t){return new Qn(t,Qn.NoPermissions.name)}static Blocked(t){return new Qn(t,Qn.Blocked.name)}constructor(t,r,i){super(t,{cause:i}),this.name="LanguageModelError",this.code=r??""}},vm;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(vm||(vm={}));var wm;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(wm||(wm={}));var bm;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(bm||(bm={}));var ym;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(ym||(ym={}));var jC=class{constructor(e,t){this.text=e,this.range=t}},Bc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Bc||(Bc={}));var gi;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new Re(s-1,n-1),l=new Re(o-1,a-1);return new Ki(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(gi||(gi={}));var B;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new De(s-1,n-1,o-1,a-1)}e.to=r})(B||(B={}));var js;(function(e){function t(i){return{uri:i.uri,range:B.from(i.range)}}e.from=t;function r(i){return new jr(x.revive(i.uri),B.to(i.range))}e.to=r})(js||(js={}));var xm;(function(e){function t(r){switch(r){case 1:return Hs.Comment;case 0:return Hs.Other;case 3:return Hs.RegEx;case 2:return Hs.String}}e.to=t})(xm||(xm={}));var qe;(function(e){function t(i){return new Re(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(qe||(qe={}));var zo;(function(e){function t(s,n,o){return Ft(ri(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:Lr.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(zo||(zo={}));var Kh;(function(e){function t(i){switch(i){case Sn.Unnecessary:return 1;case Sn.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return Sn.Unnecessary;case 2:return Sn.Deprecated;default:return}}e.to=r})(Kh||(Kh={}));var Wo;(function(e){function t(i){let s;return i.code&&(Me(i.code)||Is(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...B.from(i.range),message:i.message,source:i.source,code:s,severity:td.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(ed.from),tags:Array.isArray(i.tags)?Ft(i.tags.map(Kh.from)):void 0}}e.from=t;function r(i){const s=new rh(B.to(i),i.message,td.to(i.severity));return s.source=i.source,s.code=Me(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(ed.to),s.tags=i.tags&&Ft(i.tags.map(Kh.to)),s}e.to=r})(Wo||(Wo={}));var ed;(function(e){function t(i){return{...B.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new lc(new jr(i.resource,B.to(i)),i.message)}e.to=r})(ed||(ed={}));var td;(function(e){function t(i){switch(i){case er.Error:return fr.Error;case er.Warning:return fr.Warning;case er.Information:return fr.Info;case er.Hint:return fr.Hint}return fr.Error}e.from=t;function r(i){switch(i){case fr.Info:return er.Information;case fr.Warning:return er.Warning;case fr.Error:return er.Error;case fr.Hint:return er.Hint;default:return er.Error}}e.to=r})(td||(td={}));var Ot;(function(e){function t(i){return typeof i=="number"&&i>=mc.One?i-1:i===mc.Beside?cC:aC}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})(Ot||(Ot={}));function _C(e){return typeof e.range<"u"}function s6(e){return e.length===0?!0:!!_C(e[0])}var Le;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else Rr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=x.parse(h,!0);f=f.with({query:s(f.query,l)}),l[h]=f}catch{}return""};return dy.walkTokens(dy.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(lS(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=fy(a)}catch{}if(!l)return a;let u=!1;return l=mu(l,h=>{if(x.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new Rr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?x.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(Le||(Le={}));function BC(e){return s6(e)?e.map(t=>({range:B.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?Le.fromMany(t.hoverMessage):t.hoverMessage?Le.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:B.from(t)}))}function rd(e){return typeof e>"u"?e:typeof e=="string"?x.file(e):e}var Vo;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?rd(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(Vo||(Vo={}));var id;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?rd(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Vo.from(r.before):void 0,after:r.after?Vo.from(r.after):void 0}}e.from=t})(id||(id={}));var Em;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case In.OpenOpen:return 0;case In.ClosedClosed:return 1;case In.OpenClosed:return 2;case In.ClosedOpen:return 3}}e.from=t})(Em||(Em={}));var km;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?Em.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?id.from(r.light):void 0,dark:r.dark?id.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?rd(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Vo.from(r.before):void 0,after:r.after?Vo.from(r.after):void 0}}e.from=t})(km||(km={}));var Ut;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&Jo.from(i.newEol),range:B.from(i.range)}}e.from=t;function r(i){const s=new Fs(B.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:Jo.to(i.eol),s}e.to=r})(Ut||(Ut={}));var ar;(function(e){function t(i,s){const n={edits:[]};if(i instanceof kn){const o=new O0;for(const a of i._allEntries())a._type===1&&x.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:ep(Ne.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Ut.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:B.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookMetadata:a.notebookMetadata,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(Jc.from)}})}return n}e.from=t;function r(i){const s=new kn,n=new Xt;for(const o of i.edits)if(o.textEdit){const a=o,c=x.revive(a.resource),l=B.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=Ig.replace(l,new $n(u)):f=Fs.replace(l,u);const p=n.get(c);p?p.push(f):n.set(c,[f])}else s.renameFile(x.revive(o.oldResource),x.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(ar||(ar={}));var Qr;(function(e){const t=Object.create(null);t[st.File]=0,t[st.Module]=1,t[st.Namespace]=2,t[st.Package]=3,t[st.Class]=4,t[st.Method]=5,t[st.Property]=6,t[st.Field]=7,t[st.Constructor]=8,t[st.Enum]=9,t[st.Interface]=10,t[st.Function]=11,t[st.Variable]=12,t[st.Constant]=13,t[st.String]=14,t[st.Number]=15,t[st.Boolean]=16,t[st.Array]=17,t[st.Object]=18,t[st.Key]=19,t[st.Null]=20,t[st.EnumMember]=21,t[st.Struct]=22,t[st.Event]=23,t[st.Operator]=24,t[st.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return st.Property}e.to=i})(Qr||(Qr={}));var ss;(function(e){function t(i){switch(i){case hc.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return hc.Deprecated}}e.to=r})(ss||(ss={}));var Fn;(function(e){function t(i){return{name:i.name,kind:Qr.from(i.kind),tags:i.tags&&i.tags.map(ss.from),containerName:i.containerName,location:mr.from(i.location)}}e.from=t;function r(i){const s=new So(i.name,Qr.to(i.kind),i.containerName,mr.to(i.location));return s.tags=i.tags&&i.tags.map(ss.to),s}e.to=r})(Fn||(Fn={}));var $m;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:B.from(i.range),selectionRange:B.from(i.selectionRange),kind:Qr.from(i.kind),tags:i.tags?.map(ss.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new dc(i.name,i.detail,Qr.to(i.kind),B.to(i.range),B.to(i.selectionRange));return Sa(i.tags)&&(s.tags=i.tags.map(ss.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})($m||($m={}));var Mn;(function(e){function t(i){const s=new Pg(Qr.to(i.kind),i.name,i.detail||"",x.revive(i.uri),B.to(i.range),B.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:Qr.from(i.kind),uri:i.uri,range:B.from(i.range),selectionRange:B.from(i.selectionRange),tags:i.tags?.map(ss.from)}}e.from=r})(Mn||(Mn={}));var Sm;(function(e){function t(r){return new L5(Mn.to(r.from),r.fromRanges.map(i=>B.to(i)))}e.to=t})(Sm||(Sm={}));var Cm;(function(e){function t(r){return new N5(Mn.to(r.to),r.fromRanges.map(i=>B.to(i)))}e.to=t})(Cm||(Cm={}));var mr;(function(e){function t(i){return{range:i.range&&B.from(i.range),uri:i.uri}}e.from=t;function r(i){return new jr(x.revive(i.uri),B.to(i.range))}e.to=r})(mr||(mr={}));var zc;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?B.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:B.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?B.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:x.revive(i.uri),targetRange:B.to(i.range),targetSelectionRange:i.targetSelectionRange?B.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?B.to(i.originSelectionRange):void 0}}e.to=r})(zc||(zc={}));var Wc;(function(e){function t(i){return{range:B.from(i.range),contents:Le.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(Le.to),n=B.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new sh(s,n,o,a)}e.to=r})(Wc||(Wc={}));var Im;(function(e){function t(i){return{range:B.from(i.range),expression:i.expression}}e.from=t;function r(i){return new Sh(B.to(i.range),i.expression)}e.to=r})(Im||(Im={}));var sd;(function(e){function t(i){if(i instanceof Ch)return{type:"text",range:B.from(i.range),text:i.text};if(i instanceof Ih)return{type:"variable",range:B.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof Dh)return{type:"expression",range:B.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:B.to(i.range),text:i.text};case"variable":return{range:B.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:B.to(i.range),expression:i.expression}}}e.to=r})(sd||(sd={}));var nd;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:B.from(i.stoppedLocation)}}e.from=t;function r(i){return new Gg(i.frameId,B.to(i.stoppedLocation))}e.to=r})(nd||(nd={}));var qo;(function(e){function t(i){return{range:B.from(i.range),kind:i.kind}}e.from=t;function r(i){return new nh(B.to(i.range),i.kind)}e.to=r})(qo||(qo={}));var Dm;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(qo.from)}}e.from=t;function r(i){return new oh(x.revive(i.uri),i.highlights.map(qo.to))}e.to=r})(Dm||(Dm={}));var Pm;(function(e){function t(r){switch(r){case 1:return Io.TriggerCharacter;case 2:return Io.TriggerForIncompleteCompletions;case 0:default:return Io.Invoke}}e.to=t})(Pm||(Pm={}));var Am;(function(e){function t(r){return{triggerKind:Pm.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(Am||(Am={}));var od;(function(e){function t(i){switch(i){case gc.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return gc.Deprecated}}e.to=r})(od||(od={}));var ad;(function(e){const t=new Map([[ge.Method,0],[ge.Function,1],[ge.Constructor,2],[ge.Field,3],[ge.Variable,4],[ge.Class,5],[ge.Interface,7],[ge.Struct,6],[ge.Module,8],[ge.Property,9],[ge.Unit,12],[ge.Value,13],[ge.Constant,14],[ge.Enum,15],[ge.EnumMember,16],[ge.Keyword,17],[ge.Snippet,27],[ge.Text,18],[ge.Color,19],[ge.File,20],[ge.Reference,21],[ge.Folder,23],[ge.Event,10],[ge.Operator,11],[ge.TypeParameter,24],[ge.Issue,26],[ge.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,ge.Method],[1,ge.Function],[2,ge.Constructor],[3,ge.Field],[4,ge.Variable],[5,ge.Class],[7,ge.Interface],[6,ge.Struct],[8,ge.Module],[9,ge.Property],[12,ge.Unit],[13,ge.Value],[14,ge.Constant],[15,ge.Enum],[16,ge.EnumMember],[17,ge.Keyword],[27,ge.Snippet],[18,ge.Text],[19,ge.Color],[20,ge.File],[21,ge.Reference],[23,ge.Folder],[10,ge.Event],[11,ge.Operator],[24,ge.TypeParameter],[25,ge.User],[26,ge.Issue]]);function s(n){return i.get(n)??ge.Property}e.to=s})(ad||(ad={}));var Tm;(function(e){function t(r,i){const s=new hh(r.label);return s.insertText=r.insertText,s.kind=ad.to(r.kind),s.tags=r.tags?.map(od.to),s.detail=r.detail,s.documentation=pn(r.documentation)?Le.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,tt.isIRange(r.range)?s.range=B.to(r.range):typeof r.range=="object"&&(s.range={inserting:B.to(r.range.insert),replacing:B.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new $n(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof De?new Fs(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Ut.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(Tm||(Tm={}));var cd;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:Le.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:pn(i.documentation)?Le.to(i.documentation):i.documentation}}e.to=r})(cd||(cd={}));var ld;(function(e){function t(i){return{label:i.label,documentation:Le.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(cd.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:pn(i.documentation)?Le.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(cd.to):[],activeParameter:i.activeParameter}}e.to=r})(ld||(ld={}));var Vc;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(ld.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(ld.to):[]}}e.to=r})(Vc||(Vc={}));var Rm;(function(e){function t(r,i){const s=new uh(qe.to(i.position),typeof i.label=="string"?i.label:i.label.map(Lm.to.bind(void 0,r)),i.kind&&ud.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(Ut.to),s.tooltip=pn(i.tooltip)?Le.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(Rm||(Rm={}));var Lm;(function(e){function t(r,i){const s=new lh(i.label);return s.tooltip=pn(i.tooltip)?Le.to(i.tooltip):i.tooltip,Xp.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=mr.to(i.location)),s}e.to=t})(Lm||(Lm={}));var ud;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(ud||(ud={}));var On;(function(e){function t(i){return{range:B.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?x.parse(i.url,!0):x.revive(i.url)}catch{}const n=new fh(B.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(On||(On={}));var hd;(function(e){function t(i){const s=new gh(i.label);return i.textEdit&&(s.textEdit=Ut.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Ut.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?Ut.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>Ut.from(s)):void 0}}e.from=r})(hd||(hd={}));var Go;(function(e){function t(i){return new Ro(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(Go||(Go={}));var Nm;(function(e){function t(i){return{range:B.from(i.range)}}e.from=t;function r(i){return new pc(B.to(i.range))}e.to=r})(Nm||(Nm={}));var dd;(function(e){function t(r){switch(r){case 2:return Po.AfterDelay;case 1:return Po.Manual;case 3:case 4:return Po.FocusOut}}e.to=t})(dd||(dd={}));var Qo;(function(e){function t(i){switch(i){case fi.Off:return 0;case fi.Relative:return 2;case fi.Interval:return 3;case fi.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return fi.Off;case 2:return fi.Relative;case 3:return fi.Interval;case 1:default:return fi.On}}e.to=r})(Qo||(Qo={}));var Jo;(function(e){function t(i){if(i===di.CRLF)return 1;if(i===di.LF)return 0}e.from=t;function r(i){if(i===1)return di.CRLF;if(i===0)return di.LF}e.to=r})(Jo||(Jo={}));var Fm;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case Pn.SourceControl:return 3;case Pn.Window:return 10;case Pn.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(Fm||(Fm={}));var fd;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=pd.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=pd.to(i.kind)),s}e.to=r})(fd||(fd={}));var pd;(function(e){function t(i){if(i)switch(i){case es.Comment:return ho.Comment;case es.Imports:return ho.Imports;case es.Region:return ho.Region}}e.from=t;function r(i){if(i)switch(i.value){case ho.Comment.value:return es.Comment;case ho.Imports.value:return es.Imports;case ho.Region.value:return es.Region}}e.to=r})(pd||(pd={}));var qc;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?B.from(r.selection):void 0,override:typeof r.override=="boolean"?kS.id:void 0}}e.from=t})(qc||(qc={}));var Lr;(function(e){function t(n){return n instanceof Fo?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new Fo(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?x.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Fo(x.revive(n.baseUri),n.pattern)}e.to=s})(Lr||(Lr={}));var Mm;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:Lr.from(i.pattern),exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(Mm||(Mm={}));var gd;(function(e){function t(i){return!!i&&typeof i=="object"&&"documents"in i&&Array.isArray(i.documents)&&i.documents.every(s=>Array.isArray(s)&&s.every(Gc.is))}e.is=t;function r(i){return{documents:i.documents.map(s=>s.map(Gc.from)),conversation:i.conversation?.map(s=>s.type==="request"?{type:"request",message:s.message}:{type:"response",message:s.message,references:s.references?.map(Gc.from)})}}e.from=r})(gd||(gd={}));var Gc;(function(e){function t(i){return typeof i=="object"&&i!==null&&"uri"in i&&x.isUri(i.uri)&&"version"in i&&typeof i.version=="number"&&"ranges"in i&&Array.isArray(i.ranges)&&i.ranges.every(s=>s instanceof De)}e.is=t;function r(i){return{uri:x.from(i.uri),version:i.version,ranges:i.ranges.map(s=>B.from(s))}}e.from=r})(Gc||(Gc={}));var Ni;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new ts(i.start,i.end)}e.to=r})(Ni||(Ni={}));var Zo;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(Zo||(Zo={}));var Om;(function(e){function t(r){if(r===sc.Unconfirmed)return jo.Pending;if(r===sc.Pending)return;if(r===sc.Executing)return jo.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(Om||(Om={}));var Qc;(function(e){function t(i){switch(i){case Nn.Markup:return xo.Markup;case Nn.Code:default:return xo.Code}}e.from=t;function r(i){switch(i){case xo.Markup:return Nn.Markup;case xo.Code:default:return Nn.Code}}e.to=r})(Qc||(Qc={}));var _s;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)Rh.validate(n),s.cells.push(Jc.from(n));return s}e.from=t;function r(i){const s=new _5(i.cells.map(Jc.to));return qw(i.metadata)||(s.metadata=i.metadata),s}e.to=r})(_s||(_s={}));var Jc;(function(e){function t(i){return{cellKind:Qc.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:Zo.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(Bs.from):[]}}e.from=t;function r(i){return new Rh(Qc.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(Bs.to):void 0,i.metadata,i.internalMetadata?Zo.to(i.internalMetadata):void 0)}e.to=r})(Jc||(Jc={}));var Xo;(function(e){function t(i){return{mime:i.mime,valueBytes:Ne.wrap(i.data)}}e.from=t;function r(i){return new B5(i.valueBytes.buffer,i.mime)}e.to=r})(Xo||(Xo={}));var Bs;(function(e){function t(i){return{outputId:i.id,items:i.items.map(Xo.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(Xo.to);return new Lh(s,i.outputId,i.metadata)}e.to=r})(Bs||(Bs={}));var md;(function(e){function t(s){return i(s)?{include:Lr.from(s.include)??void 0,exclude:Lr.from(s.exclude)??void 0}:Lr.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:Lr.to(s.include),exclude:Lr.to(s.exclude)}:Lr.to(s)}e.to=r;function i(s){const n=s;return n?!St(n.include)&&!St(n.exclude):!1}})(md||(md={}));var Um;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===Nh.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(Um||(Um={}));var Hm;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(Hm||(Hm={}));var jm;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})(jm||(jm={}));var vd;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new z5(x.revive(i.uri),i.provides)}e.to=r})(vd||(vd={}));var Yo;(function(e){function t(i){return{message:Le.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:B.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&qe.from(s.position),uri:s.uri&&x.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new Hh(typeof i.message=="string"?i.message:Le.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?mr.to(i.location):void 0,s}e.to=r})(Yo||(Yo={}));var mi;(function(e){e.namespace=Vu,e.denamespace=h5})(mi||(mi={}));var zs;(function(e){function t(i){const s=Yu(i).controllerId;return{extId:Oe.fromExtHostTestItem(i,s).toString(),label:i.label,uri:x.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>mi.namespace(s,n.id)),range:tt.lift(B.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&Le.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:Oe.fromString(i.extId).localId,label:i.label,uri:x.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=mi.denamespace(s);return new Rc(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:B.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(zs||(zs={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new Rc(i.id)}e.to=r}(mi||(mi={}));var _m;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...zs.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(Yo.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new fS;for(const a of i.items)s.insert(Oe.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(un)}}e.to=r})(_m||(_m={}));var Zc;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?qe.from(a):B.from(a)}function i(a){if(a)return"endLineNumber"in a?B.to(a):qe.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new W5(a.count,i(a.location),a.branches?.map(l=>new V5(l.count,i(l.location),l.label)))}else return new q5(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return _h(l.statementCoverage),_h(l.branchCoverage),_h(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Lc&&l.fromTests.length?l.fromTests.map(u=>Oe.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Zc||(Zc={}));var Bm;(function(e){function t(r){switch(r){case 1:return fc.Invoke;case 2:return fc.Automatic}}e.to=t})(Bm||(Bm={}));var Un;(function(e){function t(i){const s=new am(Qr.to(i.kind),i.name,i.detail||"",x.revive(i.uri),B.to(i.range),B.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:Qr.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:B.from(i.range),selectionRange:B.from(i.selectionRange),tags:i.tags?.map(ss.from)}}e.from=r})(Un||(Un={}));var wd;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(wd||(wd={}));var bd;(function(e){function t(n,o,a){const c=o.fileData;return c?new CC(new IC(c.name,x.revive(c.uri),c.id,Zf(()=>a(c.id)))):n===Ji.uriList&&o.uriListData?new yh(s(o.uriListData)):new yh(o.asString)}e.to=t;async function r(n,o){const a=await o.asString();if(n===Ji.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=r;function i(n){return Bp.split(n).map(o=>{if(o.startsWith("#"))return o;try{return x.parse(o)}catch{}return o})}function s(n){return Bp.create(n.map(o=>typeof o=="string"?o:x.revive(o)))}})(bd||(bd={}));var Ws;(function(e){function t(i,s){const n=i.items.map(([o,a])=>[o,bd.to(o,a,s)]);return new bc(n)}e.toDataTransfer=t;async function r(i){const s={items:[]},n=[];for(const[o,a]of i)n.push((async()=>{s.items.push([o,await bd.from(o,a)])})());return await Promise.all(n),s}e.from=r})(Ws||(Ws={}));var Xc;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})(Xc||(Xc={}));var yd;(function(e){function t(i){switch(i){case 0:return Gr.System;case 1:return Gr.User;case 2:return Gr.Assistant}}e.to=t;function r(i){switch(i){case Gr.System:return 0;case Gr.User:return 1;case Gr.Assistant:return 2}return 1}e.from=r})(yd||(yd={}));var Ko;(function(e){function t(i){const s=i.content.map(c=>c.type==="text"?c.value:c.type==="tool_result"?new Yh(c.toolCallId,c.value,c.isError):new jc(c.name,c.toolCallId,c.parameters)),n=s.find(c=>typeof c=="string")??"",o=yd.to(i.role),a=new i6(o,n,i.name);return a.content2=s,a}e.to=t;function r(i){const s=yd.from(i.role),n=i.name,o=i.content2.map(a=>{if(a instanceof Yh)return{type:"tool_result",toolCallId:a.toolCallId,value:a.content,isError:a.isError};if(a instanceof jc)return{type:"tool_use",toolCallId:a.toolCallId,name:a.name,parameters:a.parameters};if(typeof a!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:a}});return{role:s,name:n,content:o}}e.from=r})(Ko||(Ko={}));var Yc;(function(e){function t(i){return{kind:"markdownContent",content:Le.from(i.value)}}e.from=t;function r(i){return new zh(Le.to(i.content))}e.to=r})(Yc||(Yc={}));var xd;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new Jh(x.revive(i.uri))}e.to=r})(xd||(xd={}));var Ed;(function(e){function t(i){return{kind:"markdownVuln",content:Le.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new Fc(Le.to(i.content),i.vulnerabilities)}e.to=r})(Ed||(Ed={}));var kd;(function(e){function t(i){return{kind:"agentDetection",agentId:i.participant,command:i.command}}e.from=t;function r(i){return new Mc(i.agentId,i.command)}e.to=r})(kd||(kd={}));var $d;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})($d||($d={}));var Kc;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=x.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Ps(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=hr(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Vh(a,o)}e.to=r})(Kc||(Kc={}));var el;(function(e){function t(i){const s=o=>x.isUri(o),n=o=>o instanceof So;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?Fn.from(i.value):js.from(i.value)}}e.from=t;function r(i){const s=hr(i);return new qh(x.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Fn.to(s.inlineReference):js.to(s.inlineReference),i.name)}e.to=r})(el||(el={}));var Hn;(function(e){function t(i){return{kind:"progressMessage",content:Le.from(i.value)}}e.from=t;function r(i){return new Oc(i.content.value)}e.to=r})(Hn||(Hn={}));var tl;(function(e){function t(i){return{kind:"warning",content:Le.from(i.value)}}e.from=t;function r(i){return new Uc(i.content.value)}e.to=r})(tl||(tl={}));var zm;(function(e){function t(i){return{kind:"move",uri:i.uri,range:B.from(i.range)}}e.from=t;function r(i){return new Xh(x.revive(i.uri),B.to(i.range))}e.to=r})(zm||(zm={}));var Sd;(function(e){function t(r){return{kind:"progressTask",content:Le.from(r.value)}}e.from=t})(Sd||(Sd={}));var Wm;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?Le.from(r):void 0}}e.from=t})(Wm||(Wm={}));var rl;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new Qh(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(rl||(rl={}));var Cd;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>Ut.from(s))}}e.from=t;function r(i){return new Hc(x.revive(i.uri),i.edits.map(s=>Ut.to(s)))}e.to=r})(Cd||(Cd={}));var ns;(function(e){function t(i){const s=qt.isThemeIcon(i.iconPath)?i.iconPath:x.isUri(i.iconPath)?{light:x.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&x.isUri(i.iconPath.light)&&x.isUri(i.iconPath.dark)?{light:x.revive(i.iconPath.light),dark:x.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:x.isUri(i.value.value)||!i.value.value?i.value.value:js.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:x.isUri(i.value)||typeof i.value=="string"?i.value:js.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=hr(i),n=o=>x.isUri(o)?o:js.to(o);return new rs(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(ns||(ns={}));var Id;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})(Id||(Id={}));var Dd;(function(e){function t(s,n,o){return s instanceof zh?Yc.from(s):s instanceof qh?el.from(s):s instanceof rs?ns.from(s):s instanceof Oc?Hn.from(s):s instanceof Vh?Kc.from(s):s instanceof Qh?rl.from(s,n,o):s instanceof Hc?Cd.from(s):s instanceof Fc?Ed.from(s):s instanceof Jh?xd.from(s):s instanceof Mc?kd.from(s):s instanceof Uc?tl.from(s):s instanceof Wh?$d.from(s):s instanceof Zh?Id.from(s):s instanceof Xh?zm.from(s):{kind:"markdownContent",content:Le.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return ns.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return Yc.to(s);case"inlineReference":return el.to(s);case"progressMessage":return;case"treeData":return Kc.to(s);case"command":return rl.to(s,n)}}e.toContent=i})(Dd||(Dd={}));var Pd;(function(e){function t(r,i){const s=r.variables.variables.filter(o=>o.isTool),n=r.variables.variables.filter(o=>!o.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:n.map(Ad.to),toolReferences:s.map(Td.to),location:il.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId})}}e.to=t})(Pd||(Pd={}));var il;(function(e){function t(i){switch(i){case pr.Notebook:return pi.Notebook;case pr.Terminal:return pi.Terminal;case pr.Panel:return pi.Panel;case pr.Editor:return pi.Editor}}e.to=t;function r(i){switch(i){case pi.Notebook:return pr.Notebook;case pi.Terminal:return pr.Terminal;case pi.Panel:return pr.Panel;case pi.Editor:return pr.Editor}}e.from=r})(il||(il={}));var Ad;(function(e){function t(r){const i=r.value;if(!i)throw new Error("Invalid value reference");return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:dw(i)?x.revive(i):i&&typeof i=="object"&&"uri"in i&&"range"in i&&dw(i.uri)?js.to(hr(i)):i,modelDescription:r.modelDescription}}e.to=t})(Ad||(Ad={}));var Td;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{id:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(Td||(Td={}));var Vm;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(Vm||(Vm={}));var ea;(function(e){function t(r){return{errorDetails:r.errorDetails,metadata:r.metadata,nextQuestion:r.nextQuestion}}e.to=t})(ea||(ea={}));var qm;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=ea.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:Xc.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:{action:i.action,result:n}}e.to=t})(qm||(qm={}));var Rd;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(Rd||(Rd={}));var Gm;(function(e){function t(r){return{kind:Qm.to(r.kind)}}e.to=t})(Gm||(Gm={}));var Qm;(function(e){function t(r){switch(r){case 0:return Cn.Word;case 1:return Cn.Line;case 2:return Cn.Suggest;default:return Cn.Unknown}}e.to=t})(Qm||(Qm={}));var Jm;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(Jm||(Jm={}));var Zm;(function(e){function t(r){return{id:r.id,modelDescription:r.modelDescription,parametersSchema:r.parametersSchema,displayName:r.displayName,supportedContentTypes:r.supportedContentTypes}}e.to=t})(Zm||(Zm={}));var Vs=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},Xm=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},Jr;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Jr||(Jr={}));var Ld;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Ld||(Ld={}));var n6=2e4,o6="\u27EA ",a6=" characters skipped \u27EB",zC=(o6.length+a6.length+5)*2,DM=ee("searchService"),c6;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(c6||(c6={}));var l6;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(l6||(l6={}));function u6(e){return!!e.rangeLocations&&!!e.previewText}var h6;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(h6||(h6={}));var WC=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&VC(s)){e=d3(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+zC){const f=o6+(u-a)+a6;n+=f+e.slice(u,h),o+=u-(a+f.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new qC(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=Gf(t,a=>({preview:new d6(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function VC(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var d6=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},qC=class extends d6{constructor(e,t,r){super(e,t,e,r)}},f6;(function(e){e.List="list",e.Tree="tree"})(f6||(f6={}));var p6;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(p6||(p6={}));function GC(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=fn(s,pt(r)),s=fn(s,pt(i),!0),s}function g6(e,t){return e.excludePattern&&ic(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&ic(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(uu(t,i)){const s=Na(i,t);return!r.includePattern||!!ic(r.includePattern,s)}else return!1}):!1:!0}var m6;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(m6||(m6={}));function ta(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var v6=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>yo(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=yo(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return As(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>QC(t)||e,!1)}};function QC(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function JC(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?w6(i):{})),t.then(i=>!!i[r]))}function ZC(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?w6(i):{}}return!!t[r]}}function w6(e){const t={};for(const r of e)t[r]=!0;return t}function b6(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var Ym={matchLines:100,charsPerLine:1e4};function sl(e,t,r){return new Oa(i=>Km(i,r)).isEqual(e,t)}function XC(e,t,r){return sl(e.uri,t.uri,r)?0:ln(e.uri.toString(),t.uri.toString())}function YC(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:sl(e.uri,t.uri,r)?ln(e.name,t.name):ln(e.uri.toString(),t.uri.toString())}function y6(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return DE(s,n,(o,a)=>r(o,a,i))}function Km(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var e1=class y0 extends q${static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=r;r?a.forEach(($,P)=>{const A=x.revive($.uri),L=y0.o(i||r,A,s);L?(L.name=$.name,L.index=$.index,h.push(L)):h.push({uri:A,name:$.name,index:P})}):h.push(...a.map(({uri:$,name:P,index:A})=>({uri:x.revive($),name:P,index:A}))),h.sort(($,P)=>$.index<P.index?-1:1);const p=new y0(n,o,h,!!l,c?x.revive(c):null,!!u,$=>Km($,s)),{added:m,removed:w}=y6(f?f.workspaceFolders:[],p.workspaceFolders,XC,s);return{workspace:p,added:m,removed:w}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(sl(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new Jb(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=Qi.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=xp(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},t1=class{constructor(t,r,i,s,n){this.c=new R,this.onDidChangeWorkspace=this.c.event,this.g=new R,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Da,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new B$,this.k=new Ci,this.o=t.getProxy(Z.MainThreadWorkspace),this.q=t.getProxy(Z.MainThreadMessageService);const o=r.workspace;this.l=o?new e1(o.id,o.name,[],!!o.transient,o.configuration?x.revive(o.configuration):null,!!o.isUntitled,a=>Km(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?x.from({scheme:te.untitled,path:Ps(xp(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{x.isUri(u.uri)&&!n.some(h=>sl(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||yp(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||yp(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,p)=>p!==u&&sl(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=y6(o,a,YC,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(z$.Error,d(2734,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=x.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=Yw(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=e1.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=e1.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=ct.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z(t,void 0,{exclude:[o],maxResults:i,useExcludeSettings:a?Jr.FilesExclude:Jr.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=ct.None){this.h.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${i.value}, entryPoint: findFiles2`);const n=r.useDefaultExcludes??!0,o=r.useDefaultSearchExcludes??!0,a=n?o?Jr.SearchAndFilesExclude:Jr.FilesExclude:Jr.None,c={exclude:r.exclude?[r.exclude]:void 0,useIgnoreFiles:{local:r.useIgnoreFiles,global:r.useGlobalIgnoreFiles,parent:r.useParentIgnoreFiles},useExcludeSettings:a,followSymlinks:r.followSymlinks,maxResults:r.maxResults};return this.z(void 0,t!==void 0?[t]:[],c,s)}findFiles2New(t,r={},i,s=ct.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z(void 0,t,r,s)}async z(t,r,i,s=ct.None){if(s&&s.isCancellationRequested)return Promise.resolve([]);const o=(t!==void 0?[t]:r)?.map(a=>{const c=x6(i.exclude),l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===Jr.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==Jr.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:c.length>0?c:void 0,_reason:"startFileSearch",shouldGlobSearch:t?void 0:!0},u=Nd(Lr.from(a)),h=u?.folder;return t?l.includePattern=u?.pattern:l.filePattern=u?.pattern,{folder:h,options:l}})??[];return this.A(o,s)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>x.revive(o)):[]))??[])).flat()}findTextInFilesNew(t,r,i,s=ct.None){this.h.trace(`extHostWorkspace#findTextInFilesNew: textSearch, extension: ${i.value}, entryPoint: findTextInFilesNew`);const n=f=>{if(!r)return{folder:void 0,options:{}};const p=f?Nd(Lr.from(f)):void 0,m=r.exclude?x6(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Jr.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Jr.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:p?.pattern,excludePattern:m},folder:p?.folder}},a=(r?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new Pe,l=c.add(new R),u=this.findTextInFilesBase(t,a,(f,p)=>l.fire({result:f,uri:p}),s);return{results:new Ua(async f=>{c.add(l.event(p=>{const m=p.result,w=p.uri;u6(m)?f.emitOne(new Vs(w,m.rangeLocations.map($=>({previewRange:new De($.preview.startLineNumber,$.preview.startColumn,$.preview.endLineNumber,$.preview.endColumn),sourceRange:new De($.source.startLineNumber,$.source.startColumn,$.source.endLineNumber,$.source.endColumn)})),m.previewText)):f.emitOne(new Xm(w,m.text,m.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=ct.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=x.revive(a.resource);a.results.forEach(l=>{const u=hr(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=ct.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=Nd(Lr.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,f)=>{u6(h)?i({uri:f,preview:{text:h.previewText,matches:Gf(h.rangeLocations,p=>new De(p.preview.startLineNumber,p.preview.startColumn,p.preview.endLineNumber,p.preview.endColumn))},ranges:Gf(h.rangeLocations,p=>new De(p.source.startLineNumber,p.source.startColumn,p.source.endLineNumber,p.source.endColumn))}):i({uri:f,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return x.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return x.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),$e(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(x.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(x.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(x.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),$e(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(x.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(x.revive(t),{targetScheme:r},i)}};t1=__decorate([__param(0,Qe),__param(1,ir),__param(2,lo),__param(3,Xe),__param(4,pu)],t1);var os=ee("IExtHostWorkspace");function Nd(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=x.revive(e.baseUri)),{pattern:t,folder:r}}function x6(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=Nd(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var E6;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(E6||(E6={}));var k6;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(k6||(k6={}));var $6;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})($6||($6={}));var r1;(function(e){e.DEFAULT={allowTrailingComma:!0}})(r1||(r1={}));function KC(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(w){let $=0,P=0;for(;$<w;){const A=e.charCodeAt(r);if(A>=48&&A<=57)P=P*16+A-48;else if(A>=65&&A<=70)P=P*16+A-65+10;else if(A>=97&&A<=102)P=P*16+A-97+10;else break;r++,$++}return $<w&&(P=-1),P}function l(w){r=w,s="",n=0,o=16,a=0}function u(){const w=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&ra(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&ra(e.charCodeAt(r)))for(r++;r<e.length&&ra(e.charCodeAt(r));)r++;else return a=3,e.substring(w,r);let $=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&ra(e.charCodeAt(r))){for(r++;r<e.length&&ra(e.charCodeAt(r));)r++;$=r}else a=3;return e.substring(w,$)}function h(){let w="",$=r;for(;;){if(r>=i){w+=e.substring($,r),a=2;break}const P=e.charCodeAt(r);if(P===34){w+=e.substring($,r),r++;break}if(P===92){if(w+=e.substring($,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const L=c(4);L>=0?w+=String.fromCharCode(L):a=4;break}default:a=5}$=r;continue}if(P>=0&&P<=31)if(Fd(P)){w+=e.substring($,r),a=2;break}else a=6;r++}return w}function f(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let w=e.charCodeAt(r);if(i1(w)){do r++,s+=String.fromCharCode(w),w=e.charCodeAt(r);while(i1(w));return o=15}if(Fd(w))return r++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(w){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const $=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!Fd(e.charCodeAt(r));)r++;return s=e.substring($,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const P=i-1;let A=!1;for(;r<P;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,A=!0;break}r++}return A||(r++,a=1),s=e.substring($,r),o=13}return s+=String.fromCharCode(w),r++,o=16}case 45:if(s+=String.fromCharCode(w),r++,r===i||!ra(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&p(w);)r++,w=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),r++,o=16}}function p(w){if(i1(w)||Fd(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=f();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>r,scan:t?m:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function i1(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Fd(e){return e===10||e===13||e===8232||e===8233}function ra(e){return e>=48&&e<=57}var S6;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(S6||(S6={}));function eI(e,t,r=r1.DEFAULT){const i=KC(e,!1);function s(se){return se?()=>se(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(se){return se?Te=>se(Te,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),f=n(t.onSeparator),p=s(t.onComment),m=n(t.onError),w=r&&r.disallowComments,$=r&&r.allowTrailingComma;function P(){for(;;){const se=i.scan();switch(i.getTokenError()){case 4:A(14);break;case 5:A(15);break;case 3:A(13);break;case 1:w||A(11);break;case 2:A(12);break;case 6:A(16);break}switch(se){case 12:case 13:w?A(10):p();break;case 16:A(1);break;case 15:case 14:break;default:return se}}}function A(se,Te=[],ve=[]){if(m(se),Te.length+ve.length>0){let Ze=i.getToken();for(;Ze!==17;){if(Te.indexOf(Ze)!==-1){P();break}else if(ve.indexOf(Ze)!==-1)break;Ze=P()}}}function L(se){const Te=i.getTokenValue();return se?h(Te):a(Te),P(),!0}function z(){switch(i.getToken()){case 11:{let se=0;try{se=JSON.parse(i.getTokenValue()),typeof se!="number"&&(A(2),se=0)}catch{A(2)}h(se);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return P(),!0}function W(){return i.getToken()!==10?(A(3,[],[2,5]),!1):(L(!1),i.getToken()===6?(f(":"),P(),Y()||A(4,[],[2,5])):A(5,[],[2,5]),!0)}function J(){o(),P();let se=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(se||A(4,[],[]),f(","),P(),i.getToken()===2&&$)break}else se&&A(6,[],[]);W()||A(4,[],[2,5]),se=!0}return c(),i.getToken()!==2?A(7,[2],[]):P(),!0}function ne(){l(),P();let se=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(se||A(4,[],[]),f(","),P(),i.getToken()===4&&$)break}else se&&A(6,[],[]);Y()||A(4,[],[4,5]),se=!0}return u(),i.getToken()!==4?A(8,[4],[]):P(),!0}function Y(){switch(i.getToken()){case 3:return ne();case 1:return J();case 10:return L(!0);default:return z()}}return P(),i.getToken()===17?r.allowEmptyContent?!0:(A(4,[],[]),!1):Y()?(i.getToken()!==17&&A(9,[],[]),!0):(A(4,[],[]),!1)}function nl(e){return Object.isFrozen(e)?e:Bb(e)}var ia=class Jn{static createEmptyModel(t){return new Jn({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(r=>{if(r instanceof Jn)return r;const i=new tI("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Cu(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return nl(i.rawConfiguration.getValue(t))},get override(){return r?nl(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return nl(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new Jn(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?nl(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?Cu(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return Zn(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return Zn(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=pt(this.contents),i=pt(this.overrides),s=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(const o of t)if(n.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Bi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=Zn(c.keys)):i.push(pt(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Jn(r,s,i,n.every(o=>o instanceof Jn)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of Zn([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=pt(n),this.i(n,o)):n=o),i[s]=n}return new Jn(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&$t(t[i])&&$t(r[i])){this.i(t[i],r[i]);continue}t[i]=pt(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=pt(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),n2(this.contents,t),Pi.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Bi(i.identifiers,ec(t))),1))}k(t,r,i){if(E4(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),Pi.test(t)){const s=ec(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:og(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Bi(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},tI=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||ia.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!St(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new ia(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{eI(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=Kt.as(wo.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=og(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.l(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(Pi.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a],l=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&o.push(a),!i.exclude?.includes(a)&&(i.include?.includes(a)||(l===void 0||i.scopes===void 0||i.scopes.includes(l))&&!(i.skipRestricted&&c?.restricted))?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t){const r=[];for(const i of Object.keys(e))if(Pi.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:ec(i),keys:Object.keys(s),contents:og(s,t)})}return r}},rI=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return nl(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},s1=class Hx{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Xt,this.v=null}getValue(t,r,i){return this.w(t,r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=ia.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(t,r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new rI(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=qs(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of ec(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!ci(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=qs(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=qs(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=qs(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=qs(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=qs(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=qs(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=qs(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r,i){let s=this.x(r,i);return r.overrideIdentifier&&(s=s.override(r.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(s=s.merge(this.l)),s}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.user,r),a=this.E(t.workspace,r),c=t.folders.reduce((l,u)=>(l.set(x.revive(u[0]),this.E(u[1],r)),l),new Xt);return new Hx(i,s,n,o,ia.createEmptyModel(r),a,c,ia.createEmptyModel(r),new Xt,r)}static E(t,r){return new ia(t.contents,t.keys,t.overrides,void 0,r)}},iI=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=s1.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!ci(o,a)}return!0}};function qs(e,t){const{added:r,removed:i,updated:s}=C6(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=C6({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function C6(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Cu(t.contents,n),a=Cu(e.contents,n);ci(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function ol(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function sI(e){return e instanceof x}function nI(e){return e&&e.uri instanceof x&&e.languageId&&typeof e.languageId=="string"}function oI(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function aI(e){return e&&e.uri instanceof x&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function I6(e){if(sI(e))return{resource:e};if(nI(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(oI(e))return{overrideIdentifier:e.languageId};if(aI(e))return{resource:e.uri};if(e===null)return{resource:null}}var n1=class{constructor(t,r,i){this.a=t.getProxy(Z.MainThreadConfiguration),this.c=r,this.b=i,this.d=new Ci,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new cI(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};n1=__decorate([__param(0,Qe),__param(1,os),__param(2,Xe)],n1);var cI=class{constructor(e,t,r,i){this.a=new R,this.b=e,this.f=i,this.c=t,this.e=s1.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=s1.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=I6(t)||{},s=this.g(e?ol(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case No.Global:return 2;case No.Workspace:return 5;case No.WorkspaceFolder:return 6}}const o={has(a){return typeof ol(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=ol(s,a);if(typeof l>"u")l=c;else{let u;const h=(f,p)=>{if($t(f)){let m;const w=()=>{u=u||pt(s),m=m||ol(u,p)};return new Proxy(f,{get:($,P)=>{if(typeof P=="string"&&P.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||ol(u,p),m[P];const A=$[P];return typeof P=="string"?h(A,`${p}.${P}`):A},set:($,P,A)=>(w(),m&&(m[P]=A),!0),deleteProperty:($,P)=>(w(),m&&delete m[P],!0),defineProperty:($,P,A)=>(w(),m&&Object.defineProperty(m,P,A),!0)})}return Array.isArray(f)?pt(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:pt(c.policy?.value??c.default?.value),globalValue:pt(c.user?.value??c.application?.value),workspaceValue:pt(c.workspace?.value),workspaceFolderValue:pt(c.workspaceFolder?.value),defaultLanguageValue:pt(c.default?.override),globalLanguageValue:pt(c.user?.override??c.application?.override),workspaceLanguageValue:pt(c.workspace?.override),workspaceFolderLanguageValue:pt(c.workspaceFolder?.override),languageIds:pt(c.overrideIdentifiers)}}};return typeof s=="object"&&fn(o,s,!1),Object.freeze(o)}g(e){const t=r=>$t(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=Pi.test(e)?4:this.d.get(e),s=r?`[${r.value}] `:"";if(i===4){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===3){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new iI(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,I6(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},as=ee("IExtHostConfiguration"),lI=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},al=class jx{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new R,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(hI),this.f=new Zi,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=P6(this.e,r),this.e=this.e.concat(t);const i=jx.l(this.e);return this.e=P6(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new lI(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new Zi;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(Ye.toKey(a.identifier),Ye.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new uI(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},uI=class{constructor(e,t){this.versionId=e,this.extensions=t}},D6;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(D6||(D6={}));function hI(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=je.basename(e.extensionLocation.path),n=je.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function P6(e,t){const r=new mn(t);return e.filter(i=>!r.has(i.identifier))}var o1="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",TM=new RegExp(o1),A6;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(A6||(A6={}));var T6;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(T6||(T6={}));var R6;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(R6||(R6={}));var L6;(function(e){e.Install="install",e.Uninstall="uninstall"})(L6||(L6={}));var N6;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(N6||(N6={}));var RM=ee("extensionGalleryService"),F6;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(F6||(F6={}));var M6;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(M6||(M6={}));var O6;(function(e){e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(O6||(O6={}));var LM=ee("extensionManagementService"),NM=ee("IGlobalExtensionEnablementService"),FM=ee("IExtensionTipsService"),MM=rp(1791,"Extensions"),OM=rp(1792,"Preferences"),UM=ee("telemetryService"),HM=ee("customEndpointTelemetryService"),U6;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(U6||(U6={}));var H6;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(H6||(H6={}));var a1=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},dI=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},jM=new dI,fI="extensionTelemetryLog",pI=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function gI(e){if(!e)return"none";const t=ng(e);return pI.has(t)?t:"other"}function mI(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function vI(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function j6(e,t){return mu(e,r=>{if(r instanceof a1||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=mI(i,t);for(const s of t)i=i.replace(s,"");return i=vI(i),i}})}var _M=new Ye("pprice.better-merge"),wI=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[Ye.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${Ye.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){Sr(o)}}return t}},bI=new wI,yI=Object.freeze({identifier:new Ye("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:x.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1}),BM=ee("extensionService"),_6=class{constructor(e){this.dependency=e}},B6;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(B6||(B6={}));function Tt(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function H(e,t){if(!Tt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var z6;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(z6||(z6={}));var Md=class _x{static{this.NONE=new _x(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},W6=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Md(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Od=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},xI=class extends Od{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,Ee.None)}},EI=class extends Od{constructor(){super(!1,null,Md.NONE,{activate:void 0,deactivate:void 0},void 0,Ee.None)}},Ud=class extends Od{constructor(e){super(!0,e,Md.NONE,{activate:void 0,deactivate:void 0},void 0,Ee.None)}},c1=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new Zi,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Ud(n));return this.c.onExtensionActivationError(t.id,n,new _6(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new Ud(l));return this.c.onExtensionActivationError(r.identifier,l,new _6(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new l1(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return al.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};c1=__decorate([__param(3,Xe)],c1);var l1=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new Ci,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new Ud(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new Ud(r),this.b&&en(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};l1=__decorate([__param(6,Xe)],l1);var V6=class{constructor(e,t){this.c=t,this.b=new R,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(Z.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},u1=ee("IExtHostStorage"),q6=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new no(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new oo;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},kI=class extends q6{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},Fi,h1=Fi=class{constructor(t,r){this.b=new Map,this.c=new Q3,this.a=t.getProxy(Z.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===po.Readonly?1:void 0}}catch(n){Fi.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return Fi.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return Fi.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return Fi.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,Ne.wrap(n))}catch(o){return Fi.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return Fi.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return Fi.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return Fi.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(!((await t.stat(i)).type&gn.Directory))throw Mt.FileExists(`Unable to create folder '${i.scheme===te.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(Eu(n)!==Ce.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(Eu(o)!==Ce.FileExists)throw o}}}static e(t){if(t instanceof Mt)throw t;if(t instanceof _y)switch(t.code){case Ce.FileExists:throw Mt.FileExists(t.message);case Ce.FileNotFound:throw Mt.FileNotFound(t.message);case Ce.FileNotADirectory:throw Mt.FileNotADirectory(t.message);case Ce.FileIsADirectory:throw Mt.FileIsADirectory(t.message);case Ce.NoPermissions:throw Mt.NoPermissions(t.message);case Ce.Unavailable:throw Mt.Unavailable(t.message);default:throw new Mt(t.message,t.name)}if(!(t instanceof Error))throw new Mt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Mt.Unavailable(t.message);switch(t.name){case Ce.FileExists:throw Mt.FileExists(t.message);case Ce.FileNotFound:throw Mt.FileNotFound(t.message);case Ce.FileNotADirectory:throw Mt.FileNotADirectory(t.message);case Ce.FileIsADirectory:throw Mt.FileIsADirectory(t.message);case Ce.NoPermissions:throw Mt.NoPermissions(t.message);case Ce.Unavailable:throw Mt.Unavailable(t.message);default:throw new Mt(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?Ve:N3,isReadonly:!!i?.isReadonly}),$e(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ve}};h1=Fi=__decorate([__param(0,Qe),__param(1,lo)],h1);var Hd=ee("IExtHostConsumerFileSystem"),d1=ee("IExtensionStoragePaths"),f1=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return x.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(x.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:x.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return x.joinPath(this.c,t.identifier.value)}globalValue(t){return x.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};f1=__decorate([__param(0,ir),__param(1,Xe),__param(2,Hd)],f1);var GM=ee("tunnelService"),QM=ee("sharedTunnelsService"),G6;(function(e){e.Http="http",e.Https="https"})(G6||(G6={}));var jn;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(jn||(jn={}));var Q6;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Q6||(Q6={}));function $I(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var p1=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function J6(e){return p1.indexOf(e)>=0}var g1=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Z6(e){return g1.indexOf(e)>=0}var SI=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new R,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},X6=class extends Ee{constructor(t,r){super(),this.r=t,this.s=r,this.a=new R,this.onTunnelOpened=this.a.event,this.b=new R,this.onTunnelClosed=this.b.event,this.c=new R,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(Z6(t)||J6(t))&&(t=p1[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];J6(t)?(i.push(...p1),i.push(...g1)):Z6(t)&&i.push(...g1);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!$I(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==jn.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.z(r,i,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};X6=__decorate([__param(0,Xe),__param(1,Su)],X6);var CI=class extends SI{},m1;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?jn.Public:jn.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==jn.ConstantPrivate&&i.privacy!==jn.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(m1||(m1={}));var v1=ee("IExtHostTunnelService"),w1=class extends Ee{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new R,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(Z.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new CI(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new Ue(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,ct.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve($e(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2732,null),themeIcon:"lock"},{id:"public",label:d(2733,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return $e(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),m1.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};w1=__decorate([__param(0,Qe),__param(1,ir),__param(2,Xe)],w1);function II(e){return[...e.entries()]}function DI(e){return e?[...e.entries()]:[]}var PI=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},_n=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},sa=(e,t)=>e===t,Gs={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:sa,description:sa,sortText:sa,busy:sa,error:sa,canResolveChildren:sa,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},na=e=>t=>({op:4,update:e(t)}),AI=(e,t)=>({range:(()=>{let r;const i=na(s=>({range:tt.lift(B.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),Gs.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:_n(e,t,Gs.label,na(r=>({label:r}))),description:_n(e,void 0,Gs.description,na(r=>({description:r}))),sortText:_n(e,void 0,Gs.sortText,na(r=>({sortText:r}))),canResolveChildren:_n(e,!1,Gs.canResolveChildren,r=>({op:2,state:r})),busy:_n(e,!1,Gs.busy,na(r=>({busy:r}))),error:_n(e,void 0,Gs.error,na(r=>({error:Le.fromStrict(r)||null}))),tags:_n(e,[],Gs.tags,(r,i)=>({op:1,new:r.map(mi.from),old:i.map(mi.from)}))}),TI=e=>{const t=Oe.fromString(e.extId),r=new cl(t.controllerId,t.localId,e.label,x.revive(e.uri)||void 0);return r.range=B.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>mi.to({id:h5(i).tagId})),r},Y6=e=>{let t;for(const r of e.tests){const i=TI(r.item);Yu(i).parent=t,t=i}return t},cl=class Bx{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=mC(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof b1?void 0:n.parent}},children:{value:gC(n,Yu,Bx),enumerable:!0,writable:!1},...AI(n,i)})}},b1=class extends cl{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},RI=class extends dC{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:Yu,getChildren:i=>i.children,root:new b1(e,t),toITestItem:zs.from})}},y1=class extends Ee{constructor(t,r){super(),this.s=t,this.t=r,this.a=this.B(new R),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new R),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=x.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=r.createLogger(this.m,{id:fI,name:d(2729,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(r.onDidChangeLogLevel(i=>{S$(i)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===_e.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new K6(r,i,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.g=r,this.c=i??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.s.telemetryInfo.machineId,r["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,r["common.sqmid"]=this.s.telemetryInfo.sqmId,r["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.s.version,r["common.isnewappinstall"]=e7(this.s.telemetryInfo.firstSessionDate),r["common.product"]=this.s.environment.appHost,this.s.uiKind){case Pa.Web:r["common.uikind"]="web";break;case Pa.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=ng(gI(this.s.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.r.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,r){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};y1=__decorate([__param(0,ir),__param(1,qa)],y1);var K6=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new R,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=j6(t,[]),this.c&&(t=fn(t,this.c)),this.b||(t=fn(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=j6(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function e7(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var jd=ee("IExtHostTelemetry"),x1=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(Z.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(Z.MainThreadTelemetry),this.converter=new LI(this,s=>{const n=this.c.get(s);return n?.result===me.Void?n:void 0},r),this.f=[{processArgument(s){return hr(s)}},{processArgument(s){return mu(s,function(n){if(tt.isIRange(n))return B.to(n);if(Hr.isIPosition(n))return qe.to(n);if(tt.isIRange(n.range)&&x.isUri(n.uri))return mr.to(n);if(n instanceof Ne)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ue(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new Ue(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=mu(r,function(o){if(o instanceof Re)return qe.from(o);if(o instanceof De)return B.from(o);if(o instanceof jr)return mr.from(o);if(ts.isNotebookRange(o))return Ni.from(o);if(o instanceof ArrayBuffer)return s=!0,Ne.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,Ne.wrap(o);if(o instanceof Ne)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new Or(n):n,i);return hr(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{w3(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=sn.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(hn(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new a1(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension?.identifier),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};x1=__decorate([__param(0,Qe),__param(1,Xe),__param(2,jd)],x1);var Bn=ee("IExtHostCommands"),LI=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${qr()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Sa(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add($e(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},V=class yr{static{this.Uri=new yr("uri","Uri of a text document",t=>x.isUri(t),t=>t)}static{this.Position=new yr("position","A position in a text document",t=>Re.isPosition(t),qe.from)}static{this.Range=new yr("range","A range in a text document",t=>De.isRange(t),B.from)}static{this.Selection=new yr("selection","A selection in a text document",t=>Ki.isSelection(t),gi.from)}static{this.Number=new yr("number","",t=>typeof t=="number",t=>t)}static{this.String=new yr("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=yr.Arr(yr.String)}static Arr(t){return new yr(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new yr("item","A call hierarchy item",t=>t instanceof Pg,Mn.from)}static{this.TypeHierarchyItem=new yr("item","A type hierarchy item",t=>t instanceof am,Un.from)}static{this.TestItem=new yr("testItem","A VS Code TestItem",t=>t instanceof cl,zs.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new yr(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new yr(t??this.name,r??this.description,this.validate,this.convert)}},me=class zx{static{this.Void=new zx("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},we=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},oa=ee("IExtHostTerminalService"),t7=class extends Ee{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new R),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:i7(e.iconPath)??void 0,color:uo.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:uo.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Ot.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},E1=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new R,this.onProcessData=this.a.event,this.b=new R,this.d=new R,this.onDidChangeProperty=this.d.event,this.f=new R,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},NI=1,k1=class extends Ee{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.Q=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new ys),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new R,this.onDidCloseTerminal=this.H.event,this.I=new R,this.onDidOpenTerminal=this.I.event,this.J=new R,this.onDidChangeActiveTerminal=this.J.event,this.L=new R,this.onDidChangeTerminalDimensions=this.L.event,this.M=new R,this.onDidChangeTerminalState=this.M.event,this.N=new R,this.onDidChangeShell=this.N.event,this.O=new R({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.O.event,this.P=new R({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.P.event,this.a=i.getProxy(Z.MainThreadTerminalService),this.y=new PI(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.Q.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new t7(this.a,qr(),t,t.name),s=new E1(t.pty);return i.createExtensionTerminal(t.location,r,this.R(t,r).resolvedExtHostIdentifier,i7(t.iconPath),MI(t.color)).then(n=>{const o=this.S(n,s);this.h[n]=o}),this.f.push(i),i.value}R(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new E1(r),n=this.S(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.J.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.J.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.O.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.L.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.X(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.H.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.X(this.f,r);if(a!==null){this.f[a]._id=t,this.I.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:x.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new t7(this.a,t,n,i);this.f.push(o),this.I.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:d(2730,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}S(t,r){const i=new Pe;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.U(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof E1&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.M.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Ue(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}registerProfileProvider(t,r,i){if(this.C.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.C.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new Ue(()=>{this.C.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalQuickFixProvider(t,r,i){if(this.D.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.D.set(t,i),this.a.$registerQuickFixProvider(t,r),new Ue(()=>{this.D.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new At().token;if(i.isCancellationRequested)return;const s=this.D.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new Pe;if(this.w.value=o,!Array.isArray(n))return n?Rd.from(n,this.Q.converter,o):void 0;const a=[];for(const c of n){const l=Rd.from(c,this.Q.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new At().token;let s=await this.C.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.F.delete(t),this.G.get(t)?.dispose(!0);const n=new At;this.G.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(ao.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:h,links:[]}));const p=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:h,links:p})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const p={id:NI++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(p.id,{provider:h.provider,link:f}),p}));return this.F.set(t,u),o}$activateLink(t,r){const i=this.F.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}U(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.W(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}W(t,r){const i=this.X(t,r);return i!==null?t[i]:null}X(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new r7),this.Z(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Y(t,r){const i=II(r.map),s=DI(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new r7(r[1]));this.Z(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.N.fire(t.path)}Z(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Y(t,r)}))}};k1=__decorate([__param(1,Bn),__param(2,Qe)],k1);var r7=class extends Ee{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new R,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new FI(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:$o.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:$o.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:$o.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?s7(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,s7(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},FI=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new R}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},$1=class extends k1{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new Vf}createTerminalFromOptions(t,r){throw new Vf}};$1=__decorate([__param(0,Bn),__param(1,Qe)],$1);function i7(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function MI(e){return uo.isThemeColor(e)?e:void 0}function s7(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var OI=ee("progressService"),n7;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(n7||(n7={}));var rO=Object.freeze({total(){},worked(){},done(){}}),S1=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},o7=class extends Ee{constructor(t,r){super(),this.a=new oo,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B($e(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};o7=__decorate([__param(1,OI)],o7);var sO=ee("editorProgressService"),a7="__",nO=ee("IAuthenticationService"),oO=ee("IAuthenticationExtensionsService"),C1=ee("IExtHostAuthentication"),I1=class{constructor(t){this.b=new Map,this.c=new R,this.d=new UI,this.a=t.getProxy(Z.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return Et.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=Ye.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new Ue(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(a7)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};I1=__decorate([__param(0,Qe)],I1);var UI=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},D1,P1=ee("IExtHostLanguageModels"),c7=class{constructor(e,t){this.option=e,this.stream=new Ep,this.stream=t??new Ep}},HI=class{constructor(){this.a=new Map,this.b=new Ep,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return Ua.map(e.b.asyncIterable,t=>{if(t instanceof _c)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new c7(e.index,this.b):t=new c7(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new _c(e.part.value):r=new jc(e.part.name,e.part.toolCallId,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},A1=class{static{D1=this}static{this.a=1}constructor(t,r,i){this.j=r,this.k=i,this.c=new R,this.d=new R,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Zi,this.i=new Map,this.s=new Set,this.b=t.getProxy(Z.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=D1.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Ye.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??Ye.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new Ye(c),l,u)});return $e(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new S1(async u=>{if(o.isCancellationRequested){this.j.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof jc?h={type:"tool_use",name:u.part.name,parameters:u.part.parameters,toolCallId:u.part.toolCallId}:u.part instanceof _c&&(h={type:"text",value:u.part.value}),!h){this.j.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;if(a.provider.provideLanguageModelResponse2)l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(Ko.to),n,Ye.toKey(i),c,o));else{const u=new S1(async h=>{c.report({index:h.index,part:new _c(h.part)})});l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(Ko.to),n?.modelOptions??{},Ye.toKey(i),u,o))}l.then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,$a(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new Zi});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new $i),this.i.delete(i))}t.added?.forEach(r=>this.q(r.metadata)),this.d.fire(void 0)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.o(t.identifier,i.metadata)&&await this.q(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw is.NotFound(r);return n.r(r,o,a??ct.None)},sendRequest(o,a,c){if(!n.g.has(r))throw is.NotFound(r);return n.l(t,r,o,a??{},c??ct.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async l(t,r,i,s,n){const o=this.m(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw is.NotFound(`Language model '${r}' is unknown.`);if(this.o(a,c)&&(!await this.n(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw is.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);try{const l=Math.random()*1e6|0,u=new HI;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===is.name?l:new is(`Language model '${r}' errored: ${hn(l)}`,"Unknown",l)}}m(t,r){const i=[];for(const s of r)s.role===Gr.System&&H(t,"languageModelSystem"),s.content2.some(n=>n instanceof Yh)&&H(t,"lmTools"),i.push(Ko.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject(EE(r)):i.res.resolve())}async n(t,r,i,s){const n=a7+r.identifier.value;if(await this.k.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?d(2721,null,r.displayName,i):void 0;return await this.k.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}o(t,r){return!!r.auth&&!Ye.equals(r.extension,t)}async q(t){if(t.auth)for(const r of this.s)try{await this.n(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.j.error("Fake Auth request failed"),this.j.error(i)}}async r(t,r,i){if(!this.g.get(t))throw is.NotFound(`Language model '${t}' is unknown.`);const n=Vr.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:Ko.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new mn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const r=this,i=Et.signal(Et.filter(this.c.event,n=>Ye.equals(n.from,t.identifier))),s=Et.signal(this.d.event);return{get onDidChange(){return Et.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.o(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}};A1=D1=__decorate([__param(0,Qe),__param(1,Xe),__param(2,C1)],A1);function ll(e,t=Cr){return $3(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function jI(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var l7;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(l7||(l7={}));var u7;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(u7||(u7={}));function h7(e){return e<0?0:e>255?255:e|0}function aa(e){return e<0?0:e>4294967295?4294967295:e|0}var d7=class Wx{constructor(t){const r=h7(t);this.c=r,this.a=Wx.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=h7(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},f7;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(f7||(f7={}));var p7;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(p7||(p7={}));var _I=class extends d7{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},g7=new Jf(10);function BI(e,t){const r=`${e}/${t.join(",")}`;let i=g7.get(r);return i||(i=new _I(e,t),g7.set(r,i)),i}var T1;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(T1||(T1={}));var m7;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(m7||(m7={}));var v7;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(v7||(v7={}));var w7;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(w7||(w7={}));var b7;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(b7||(b7={}));var y7;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(y7||(y7={}));var x7;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(x7||(x7={}));var E7;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(E7||(E7={}));var R1=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},k7;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(k7||(k7={}));var $7;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})($7||($7={}));var S7;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(S7||(S7={}));var zI=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},WI=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},C7=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=I7(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Kk(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new zI(t,this.wordSeparators?BI(this.wordSeparators,[]):null,r?this.searchString:null)}};function I7(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function D7(e,t,r){if(!r)return new R1(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new R1(e,i)}function VI(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function qI(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function P7(e,t,r,i,s){return VI(e,t,r,i,s)&&qI(e,t,r,i,s)}var GI=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){Mw(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||P7(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function A7(e){return e.scheme!==te.file&&e.scheme!==te.vscodeRemote}function QI(e){if(e.folders.length)return e.folders.every(t=>A7(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&A7(e.configuration))return e.configuration}function JI(e){return QI(e)?.scheme}var ZI=cg,T7=ee("remoteAgentService"),lO=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await Ii(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},L1,XI=ee("pathService"),R7=L1=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||Ck)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===te.file||t.scheme===te.vscodeRemote?k3(i??Ps(t),r===1):!0}get defaultUriScheme(){return L1.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return te.vscodeRemote;const i=JI(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:te.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Pt:je)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return x.from({scheme:te.file,authority:r,path:t,query:"",fragment:""})}};R7=L1=__decorate([__param(1,T7),__param(2,ZI),__param(3,jp)],R7);function YI(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var L7=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(_p),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(_p),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(_d),!t.length)return{}}else t=_d(t);return r?this.parseSearchPaths(t):{pattern:N1(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=Ft(this.c.groups.flatMap(p=>p.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(p=>g6(c,p.fsPath)),f=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>g6(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new Xt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===te.walkThrough)return;if(F3(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=Na(c.fsPath,o.fsPath);so(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(jw(t.pattern,!0))return!0}else if(jw(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&I7(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>ru(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:eD(t)).map(h=>{const f=this.f.resolvedUserHome;return f?jI(h,f.scheme===te.file?f.fsPath:f.path):h}),n=L0(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>fp(h,"/")).map(h=>fp(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),tD(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=N1(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:GC(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=KI(s);return o&&(o=F1(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?N1(s.pattern):void 0})}),Array.from(i.values())}q(t){if(ru(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==te.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:x.file(to(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=_d(t),t.startsWith("../")||t===".."){const s=je.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=F1(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${cn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(un);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&F1(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(12742,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(_p(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=x.isUri(t)?t:t.uri;let a=r.excludePattern?.map(p=>{const m=r.excludePattern&&YI(p)?p.uri:void 0;return!m||!(x.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const p=i.searchPaths.filter(m=>Xw(m.searchPath,o))[0];if(p&&!p.pattern)return null;p&&(n=p.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=x.isUri(t)?Ps(t):t.name,f=a.map(p=>Object.keys(u).length>0?{folder:p,pattern:u}:void 0).filter(p=>p);return{folder:o,folderName:s?h:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};L7=__decorate([__param(0,Su),__param(1,jp),__param(2,oC),__param(3,Xe),__param(4,XI),__param(5,D4)],L7);function KI(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function N1(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function eD(e){return ug(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function tD(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function _d(e){return e.replace(/\\/g,"/")}function F1(e){return _d(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var rD=7e3;function iD(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=H3(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>sD(e,u,a))).then(()=>{}),l=nD(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function sD(e,t,r){for(const i of e.folders)if(await e.exists(nr(x.revive(i),t))){r(`workspaceContains:${t}`);return}}async function nD(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new At,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},rD);let a=!1;try{a=await n}catch(c){en(c)||Sr(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var N7=class{constructor(e){this.b=new R,this.onDidChangePassword=this.b.event,this.a=e.getProxy(Z.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},M1=ee("IExtHostSecretState"),oD=class{#e;constructor(e,t){this.disposables=new Pe,this.a=Ye.toKey(e.identifier),this.#e=t,this.onDidChange=Et.map(Et.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},O1=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(Z.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===nn}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return Tw(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),Tw(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return x.revive(r)}return t.l10n?x.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};O1=__decorate([__param(0,ir),__param(1,Qe),__param(2,Xe)],O1);var U1=ee("IExtHostLocalizationService"),H1=ee("IExtHostManagedSockets"),j1=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(Z.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new aD(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new Pe;return this.d.set(r,new cD(r,i,s)),s.add($e(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,Ne.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};j1=__decorate([__param(0,Qe)],j1);var aD=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},cD=class extends Ee{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},_1,F7=ee("IHostUtils"),B1=_1=class extends Ee{constructor(t,r,i,s,n,o,a,c,l,u,h,f,p){super(),this.Y=f,this.Z=p,this.a=this.B(new R),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(Z.MainThreadWorkspace),this.z=this.g.getProxy(Z.MainThreadTelemetry),this.C=this.g.getProxy(Z.MainThreadExtensionService),this.D=new Ci,this.F=new Ci,this.G=new Ci,this.H=new Ci,this.I=new uD(this.f.extensions.activationEvents),this.L=new al(this.I,this.f.extensions.allExtensions);const m=new mn(this.f.extensions.myExtensions);this.J=new al(this.I,U7(this.L,m)),on&&(this.s.info(`Creating extension host with the following global extensions: ${ca(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${ca(this.J)}`)),this.M=new V6(this.g,this.s),this.N=new N7(this.g),this.O=c,this.h=this.q.add(t.createChild(new Op([u1,this.M],[M1,this.N]))),this.P=this.B(new c1(this.J,this.L,{onExtensionActivationError:(w,$,P)=>{this.C.$onExtensionActivationError(w,$a($),P)},actualActivateExtension:async(w,$)=>{if(al.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,$),new EI;const P=this.J.getExtensionDescription(w);return this.fb(P,$)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),lr("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Sr(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),Bf(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([Ii(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new Ye(r.identifier.value),extensionLocation:x.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===te.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return x.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new lD(t))),this.Q}async db(t){const r=Qi.forUris(i=>L3.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=O7(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=O7(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new xI(Md.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new Pe,o=new W6(r.startup);return Promise.all([this.xb(t,nr(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(lr(`code/extHost/willActivateExtension/${t.identifier.value}`),_1.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(lr(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new kI(t,this.M)),n=r.add(new q6(t.identifier.value,!1,this.M)),o=r.add(new oD(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?_o.Test:_o.Development:_o.Production,c=this.f.remote.isRemote?Ln.Workspace:Ln.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=Tt(t,"ipc")?this.f.messagePorts?.get(Ye.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(p){return lp(t.extensionLocation.fsPath,p)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return lp(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return x.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new ul(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return H(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const p=Et.buffer(Et.fromDOMEventEmitter(f,"message",m=>m.data));f.start(),h={onDidReceiveMessage:p,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new Od(!1,null,o.build(),i,a,$e(()=>{n.dispose(),zi(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();sw(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(fk()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,Ii(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await iD(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(d(2717,null));const i=await this.xb(null,r,new W6(!1));if(!i||typeof i.run!="function")throw new Error(d(2718,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(on&&this.s.error("Test runner called back with error",l),n(l)):(on&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=oi(r),c=i.run(a,o);c&&c.then&&c.then(()=>{on&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{on&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),Ii(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,$e(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new ko("Not an authority that can be resolved!",Xi.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=sn.create(!1),s=()=>`[resolveAuthority(${D5(t)},${r})][${i.elapsed()}ms] `,n=A=>this.s.info(`${s()}${A}`),o=A=>this.s.warn(`${s()}${A}`),a=(A,L=void 0)=>this.s.error(`${s()}${A}`,L),c=A=>{if(A instanceof ko)return{type:"error",error:{code:A._code,message:A._message,detail:A._detail}};throw A},l=async A=>{n(`activating resolver for ${A}...`);const{resolver:L,authorityPrefix:z}=await this.ub(A);if(!L)throw a(`no resolver for ${z}`),new ko(`No remote extension installed to resolve ${z}.`,Xi.NoResolverFound);return{resolver:L,authorityPrefix:z,remoteAuthority:A}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async A=>{if(!(A instanceof ko)||A._code!==Xi.InvalidAuthority)throw A;return o(`resolving nested authorities failed: ${A.message}`),[await l(t)]})}catch(A){return c(A)}const f=new J3;f.cancelAndSet(()=>n("waiting..."),1e3);let p,m;for(const[A,{authorityPrefix:L,resolver:z,remoteAuthority:W}]of h.entries())try{if(A===h.length-1)n("invoking final resolve()..."),lr(`code/extHost/willResolveAuthority/${L}`),p=await z.resolve(W,{resolveAttempt:r,execServer:m}),lr(`code/extHost/didResolveAuthorityOK/${L}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(z,eh.isManagedResolvedAuthority(p)?p:void 0));else{if(n(`invoking resolveExecServer() for ${W}`),lr(`code/extHost/willResolveExecServer/${L}`),m=await z.resolveExecServer?.(W,{resolveAttempt:r,execServer:m}),!m)throw new ko(`Exec server was not available for ${W}`,Xi.NoResolverFound);lr(`code/extHost/didResolveExecServerOK/${L}`)}}catch(J){return lr(`code/extHost/didResolveAuthorityError/${L}`),a("returned an error",J),f.dispose(),c(J)}f.dispose();const w={environmentTunnels:p.environmentTunnels,features:p.tunnelFeatures?{elevation:p.tunnelFeatures.elevation,privacyOptions:p.tunnelFeatures.privacyOptions,protocol:p.tunnelFeatures.protocol===void 0?!0:p.tunnelFeatures.protocol}:void 0},$={extensionHostEnv:p.extensionHostEnv,isTrusted:p.isTrusted,authenticationSession:p.authenticationSessionForInitializingExtensions?{id:p.authenticationSessionForInitializingExtensions.id,providerId:p.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${eh.isManagedResolvedAuthority(p)?"managed authority":`${p.host}:${p.port}`}`);let P;if(eh.isManagedResolvedAuthority(p)){const A=r;this.Y.setFactory(A,p.makeConnection),P={authority:t,connectTo:new vC(A),connectionToken:p.connectionToken}}else P={authority:t,connectTo:new wC(p.host,p.port),connectionToken:p.connectionToken};return{type:"ok",value:{authority:P,options:$,tunnelInformation:w}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${D5(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=x.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await rr(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=M7(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),on&&(this.s.info(`$startExtensionHost: global extensions: ${ca(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${ca(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=M7(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),on&&(this.s.info(`$deltaExtensions: global extensions: ${ca(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${ca(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=Ne.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};B1=_1=__decorate([__param(0,du),__param(1,F7),__param(2,Qe),__param(3,os),__param(4,as),__param(5,Xe),__param(6,ir),__param(7,d1),__param(8,v1),__param(9,oa),__param(10,U1),__param(11,H1),__param(12,P1)],B1);function M7(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new al(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new mn(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=U7(s,n);return{globalRegistry:s,myExtensions:o}}function O7(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function ca(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Qs=ee("IExtHostExtensionService"),ul=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=to(oi(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function U7(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var lD=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},uD=class{constructor(e){this.a=new Zi,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},H7=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Xe),i=e.get(Qe).getProxy(Z.MainThreadErrors);Bf(s=>{t.error(s);const n=$a(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Xe),r=e.get(Qe),i=e.get(Qs),s=e.get(jd),n=r.getProxy(Z.MainThreadExtensionService),o=r.getProxy(Z.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(f,p){if(c.has(f))return c.get(f).stack;let m="",w,$;for(const A of p)m+=`
	at ${A.toString()}`,$=A.getFileName(),!w&&$&&(w=a.findSubstr(x.file($)));const P=`${f.name||"Error"}: ${f.message||""}${m}`;return c.set(f,{extensionIdentifier:w?.identifier,stack:P}),P}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(f){if(f===l||!f||f[u]){h=f||l;return}h=function(p,m){return l(p,m),f.call(Error,p,m)},Object.assign(h,{[u]:!0})}}),Bf(f=>{t.error(f);const p=$a(f),m=c.get(f);if(!m?.extensionIdentifier){o.$onUnexpectedError(p);return}n.$onExtensionRuntimeError(m.extensionIdentifier,p);const w=s.onExtensionError(m.extensionIdentifier,f);t.trace("forwarded error to extension?",w,m)})}},hD=class Vx{constructor(t,r,i,s,n){this.a=i,this.b=new s$(t,null,s),r=Vx.e(r,this.b);const o=new Op(...R$());o.set(ir,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Qe,new M$(this.b)),o.set(pu,new O$(s)),o.set(F7,i);const a=new F$(o,!0);a.invokeFunction(H7.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Xe)),lr("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Qs)),this.c.initialize(),a.invokeFunction(H7.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(Z.MainThreadExtensionService);return x.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=x.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=x.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>x.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=x.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=x.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=x.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=x.revive(r.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=x.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=x.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}},dD=function(t){const r=i=>{globalThis.removeEventListener("message",r);const s=i.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",r)}.toString(),fD=class extends EventTarget{constructor(e,t,r){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const i=`((${dD})('${t}'))`,s=new Blob([i],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:r};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},gO=new Q("inOutput",!1),mO=new Q("activeLogOutput",!1),vO=new Q("activeLogOutput.levelSettable",!1),wO=new Q("activeLogOutput.level",""),bO=new Q("activeLogOutput.levelIsDefault",!1),yO=new Q("outputView.scrollLock",!1),xO=ee("outputService"),hl;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(hl||(hl={}));var pD={OutputChannels:"workbench.contributions.outputChannels"},gD=class{constructor(){this.a=new Map,this.b=new R,this.onDidRegisterChannel=this.b.event,this.c=new R,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};Kt.add(pD.OutputChannels,new gD);var EO=new Q("activeOutputChannel",""),mD=60,vD=mD*60,z1=vD*24,kO=z1*7,$O=z1*30,SO=z1*365;function wD(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var j7=class extends Lb{get disposed(){return this.n}constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.r=r,this.s=i,this.extension=s,this.m=0,this.n=!1,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.m;this.r.flush(),this.s.$update(this.id,hl.Clear,e)}replace(e){const t=this.m;this.info(e),this.s.$update(this.id,hl.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}g(e,t){this.m+=Ne.fromString(t).byteLength,I$(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,hl.Append))}dispose(){super.dispose(),this.n||(this.s.$dispose(this.id),this.n=!0)}},bD=class extends j7{appendLine(e){this.append(e)}},W1=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(Z.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${wD(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Me(r)?r:void 0;if(Me(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([l])=>Ye.equals(i.identifier,l))?.[1];a&&(o=T$(a));const c=s?this.o(t,o,i):this.n(t,n,i);return c.then(l=>{this.g.set(l.id,l),l.visible=l.id===this.h}),s?this.r(t,o??this.m.getLevel(),c):this.q(t,c)}async n(t,r,i){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const s=await this.c,n=this.k.extUri.joinPath(s,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),o=this.l.createLogger(n,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),a=await this.a.$register(t,n,r,i.identifier.value);return new j7(a,t,o,this.a,i)}async o(t,r,i){const s=await this.p(i),n=t.replace(/[\\/:\*\?"<>\|]/g,""),o=this.k.extUri.joinPath(s,`${n}.log`),a=`${i.identifier.value}.${n}`,c=this.l.createLogger(o,{id:a,name:t,logLevel:r,extensionId:i.identifier.value});return new bD(a,t,c,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(Eu(s)!==Ce.FileExists)throw s}return i})())}return r}q(t,r){let i=!1;const s=()=>{if(i)throw new Error("Channel has been closed")};return{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i=!0,r.then(n=>n.dispose())}}}r(t,r,i){const s=new Pe,n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new R);function a(c){r=c,o.fire(c)}return i.then(c=>{s.add(c),c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))},dispose(){s.dispose()}}}};W1=__decorate([__param(0,Qe),__param(1,ir),__param(2,Hd),__param(3,lo),__param(4,qa),__param(5,Xe)],W1);var _7=ee("IExtHostOutputService"),dl,V1=class{static{dl=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(Z.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=dl.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=ri(n);if(o.length<=dl.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:Xk(u.path,"/")})),c=IE(a,(u,h)=>u.rank-h.rank||ln(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const p=ro(f.uri.path);if(h!==p&&(h=p,l.push(f.uri)>=dl.d))break e}}this.g.$onDidChange(i,l)});return new Ue(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(x.revive(c),i));if(!u)return;try{em.validate(u),u.badge&&typeof u.badge!="string"&&H(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};V1=dl=__decorate([__param(0,Qe),__param(1,Xe)],V1);var B7=ee("IExtHostDecorations"),yD=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=aa(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=aa(e),t=aa(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=aa(e),t=aa(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=aa(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new xD(i,e-n)}},xD=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},ED=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new Hr(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new yD(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=Lw(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},z7="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function kD(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of z7)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var $D=kD();function W7(e){let t=$D;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var V7=new Ia;V7.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function q7(e,t,r,i,s){if(t=W7(t),s||(s=Vr.first(V7)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),q7(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=SD(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function SD(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var q1=new Map;function CD(e,t){t?q1.set(e,t):q1.delete(e)}function ID(e){return q1.get(e)}var DD=class extends ED{constructor(e,t,r,i,s,n,o){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){Tr(!this.n),this.n=!0,this.q=!1}equalLines(e){return Bi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===te.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?di.LF:di.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,r){return e.y(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){Tr(!this.n),this.p=e}_acceptIsDirty(e){Tr(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}t(e){let t;if(e instanceof Re?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new PD(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new Re(t.index,Math.min(t.remainder,r))}w(e){if(!(e instanceof De))throw new Error("Invalid argument");const t=this.x(e.start),r=this.x(e.end);return t===e.start&&r===e.end?e:new De(t.line,t.character,r.line,r.character)}x(e){if(!(e instanceof Re))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new Re(t,r):e}y(e,t){const r=this.x(e);if(!t)t=ID(this.p);else if(Rw(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=q7(r.character+1,W7(t),this.b[r.line],0);if(i)return new De(r.line,i.startColumn-1,r.line,i.endColumn-1)}},PD=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new De(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new De(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Bd=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},DO=new Bd("id#"),AD=class qx{static{this.c=new Bd("TextEditorDecorationType")}constructor(t,r,i){const s=qx.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,km.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},TD=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof Re)r=new De(e,e);else if(e instanceof De)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new De(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof De)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==di.LF&&e!==di.CRLF)throw Ae("endOfLine");this.h=e}},RD=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Qo.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Qo.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=Qo.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},LD=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.j=t,this.k=r,this.g=!1,this.h=new Set,this.c=s,this.d=new RD(this.j,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new tn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Ki))throw Ae("selection");c.c=[l],c.l()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Ki)))throw Ae("selections");c.c=l,c.l()},get visibleRanges(){return c.e},set visibleRanges(l){throw new tn("visibleRanges")},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new tn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new TD(i.value,u);return l(h),c.m(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(p=>B.from(p));else if(u instanceof Re){const{lineNumber:p,column:m}=qe.from(u);f=[{startLineNumber:p,startColumn:m,endLineNumber:p,endColumn:m}]}else if(u instanceof De)f=[B.from(u)];else{f=[];for(const p of u)if(p instanceof De)f.push(B.from(p));else{const{lineNumber:m,column:w}=qe.from(p);f.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return t.$tryInsertSnippet(e,i.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.n(()=>{if(s6(u))return t.$trySetDecorations(e,l.key,BC(u));{const f=new Array(4*u.length);for(let p=0,m=u.length;p<m;p++){const w=u[p];f[4*p]=w.start.line+1,f[4*p+1]=w.start.character+1,f[4*p+2]=w.end.line+1,f[4*p+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.n(()=>t.$tryRevealRange(e,B.from(l),u||dh.Default))},show(l){t.$tryShowEditor(e,Ot.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){Tr(!this.g),this.g=!0}_acceptOptions(e){Tr(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){Tr(!this.g),this.e=e}_acceptViewColumn(e){Tr(!this.g),this.f=e}_acceptSelections(e){Tr(!this.g),this.c=e}async l(){const e=this.c.map(gi.from);return await this.n(()=>this.j.$trySetSelections(this.id,e)),this.value}m(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:B.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.j.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?Jo.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}n(e){return this.g?(this.k.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.k.warn(t),null))}},ND=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},G1=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new Xt,this.d=new R,this.e=new R,this.f=new R,this.g=new R,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=x.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=x.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==te.vscodeNotebookCell&&o.scheme!==te.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new ND(new DD(this.h.getProxy(Z.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=x.revive(n.documentUri);Tr(this.c.has(o),`document '${o}' does not exist`),Tr(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new LD(n.id,this.h.getProxy(Z.MainThreadTextEditors),this.i,new $r(()=>a.document),n.selections.map(gi.to),n.options,n.visibleRanges.map(l=>B.to(l)),typeof n.editorPosition=="number"?Ot.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(Tr(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),zi(r),zi(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Vr.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};G1=__decorate([__param(0,Qe),__param(1,Xe)],G1);var la=ee("IExtHostDocumentsAndEditors"),zd=ee("IExtHostApiDeprecationService"),Q1=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(Z.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};Q1=__decorate([__param(0,Qe),__param(1,Xe)],Q1);var TO=Object.freeze(new class{report(e,t,r){}}),FD={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:7},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Wd=Object.freeze(FD),J1=Kt.as(Iu.JSONContribution),MD=class Nf{static a(t){const r=new mn;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new Nf(r,[]);if(!r||!r.length)return new Nf([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Nf(n,o)}constructor(t,r){this.added=t,this.removed=r}},OD=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=MD.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Sr(e)}}},UD={type:"string",enum:["ui","workspace"],enumDescriptions:[d(12450,null),d(12451,null)]},G7="vscode://schemas/vscode-extensions",Z1={properties:{engines:{type:"object",description:d(12452,null),properties:{vscode:{type:"string",description:d(12453,null),default:"^1.22.0"}}},publisher:{description:d(12454,null),type:"string"},displayName:{description:d(12455,null),type:"string"},categories:{description:d(12456,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:r2},{type:"string",const:"Languages",deprecationMessage:d(12457,null)}]}},galleryBanner:{type:"object",description:d(12458,null),properties:{color:{description:d(12459,null),type:"string"},theme:{description:d(12460,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(12461,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(12462,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(12463,null)},enabledApiProposals:{markdownDescription:d(12464,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Wd).map(e=>e),markdownEnumDescriptions:Object.values(Wd).map(e=>e.proposal)}},api:{markdownDescription:d(12465,null),type:"string",enum:["none"],enumDescriptions:[d(12466,null)]},activationEvents:{description:d(12467,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(12468,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(12469,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(12470,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(12471,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(12472,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(12473,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(12474,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(12475,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(12476,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(12477,null),body:"onStartupFinished"},{label:"onTaskType",description:d(12478,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(12479,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(12480,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(12481,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(12482,null)},{label:"onUri",body:"onUri",description:d(12483,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(12484,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(12485,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(12486,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(12487,null)},{label:"onRenderer",description:d(12488,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(12489,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(12490,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(12491,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(12492,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(12493,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(12494,null)},{label:"*",description:d(12495,null),body:"*"}]}},badges:{type:"array",description:d(12496,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(12497,null)},href:{type:"string",description:d(12498,null)},description:{type:"string",description:d(12499,null)}}}},markdown:{type:"string",description:d(12500,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(12501,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(12502,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:o1}},extensionPack:{description:d(12503,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:o1}},extensionKind:{description:d(12504,null),type:"array",items:UD,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(12505,null)},{body:["workspace"],description:d(12506,null)},{body:["ui","workspace"],description:d(12507,null)},{body:["workspace","ui"],description:d(12508,null)},{body:[],description:d(12509,null)}]},capabilities:{description:d(12510,null),type:"object",properties:{virtualWorkspaces:{description:d(12511,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(12512,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12513,null),d(12514,null),d(12515,null)]},description:{type:"string",markdownDescription:d(12516,null)}}},untrustedWorkspaces:{description:d(12517,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(12518,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12519,null),d(12520,null),d(12521,null)]},restrictedConfigurations:{description:d(12522,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(12523,null)}}}}},sponsor:{description:d(12524,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(12525,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(12526,null),type:"string"},"vscode:uninstall":{description:d(12527,null),type:"string"}}},icon:{type:"string",description:d(12528,null)},l10n:{type:"string",description:d(12529,null)},pricing:{type:"string",markdownDescription:d(12530,null),enum:["Free","Trial"],default:"Free"}}},HD=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new OD(e.extensionPoint,e.defaultExtensionKind);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&bI.register(e.extensionPoint,e.activationEventsGenerator),Z1.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,J1.registerSchema(G7,Z1),t}getExtensionPoints(){return Array.from(this.a.values())}},Q7={ExtensionsRegistry:"ExtensionsRegistry"};Kt.add(Q7.ExtensionsRegistry,new HD);var jD=Kt.as(Q7.ExtensionsRegistry);J1.registerSchema(G7,Z1),J1.registerSchema(s2,{properties:{extensionEnabledApiProposals:{description:d(12531,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Wd),markdownEnumDescriptions:Object.values(Wd).map(e=>e.proposal)}}]}}}});var _D={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(10019,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(10020,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(10021,null),default:""}}},X1;(function(e){function t(r,i,s){if(!r)return;const n=Me(r.type)?r.type:void 0;if(!n||n.length===0){s.error(d(10022,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Me(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?pt(r.properties):{},when:r.when?Vt.deserialize(r.when):void 0}}e.from=t})(X1||(X1={}));var BD=jD.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:d(10023,null),type:"array",items:_D}}),zD=class{constructor(){this.d=new R,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{BD.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=X1.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=pt(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},WD=new zD,VD="settings",RO=new Q("taskRunning",!1,d(10024,null)),LO=rp(10026,"Tasks"),Vd;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Vd||(Vd={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Vd||(Vd={}));var J7;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(J7||(J7={}));var fl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(fl||(fl={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(fl||(fl={}));var pl;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(pl||(pl={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(pl||(pl={}));var gl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(gl||(gl={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(gl||(gl={}));var Z7;(function(e){e.defaults={echo:!0,reveal:fl.Always,revealProblems:pl.Never,focus:!1,panel:gl.Shared,showReuseMessage:!0,clear:!1}})(Z7||(Z7={}));var qd;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(qd||(qd={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(qd||(qd={}));var X7;(function(e){function t(r){return Me(r)?r:r.value}e.value=t})(X7||(X7={}));var Y7;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Me(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(Y7||(Y7={}));var K7;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(K7||(K7={}));var e9;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(e9||(e9={}));var t9;(function(e){e.parallel="parallel",e.sequence="sequence"})(t9||(t9={}));var Y1;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(Y1||(Y1={}));var r9;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:Y1.default,instanceLimit:1}})(r9||(r9={}));var Gd;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Gd||(Gd={})),function(e){e._default=e.Terminal}(Gd||(Gd={}));var i9;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(i9||(i9={}));var s9;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(s9||(s9={}));var n9;(function(e){e.SingleRun="singleRun",e.Background="background"})(n9||(n9={}));var o9;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(o9||(o9={}));var a9;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(a9||(a9={}));var Qd;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(Qd||(Qd={}));var c9;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(c9||(c9={}));var l9;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(l9||(l9={}));var u9;(function(e){function t(r,i){const s=WD.get(r.type);if(s===void 0){const c=pt(r);return delete c._key,Qd.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=pt(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(d(10025,null,JSON.stringify(r,void 0,0),c));return}}}return Qd.create(n)}e.createTaskIdentifier=t})(u9||(u9={}));var Jd;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Jd||(Jd={}));var Zd;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Zd||(Zd={}));var K1;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(K1||(K1={}));var ml;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=K1.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new Lo(s.process,s.args,s.options)}e.to=i})(ml||(ml={}));var ev;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(ev||(ev={}));var vl;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=ev.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Dn(s.commandLine,s.options):new Dn(s.command,s.args?s.args:[],s.options)}e.to=i})(vl||(vl={}));var cs;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(cs||(cs={}));var h9;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===Os.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=VD),{id:r._id,workspaceFolder:s}}e.from=t})(h9||(h9={}));var tv;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(tv||(tv={}));var Js;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof Lo?o=ml.from(s.execution):s.execution instanceof Dn?o=vl.from(s.execution):s.execution&&s.execution instanceof zg&&(o=cs.from(s.execution));const a=Jd.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Os.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:tv.from(s.group),presentationOptions:Zd.from(s.presentationOptions),problemMatchers:ri(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;ml.is(s.execution)?a=ml.to(s.execution):vl.is(s.execution)?a=vl.to(s.execution):cs.is(s.execution)&&(a=cs.to(s._id,o));const c=Jd.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(x.revive(s.source.scope)):l=Os.Workspace),!c||!l)return;const u=new vh(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=wc.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new wc(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Zd.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(Js||(Js={}));var rv;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(rv||(rv={}));var iv=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},sv=class{constructor(t,r,i,s,n,o,a,c){this.q=new R,this.r=new R,this.s=new R,this.u=new R,this.a=t.getProxy(Z.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new Ue(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new Ue(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(rv.from(t)).then(async r=>{const i=[];for(const s of r){const n=await Js.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof iv))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=rr(()=>i.provider.provideTasks(ct.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await Js.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,ct.None);if(!n)return;this.A(n,i);const o=Js.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return cs.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new rn("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new iv(this,t.id,r)):s=Js.to(t.task,this.b,this.m).then(n=>{if(!n)throw new rn("Unexpected: Task does not exist.");return new iv(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};sv=__decorate([__param(0,Qe),__param(1,ir),__param(2,os),__param(3,la),__param(4,as),__param(5,oa),__param(6,Xe),__param(7,zd)],sv);var nv=class extends sv{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(te.vscodeRemote,{scheme:te.vscodeRemote,authority:"",platform:xk(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=Js.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(cs.is(i.execution))await this.y(i,r,!1);else throw new Vf;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Js.from(o,i.extension);a&&cs.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(cs.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};nv=__decorate([__param(0,Qe),__param(1,ir),__param(2,os),__param(3,la),__param(4,as),__param(5,oa),__param(6,Xe),__param(7,zd)],nv);var d9=ee("IExtHostTask"),qD=class{constructor(){this.f=new Map,this.m=[],this.n=new R,this.o=new R,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(5830,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await Ii(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await Ii(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function GD(e){return e.type&&(e.label||e.program||e.runtime)}var QD=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function JD(e){return!!(e&&e.match(QD))}function f9(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(JD(e.path))return x.parse(e.path);if(ru(e.path))return x.file(e.path)}return e.path}function p9(e){if(typeof e.path=="object"){const t=x.revive(e.path);if(t)return t.scheme===te.file?t.fsPath:t.toString()}return e.path}function ZD(e,t){const r=t?f9:p9,i=pt(e);return g9(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function XD(e,t){const r=t?f9:p9,i=pt(e);return g9(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function g9(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var wl=ee("IExtHostEditorTabs"),m9=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new cm(x.revive(this.b.input.uri));case 2:return new Bh(x.revive(this.b.input.original),x.revive(this.b.input.modified));case 3:return new G5(x.revive(this.b.input.base),x.revive(this.b.input.input1),x.revive(this.b.input.input2),x.revive(this.b.input.result));case 6:return new lm(x.revive(this.b.input.uri),this.b.input.viewType);case 7:return new Q5(this.b.input.viewType);case 4:return new um(x.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new hm(x.revive(this.b.input.original),x.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new J5;case 9:return new Z5(x.revive(this.b.input.uri),x.revive(this.b.input.inputBoxUri));case 10:return new X5;case 11:return new Y5(this.b.input.diffEditors.map(e=>new Bh(x.revive(e.original),x.revive(e.modified))));default:return}}},YD=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new m9(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Ot.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new m9(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},ov=class{constructor(t){this.b=new R,this.c=new R,this.e=[],this.a=t.getProxy(Z.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return so(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?KD(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=RE(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new YD(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=so(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};ov=__decorate([__param(0,Qe)],ov);function KD(e){return e.tabs!==void 0}var eP=0,v9=new WeakMap,Xd=ee("IExtHostTesting"),av=class extends Ee{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new R),this.g=new Map,this.w=this.B(new R),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(Z.MainThreadTesting),this.m=new oP(this.h),this.j=new iP(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Oe.root(a))?.collection.tree.get(a)?.actual??Y6(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Oe.root(c))?.collection.tree.get(c)?.actual??Y6({$mid:16,tests:[o]}),message:Yo.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Oe.root(a));if(c)return Oe.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(un)||[],exclude:n?.exclude.map(o).filter(un)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new Pe,o=n.add(new RI(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let p=0;s&&(p|=2);const m=f.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(p|=8),m?.provideRelatedCode&&(p|=4)),p},h={items:o.root.children,get label(){return i},set label(p){i=p,o.root.label=p,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(p){s=p,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(p){H(t,"testRelatedCode"),f.relatedCodeProvider=p,l.$updateController(r,{capabilities:u()})},createRunProfile:(p,m,w,$,P,A)=>{let L=ja(p);for(;a.has(L);)L++;return new x9(this.h,a,c,this.w.event,r,L,p,m,w,$,P,A)},createTestItem(p,m,w){return new cl(r,p,m,w)},createTestRun:(p,m,w=!0)=>this.j.createTestRun(t,r,o,p,m,w),invalidateTestResults:p=>{if(p===void 0)this.h.$markTestRetired(void 0);else{const m=p instanceof Array?p:[p];this.h.$markTestRetired(m.map(w=>Oe.fromExtHostTestItem(w,r).toString()))}},set resolveHandler(p){o.resolveHandler=p},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add($e(()=>l.$unregisterTestController(r))),this.g.set(r,f),n.add($e(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(p=>l.$publishDiff(r,p.map(Zu.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=ct.None){const i=b9(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:cv[i.kind],targets:[{testIds:t.include?.map(n=>Oe.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(x.revive(t));if(!s)return[];const n=qe.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Oe.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(Oe.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map(mr.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(Zc.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=_m.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=ct.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(Zc.to))),v9.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(Oe.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>Zu.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new At(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>v9.get(o)===t.resultId),s=i&&aP(Oe.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=eP++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(p=>n.tree.get(p)).filter(un),u=t.excludeExtIds.map(p=>s.collection.tree.get(p)).filter(un).filter(p=>l.some(m=>m.fullId.compare(p.fullId)===2));if(!l.length)return{};const h=new Uh(l.some(p=>p.actual instanceof b1)?void 0:l.map(p=>p.actual),u.map(p=>p.actual),c,r),f=sC(t)&&this.j.prepareForMainThreadTestRun(a,h,y9.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(p){return{error:String(p)}}finally{f&&f.hasRunningTasks&&!i.isCancellationRequested&&await Et.toPromise(f.onEnd)}}};av=__decorate([__param(0,Qe),__param(1,Xe),__param(2,Bn),__param(3,la)],av);var tP=1e4,w9;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(w9||(w9={}));var rP=class extends Ee{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new R),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new At(n));const o=this.B(new no(()=>this.I(),tP));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new R;this.y=a.event,this.B($e(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=Oe.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Lc){const u=o.indexOf(t);if(u===-1)return[];c=n.fromTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=qr(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(Yo.from):[Yo.from(u)];if(l.uri&&l.range){const f={range:B.from(l.range),uri:l.uri};for(const p of h)p.location=p.location||f}this.D.$appendTestMessagesInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new At(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Lc?l.fromTests:[];if(u.length){H(this.H,"attributableCoverage");for(const p of u)this.L(p)}const h=l.uri.toString(),f=new Oe([t,i,h]).toString();this.z.set(f,{report:l,extIds:u.map(p=>Oe.fromExtHostTestItem(p,r).toString())}),this.D.$appendCoverage(t,i,Zc.fromFile(r,f,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,Oe.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,Ne.fromString(l),u&&mr.from(u),h&&Oe.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof cl))throw new Xu(e.id);if(this.j.has(Oe.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=zs.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},iP=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=Oe.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=y9.fromPublic(t,r,i,n),c=b9(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:cv[c.kind],id:c.profileId},exclude:i.exclude?.map(u=>Oe.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>Oe.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return Et.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new rP(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},b9=e=>{if(e.profile){if(!(e.profile instanceof x9))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},y9=class x0{static fromPublic(t,r,i,s){return new x0(t,qr(),s,r)}static fromInternal(t,r){return new x0(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},sP=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,zs.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Oe.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},nP=class extends nC{constructor(){super(...arguments),this.z=new R,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:zs.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new sP(this.z)}},oP=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:Zf(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new nP({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},bl=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},x9=class{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,bl(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.h}set supportsContinuousRun(e){e!==this.h&&(this.h=e,bl(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),bl(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,bl(this,this.#e,this.#i,{tag:e?mi.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,bl(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Et.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(un))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){this.controllerId=s,this.profileId=n,this.g=o,this.kind=a,this.runHandler=c,this._tag=u,this.h=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const f=cv[a];if(typeof f!="number")throw new Error(`Unknown TestRunProfile.group ${a}`);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?mi.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}},cv={[Bo.Coverage]:8,[Bo.Debug]:4,[Bo.Run]:2};function aP(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var UO=ee("configurationResolverService"),ot;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(ot||(ot={}));var vr=class extends rn{constructor(e,t){super(t),this.variable=e}},cP=class Ff{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(Cr){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=pt(r);Cr&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):ii&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):xs&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Me(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if($t(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return t3(i,Ff.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(Ff.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Me(c)&&c.match(Ff.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const f=this.a.getFilePath();if(f)return ll(f);throw new vr(h,d(12280,null,r))},l=h=>{const f=c(h);if(this.a.getWorkspaceFolderPathForFile){const p=this.a.getWorkspaceFolderPathForFile();if(p)return ll(p)}throw new vr(h,d(12281,null,r,Pr(f)))},u=h=>{if(o){const f=this.a.getFolderUri(o);if(f)return f;throw new vr(h,d(12282,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new vr(h,d(12283,null,r)):new vr(h,d(12284,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[Cr?o.toLowerCase():o];if(Me(h))return h}return""}throw new vr(ot.Env,d(12285,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(St(h))throw new vr(ot.Config,d(12286,null,r,o));if($t(h))throw new vr(ot.Config,d(12287,null,r,o));return h}throw new vr(ot.Config,d(12288,null,r));case"command":return this.p(ot.Command,r,o,n,"command");case"input":return this.p(ot.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new vr(ot.ExtensionInstallFolder,d(12289,null,r,o));return this.n(h.extensionLocation)}throw new vr(ot.ExtensionInstallFolder,d(12290,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return ll(this.n(u(ot.WorkspaceFolder)));case"cwd":return s||o?ll(this.n(u(ot.Cwd))):eo();case"workspaceRootFolderName":case"workspaceFolderBasename":return ll(Pr(this.n(u(ot.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new vr(ot.UserHome,d(12291,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new vr(ot.LineNumber,d(12292,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new vr(ot.SelectedText,d(12293,null,r))}case"file":return c(ot.File);case"fileWorkspaceFolder":return l(ot.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return Pr(l(ot.FileWorkspaceFolderBasename));case"relativeFile":return s||o?Na(this.n(u(ot.RelativeFile)),c(ot.RelativeFile)):c(ot.RelativeFile);case"relativeFileDirname":{const h=ro(c(ot.RelativeFileDirname));if(s||o){const f=Na(this.n(u(ot.RelativeFileDirname)),h);return f.length===0?".":f}return h}case"fileDirname":return ro(c(ot.FileDirname));case"fileExtname":return up(c(ot.FileExtname));case"fileBasename":return Pr(c(ot.FileBasename));case"fileBasenameNoExtension":{const h=Pr(c(ot.FileBasenameNoExtension));return h.slice(0,h.length-up(h).length)}case"fileDirnameBasename":return Pr(ro(c(ot.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return si;default:try{const h=o?`${i}:${o}`:i;return this.p(ot.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new vr(t,d(12294,null,r))}return r}},lv=ee("IExtHostVariableResolverProvider"),lP=class extends cP{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Bh||l.input instanceof hm)return l.input.modified;if(l.input instanceof cm||l.input instanceof um||l.input instanceof lm)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>eo(),getExecPath:()=>ap.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return to(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return to(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(ap))}},uv=class extends Ee{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new $r(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new lP(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};uv=__decorate([__param(0,Qs),__param(1,os),__param(2,la),__param(3,as),__param(4,wl)],uv);var E9=ee("IExtHostDebugService"),hv=class extends Ee{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Y=r,this.Z=i,this.$=s,this.ab=n,this.bb=o,this.cb=a,this.db=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new R),this.z=this.B(new R),this.C=this.B(new R),this.F=this.B(new R),this.u=t.getProxy(Z.MainThreadDebugService),this.I=this.B(new R),this.L=this.B(new R),this.G=new hP(this.u),this.H=new Map,this.Z.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.fb(l)})),this.fb(l)})}async $getVisualizerTreeItem(t,r){const i=this.gb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.eb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=Ye.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),$e(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.eb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.eb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}eb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),Jm.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,x.parse(s)}else{if(i.path)return x.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}fb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)GD(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.zb(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.cb.executeCommand(i.command,...i.arguments||[])}gb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.gb(i),o=this.yb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Ab(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.zb(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=Ye.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),$e(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.vb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof Tn){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Rn&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.vb([],r,[]);const i=r.filter(o=>o instanceof Tn).map(o=>o.id),s=r.filter(o=>o instanceof Rn).map(o=>o.id),n=r.filter(o=>o instanceof Eh).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.db.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Ah.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new Ue(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new Ue(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new Ue(()=>{});if(!this.rb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.ob(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new Ue(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new Ue(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new Ue(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.xb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.bb.getResolver()).resolveAnyAsync(i,r)}hb(t,r){if(t instanceof Ec)return new fP(t.implementation)}ib(){}async $startDASession(t,r){const i=this,s=await this.wb(r);return this.tb(this.ob(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.hb(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.sb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.ib());try{if(this.U){const f=await this.U.sign(u.arguments.value);h.body={signature:f},a.sendResponse(h)}else throw new Error("no signer")}catch(f){h.success=!1,h.message=f.message,a.sendResponse(h)}}else c&&c.onDidSendMessage&&c.onDidSendMessage(l),l=XD(l,!0),i.u.$acceptDAMessage(t,l)}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=ZD(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Rn(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new Eh(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=x.revive(n.uri);a=new Tn(new jr(c,new Re(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}PC(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Rn&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof Tn&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new jr(x.revive(n.uri),new Re(n.line,n.character))}s.push(o)}}}this.vb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.wb(t.sessionId);t.kind==="thread"?r=new H5(i.api,t.threadId):r=new U5(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return rr(async()=>{const s=this.qb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.xb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return rr(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.xb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return rr(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.xb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.pb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.wb(r);return this.tb(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.jb(n)})}async $acceptDebugSessionStarted(t){const r=await this.wb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.wb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.wb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.wb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.wb(t)).api,event:r.event,body:r.body};this.F.fire(s)}jb(t){if(t instanceof kh)return this.kb(t);if(t instanceof xc)return this.lb(t);if(t instanceof $h)return this.mb(t);if(t instanceof Ec)return this.nb(t);throw new Error("convertToDto unexpected type")}kb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}lb(t){return{type:"server",port:t.port,host:t.host}}mb(t){return{type:"pipeServer",path:t.path}}nb(t){return{type:"implementation"}}ob(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}pb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}qb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}rb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}sb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>rr(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=Ft(n);if(o.length>0)return new dP(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async tb(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new xc(i));if(t){const n=await this.Z.getExtensionRegistry();return rr(()=>t.createDebugAdapterDescriptor(r.api,this.ub(r,n))).then(o=>{if(o)return o})}const s=await this.Z.getExtensionRegistry();return Promise.resolve(this.ub(r,s))}ub(t,r){}vb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async wb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.xb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new uP(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}xb(t){if(t){const r=x.revive(t);return this.Y.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}yb(t,r){return`${t}\0${r}`}zb(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Ab(t){const r=this.Bb(t);let i,s;return"id"in r?s=qt.asClassName(r):i=r,{iconPath:i,iconClass:s}}Bb(t){if(t instanceof or)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?x.file(r):r,light:typeof i=="string"?x.file(i):i}}};hv=__decorate([__param(0,Qe),__param(1,os),__param(2,Qs),__param(3,as),__param(4,wl),__param(5,lv),__param(6,Bn),__param(7,Xd)],hv);var uP=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},hP=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},dP=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},fP=class extends qD{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},dv=class extends hv{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};dv=__decorate([__param(0,Qe),__param(1,os),__param(2,Qs),__param(3,as),__param(4,wl),__param(5,lv),__param(6,Bn),__param(7,Xd)],dv);function pP(e){return"uri"in e&&"ranges"in e&&"preview"in e}function gP(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var k9=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=gP(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>Ft(s).flat())}};function $9(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:mP(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function mP(e){return{matchLines:e?.matchLines??Ym.matchLines,charsPerLine:e?.charsPerLine??Ym.charsPerLine}}function S9(e){if(pP(e)){const t=ri(e.ranges).map((r,i)=>{const n=ri(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new Vs(e.uri,t,e.preview.text)}else return new Xm(e.uri,e.text,e.lineNumber)}var vP=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{C9(a)&&r.report(S9(a))};return(async()=>Ft(await Promise.all($9(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Ft(ri(a.message))}))}},wP=class{constructor(e){this.a=e,this.name=this.a.name}provideAITextSearchResults(e,t,r,i){const s=a=>{C9(a)&&r.report(S9(a))};return(async()=>Ft(await Promise.all($9(t).map(a=>this.a.provideAITextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Ft(ri(a.message))}))}};function C9(e){if(bP(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function bP(e){return!!e.preview}var yP=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&yo(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&yo(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=Pr(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(hn(n)))})})}async q(e,t){const r=new At,i=e.map(c=>this.r(c)),s=this.o instanceof k9?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??n6,session:s},o=Qi.forUris();e.forEach(c=>{const l=new v6(this.l,c),u=!l.hasSiblingExcludeClauses();o.set(c.folder,{queryTester:l,noSiblingsClauses:u,folder:c.folder,tree:this.s()})});let a;try{this.j.add(r),a=sn.create();const c=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),l=a.elapsed(),u=sn.create();return this.h&&!this.f||(c&&c.forEach(h=>{const f=o.findSubstr(h),p=je.relative(f.folder.path,h.path);if(f.noSiblingsClauses){const m=Pr(h.path);this.w(t,{base:f.folder,relativePath:p,basename:m});return}this.u(f.tree,f.folder,p,t)}),this.h&&!this.f)?null:(o.forEach(h=>{this.v(h.tree,h.queryTester,t)}),{providerTime:l,postProcessTime:u.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=ta(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:ta(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:ta(this.l.excludePattern,void 0)}]);const i=b6(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=Pr(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=Pr(n),a=ro(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=ZC(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:p}=h;if(r.matchesExcludesSync(f,p,n!==p?c:void 0))continue;const m=t[f];if(m)o(m);else{if(f===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},xP=class{constructor(){this.a=new Object,this.tokenSource=new At}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},EP=class Gx{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new yP(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,Gx.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new xP),this.b.get(t)}d(t){return t.relativePath?{resource:nr(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},I9=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new At(t);return new Promise((s,n)=>{this.b=new $P(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof Vs&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const f=c instanceof Vs;(h>0||!f)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=hn(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Vs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Vs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=Qi.forUris(()=>!0);e.forEach((l,u)=>{const h=new v6(this.j,l);i.set(l.folder,{queryTester:h,folder:l.folder,folderIdx:u})});const s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findSubstr(l.uri),h=u.folder.scheme===te.file?JC(()=>this.g.readdir(xp(l.uri))):void 0,f=Yw(u.folder,l.uri);if(f){const p=u.queryTester.includedInQuery(f,Pr(f),h);As(p)?s.push(p.then(m=>{m&&t(l,u.folderIdx)})):p&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??n6,previewOptions:this.j.previewOptions??Ym,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(kP(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=ta(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:ta(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:ta(this.j.excludePattern,void 0)}]);const i=b6(r);return{folder:x.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function kP(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var $P=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new CP(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Xw(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(SP(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function SP(e){return e instanceof Vs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var CP=class E0{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<E0.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},E0.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},D9=ee("IExtHostSearch"),fv=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(Z.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new EP}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new vP(r)),this.c.$registerTextSearchProvider(i,this.t(t)),$e(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),$e(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProviderOld(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,new wP(r)),this.c.$registerAITextSearchProvider(i,this.t(t)),$e(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),$e(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new k9(r)),this.c.$registerFileSearchProvider(i,this.t(t)),$e(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),$e(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=pv(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=pv(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=pv(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new I9({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new I9({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};fv=__decorate([__param(0,Qe),__param(1,pu),__param(2,Xe)],fv);function pv(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(IP),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>x.revive(t))}}function IP(e){return hr(e)}var gv,mv=class{static{gv=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.d;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t){this.c=new R,this.onDidChangeWindowState=this.c.event,this.d=gv.a,this.b=t.getProxy(Z.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:i})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",i)})}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.d[t]&&(this.d={...this.d,[t]:r},this.c.fire(this.d))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=x.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return au(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===te.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if(au(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return x.from(i)}};mv=gv=__decorate([__param(0,Qe)],mv);var P9=ee("IExtHostWindow"),vv=class extends P${constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>hr(i))),this.r=t.getProxy(Z.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(x.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.r.$setVisibility(t,r)}s(t,r,i){return new DP(this.r,t,r,i)}};vv=__decorate([__param(0,Qe),__param(1,ir)],vv);var DP=class extends Lb{constructor(e,t,r,i){super(i?.logLevel==="always"),this.r=e,this.s=t,this.m=!1,this.n=[],this.setLevel(r),this.r.$createLogger(t,i).then(()=>{this.u(this.n),this.m=!0})}g(e,t){const r=[[e,t]];this.m?this.u(r):this.n.push(...r)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},A9=ee("IExtHostTerminalShellIntegration"),wv=class extends Ee{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new R,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new R,this.onDidStartTerminalShellExecution=this.f.event,this.g=new R,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(Z.MainThreadTerminalShellIntegration),this.B($e(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new PP(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,x.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$cwdChange(t,r){this.b.get(t)?.setCwd(x.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};wv=__decorate([__param(0,Qe),__param(1,oa)],wv);var PP=class extends Ee{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new Pe),this.f=this.B(new R),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new R),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new R),this.onDidRequestEndExecution=this.h.event;const r=this;this.value={get cwd(){return r.c},executeCommand(i,s){let n=i;s&&(n+=` "${s.map(c=>`${c.replaceAll('"','\\"')}`).join('" "')}"`),r.g.fire(n);const o={value:n,confidence:mh.High,isTrusted:!0},a=r.startShellExecution(o,r.c,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new AP(e,t??this.c);r?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:i.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;x.isUri(this.c)?t=!x.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},AP=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return Ua.EMPTY;this.a=new TP}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},TP=class extends Ee{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new Ci);const e=this.a;return new Ua(async r=>{this.b.push(r),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};it(U1,O1,1),it(qa,vv,1),it(zd,Q1,1),it(Bn,x1,0),it(C1,I1,0),it(P1,A1,0),it(as,n1,0),it(Hd,h1,0),it(Xd,av,0),it(E9,dv,0),it(B7,V1,0),it(la,G1,0),it(H1,j1,0),it(lo,G$,0),it(_7,W1,1),it(D9,fv,0),it(u1,V6,0),it(d9,nv,0),it(oa,$1,0),it(A9,wv,0),it(v1,w1,0),it(P9,mv,0),it(os,t1,0),it(M1,N7,0),it(jd,y1,0),it(wl,ov,0),it(lv,uv,0);var RP=class extends Ee{constructor(e,t=[]){super(),this.a=new D$([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},bv=class extends RP{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?d(2722,null):d(t?2723:2724,null);super(r.createLogger(s,{name:n}))}};bv=__decorate([__param(1,qa),__param(2,ir)],bv);var T9={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},R9;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(R9||(R9={}));var LP=8,NP=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Je=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return Kd(e,t)}compute(e,t,r){return r}},Yd=class{constructor(e,t){this.newValue=e,this.didChange=t}};function Kd(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Yd(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Bi(e,t);return new Yd(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=Kd(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new Yd(e,r)}var yl=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Kd(e,t)}validate(e){return this.defaultValue}},ua=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return Kd(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function re(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var Se=class extends ua{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return re(e,this.defaultValue)}};function FP(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var Ge=class Qx extends ua{static clampedInt(t,r,i,s){return FP(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return Qx.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Mi=class Jx extends ua{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(Jx.float(t,this.defaultValue))}},cr=class Zx extends ua{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return Zx.string(t,this.defaultValue)}};function ht(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var nt=class extends ua{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return ht(e,this.defaultValue,this.c)}},ef=class extends Je{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function MP(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var OP=class extends Je{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(307,null),d(308,null),d(309,null)],default:"auto",tags:["accessibility"],description:d(310,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},UP=class extends Je{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(311,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(312,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:re(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:re(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},L9;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(L9||(L9={}));function HP(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Oi;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(Oi||(Oi={}));function jP(e){switch(e){case"line":return Oi.Line;case"block":return Oi.Block;case"underline":return Oi.Underline;case"line-thin":return Oi.LineThin;case"block-outline":return Oi.BlockOutline;case"underline-thin":return Oi.UnderlineThin}}var _P=class extends yl{constructor(){super(145)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(76)==="default"?i.push("mouse-default"):t.get(76)==="copy"&&i.push("mouse-copy"),t.get(114)&&i.push("showUnused"),t.get(143)&&i.push("showDeprecated"),i.join(" ")}},BP=class extends Se{constructor(){super(38,"emptySelectionClipboard",!0,{description:d(313,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},zP=class extends Je{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(314,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(315,null),d(316,null),d(317,null)],description:d(318,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(319,null),d(320,null),d(321,null)],description:d(322,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(323,null),included:ii},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(324,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(325,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:re(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ht(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ht(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:re(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:re(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:re(t.loop,this.defaultValue.loop)}}},WP=class wa extends Je{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",wa.OFF,{anyOf:[{type:"boolean",description:d(326,null)},{type:"string",description:d(327,null)}],description:d(328,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?wa.OFF:t==="true"?wa.ON:t:t?wa.ON:wa.OFF}},VP=class ba extends Je{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",ba.OFF,{anyOf:[{type:"boolean",description:d(329,null)},{type:"string",description:d(330,null)}],description:d(331,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?ba.OFF:t==="true"?ba.TRANSLATE:t:t?ba.TRANSLATE:ba.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},qP=class extends yl{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},GP=class extends ua{constructor(){super(54,"fontSize",us.fontSize,{type:"number",minimum:6,maximum:100,default:us.fontSize,description:d(332,null)})}validate(e){const t=Mi.float(e,this.defaultValue);return t===0?us.fontSize:Mi.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},QP=class ya extends Je{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",us.fontWeight,{anyOf:[{type:"number",minimum:ya.d,maximum:ya.e,errorMessage:d(333,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ya.c}],default:us.fontWeight,description:d(334,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Ge.clampedInt(t,us.fontWeight,ya.d,ya.e))}},JP=class extends Je{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(335,null),d(336,null),d(337,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(338,null)},"editor.gotoLocation.multipleDefinitions":{description:d(339,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(340,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(341,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(342,null),...t},"editor.gotoLocation.multipleReferences":{description:d(343,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:d(344,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:d(345,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:d(346,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:d(347,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:d(348,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:ht(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??ht(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??ht(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??ht(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??ht(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??ht(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??ht(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:cr.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:cr.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:cr.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:cr.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:cr.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:cr.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},ZP=class extends Je{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(349,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(350,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(351,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(352,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(353,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),delay:Ge.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:re(t.sticky,this.defaultValue.sticky),hidingDelay:Ge.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:re(t.above,this.defaultValue.above)}}},N9;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(N9||(N9={}));var XP=class Mf extends yl{constructor(){super(148)}compute(t,r,i){return Mf.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const p=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,$=t.verticalScrollbarWidth,P=t.viewLineCount,A=t.remainingWidth,L=t.isViewportWrapping,z=h?2:3;let W=Math.floor(n*s);const J=W/n;let ne=!1,Y=!1,se=z*f,Te=f/n,ve=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:ae,extraLinesBeforeFirstLine:xe,extraLinesBeyondLastLine:pe,desiredRatio:Ke,minimapLineCount:ze}=Mf.computeContainedMinimapLineCount({viewLineCount:P,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(P/ze>1)ne=!0,Y=!0,f=1,se=1,Te=f/n;else{let xt=!1,jt=f+1;if(m==="fit"){const rt=Math.ceil((xe+P+pe)*se);L&&a&&A<=r.stableFitRemainingWidth?(xt=!0,jt=r.stableFitMaxMinimapScale):xt=rt>W}if(m==="fill"||xt){ne=!0;const rt=f;se=Math.min(c*n,Math.max(1,Math.floor(1/Ke))),L&&a&&A<=r.stableFitRemainingWidth&&(jt=r.stableFitMaxMinimapScale),f=Math.min(jt,Math.max(1,Math.floor(se/z))),f>rt&&(ve=Math.min(2,f/rt)),Te=f/n/ve,W=Math.ceil(Math.max(ae,xe+P+pe)*se),L?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=A,r.stableFitMaxMinimapScale=f):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const Ze=Math.floor(p*Te),at=Math.min(Ze,Math.max(0,Math.floor((A-$-2)*Te/(l+Te)))+LP);let X=Math.floor(n*at);const q=X/n;X=Math.floor(X*ve);const ie=h?1:2,G=w==="left"?0:i-at-$;return{renderMinimap:ie,minimapLeft:G,minimapWidth:at,minimapHeightIsEditorHeight:ne,minimapIsSampling:Y,minimapScale:f,minimapLineHeight:se,minimapCanvasInnerWidth:X,minimapCanvasInnerHeight:W,minimapCanvasOuterWidth:q,minimapCanvasOuterHeight:J}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(140),f=h==="inherit"?t.get(139):h,p=f==="inherit"?t.get(135):f,m=t.get(138),w=r.isDominatedByLongLines,$=t.get(59),P=t.get(70).renderType!==0,A=t.get(71),L=t.get(108),z=t.get(86),W=t.get(75),J=t.get(106),ne=J.verticalScrollbarSize,Y=J.verticalHasArrows,se=J.arrowSize,Te=J.horizontalScrollbarSize,ve=t.get(45),Ze=t.get(113)!=="never";let at=t.get(68);ve&&Ze&&(at+=16);let X=0;if(P){const Kr=Math.max(o,A);X=Math.round(Kr*c)}let q=0;$&&(q=n*r.glyphMarginDecorationLaneCount);let ie=0,G=ie+q,ae=G+X,xe=ae+at;const pe=i-q-X-at;let Ke=!1,ze=!1,yt=-1;f==="inherit"&&w?(Ke=!0,ze=!0):p==="on"||p==="bounded"?ze=!0:p==="wordWrapColumn"&&(yt=m);const xt=Mf.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:L,paddingTop:z.top,paddingBottom:z.bottom,minimap:W,verticalScrollbarWidth:ne,viewLineCount:u,remainingWidth:pe,isViewportWrapping:ze},r.memory||new NP);xt.renderMinimap!==0&&xt.minimapLeft===0&&(ie+=xt.minimapWidth,G+=xt.minimapWidth,ae+=xt.minimapWidth,xe+=xt.minimapWidth);const jt=pe-xt.minimapWidth,rt=Math.max(1,Math.floor((jt-ne-2)/a)),Qt=Y?se:0;return ze&&(yt=Math.max(1,rt),p==="bounded"&&(yt=Math.min(yt,m))),{width:i,height:s,glyphMarginLeft:ie,glyphMarginWidth:q,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:G,lineNumbersWidth:X,decorationsLeft:ae,decorationsWidth:at,contentLeft:xe,contentWidth:jt,minimap:xt,viewportColumn:rt,isWordWrapMinified:Ke,isViewportWrapping:ze,wrappingColumn:yt,verticalScrollbarWidth:ne,horizontalScrollbarHeight:Te,overviewRuler:{top:Qt,width:ne,height:s-2*Qt,right:0}}}},YP=class extends Je{constructor(){super(142,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(354,null),d(355,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(356,null)}})}validate(e){return ht(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},ls;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(ls||(ls={}));var KP=class extends Je{constructor(){const e={enabled:ls.OnCode};super(67,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ls.Off,ls.OnCode,ls.On],default:e.enabled,enumDescriptions:[d(357,null),d(358,null),d(359,null)],description:d(360,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ht(e.enabled,this.defaultValue.enabled,[ls.Off,ls.OnCode,ls.On])}}},eA=class extends Je{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(118,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(361,null),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(362,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(363,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(364,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),maxLineCount:Ge.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:ht(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:re(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},tA=class extends Je{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(144,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(365,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(366,null),d(367,null,ii?"Ctrl+Option":"Ctrl+Alt"),d(368,null,ii?"Ctrl+Option":"Ctrl+Alt"),d(369,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(370,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(371,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(372,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(373,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:ht(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ge.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:cr.string(t.fontFamily,this.defaultValue.fontFamily),padding:re(t.padding,this.defaultValue.padding),maximumLength:Ge.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},rA=class extends Je{constructor(){super(68,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ge.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?Ge.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},iA=class extends Mi{constructor(){super(69,"lineHeight",us.lineHeight,e=>Mi.clamp(e,0,150),{markdownDescription:d(374,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},sA=class extends Je{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(75,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(375,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(376,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(377,null),d(378,null),d(379,null)],default:e.size,description:d(380,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(381,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(382,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(383,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(384,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(385,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(386,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(387,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(388,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(389,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),autohide:re(t.autohide,this.defaultValue.autohide),size:ht(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ht(t.side,this.defaultValue.side,["right","left"]),showSlider:ht(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:re(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ge.clampedInt(t.scale,1,1,3),maxColumn:Ge.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:re(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:re(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Mi.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Mi.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function nA(e){return e==="ctrlCmd"?ii?"metaKey":"ctrlKey":"altKey"}var oA=class extends Je{constructor(){super(86,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(390,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(391,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ge.clampedInt(t.top,0,0,1e3),bottom:Ge.clampedInt(t.bottom,0,0,1e3)}}},aA=class extends Je{constructor(){const e={enabled:!0,cycle:!0};super(88,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(392,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(393,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),cycle:re(t.cycle,this.defaultValue.cycle)}}},cA=class extends yl{constructor(){super(146)}compute(e,t,r){return e.pixelRatio}},lA=class extends Je{constructor(){super(90,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},uA=class extends Je{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(394,null),d(395,null),d(396,null)]}];super(92,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(397,null)},comments:{anyOf:t,default:e.comments,description:d(398,null)},other:{anyOf:t,default:e.other,description:d(399,null)}},default:e,markdownDescription:d(400,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=ht(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=ht(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=ht(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},F9;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(F9||(F9={}));var hA=class extends Je{constructor(){super(70,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(401,null),d(402,null),d(403,null),d(404,null)],default:"on",description:d(405,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},dA=class extends Je{constructor(){const e=[],t={type:"number",description:d(406,null)};super(105,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(407,null),format:"color-hex"}}}]},default:e,description:d(408,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:Ge.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:Ge.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},fA=class extends Je{constructor(){super(95,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function M9(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var pA=class extends Je{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(106,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(409,null),d(410,null),d(411,null)],default:"auto",description:d(412,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(413,null),d(414,null),d(415,null)],default:"auto",description:d(416,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(417,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(418,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(419,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(420,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=Ge.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Ge.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ge.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:M9(t.vertical,this.defaultValue.vertical),horizontal:M9(t.horizontal,this.defaultValue.horizontal),useShadows:re(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:re(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:re(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:re(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:re(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:Ge.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Ge.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:re(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:re(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},vi="inUntrustedWorkspace",zn={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},gA=class extends Je{constructor(){const e={nonBasicASCII:vi,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:vi,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(128,"unicodeHighlight",e,{[zn.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,vi],default:e.nonBasicASCII,description:d(421,null)},[zn.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(422,null)},[zn.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(423,null)},[zn.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,vi],default:e.includeComments,description:d(424,null)},[zn.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,vi],default:e.includeStrings,description:d(425,null)},[zn.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(426,null),additionalProperties:{type:"boolean"}},[zn.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(427,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(ci(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(ci(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new Yd(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ha(t.nonBasicASCII,vi,[!0,!1,vi]),invisibleCharacters:re(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:re(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ha(t.includeComments,vi,[!0,!1,vi]),includeStrings:ha(t.includeStrings,vi,[!0,!1,vi]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},mA=class extends Je{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(428,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(429,null),d(430,null),d(431,null)],description:d(432,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(433,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(434,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(435,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),mode:ht(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ht(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:re(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:re(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:cr.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:re(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},vA=class extends Je{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(65,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:d(436,null)},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(437,null),d(438,null),d(439,null)],description:d(440,null)},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:d(441,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showToolbar:ht(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:cr.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:re(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},wA=class extends Je{constructor(){const e={enabled:T9.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:T9.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(442,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(443,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:re(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},bA=class extends Je{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(444,null),d(445,null),d(446,null)],default:e.bracketPairs,description:d(447,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(448,null),d(449,null),d(450,null)],default:e.bracketPairsHorizontal,description:d(451,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(452,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(453,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(454,null),d(455,null),d(456,null)],default:e.highlightActiveIndentation,description:d(457,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ha(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ha(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:re(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:re(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ha(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function ha(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var yA=class extends Je{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(121,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(458,null),d(459,null)],default:e.insertMode,description:d(460,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(461,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(462,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(463,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(464,null),d(465,null),d(466,null),d(467,null)],default:e.selectionMode,markdownDescription:d(468,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(469,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(470,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(471,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(472,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(473,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(474,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(475,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(476,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(477,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(478,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(479,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(480,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(481,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(482,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(483,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(484,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(485,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(486,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(505,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ht(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:re(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:re(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:re(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:re(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ht(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:re(t.showIcons,this.defaultValue.showIcons),showStatusBar:re(t.showStatusBar,this.defaultValue.showStatusBar),preview:re(t.preview,this.defaultValue.preview),previewMode:ht(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:re(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:re(t.showMethods,this.defaultValue.showMethods),showFunctions:re(t.showFunctions,this.defaultValue.showFunctions),showConstructors:re(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:re(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:re(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:re(t.showFields,this.defaultValue.showFields),showVariables:re(t.showVariables,this.defaultValue.showVariables),showClasses:re(t.showClasses,this.defaultValue.showClasses),showStructs:re(t.showStructs,this.defaultValue.showStructs),showInterfaces:re(t.showInterfaces,this.defaultValue.showInterfaces),showModules:re(t.showModules,this.defaultValue.showModules),showProperties:re(t.showProperties,this.defaultValue.showProperties),showEvents:re(t.showEvents,this.defaultValue.showEvents),showOperators:re(t.showOperators,this.defaultValue.showOperators),showUnits:re(t.showUnits,this.defaultValue.showUnits),showValues:re(t.showValues,this.defaultValue.showValues),showConstants:re(t.showConstants,this.defaultValue.showConstants),showEnums:re(t.showEnums,this.defaultValue.showEnums),showEnumMembers:re(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:re(t.showKeywords,this.defaultValue.showKeywords),showWords:re(t.showWords,this.defaultValue.showWords),showColors:re(t.showColors,this.defaultValue.showColors),showFiles:re(t.showFiles,this.defaultValue.showFiles),showReferences:re(t.showReferences,this.defaultValue.showReferences),showFolders:re(t.showFolders,this.defaultValue.showFolders),showTypeParameters:re(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:re(t.showSnippets,this.defaultValue.showSnippets),showUsers:re(t.showUsers,this.defaultValue.showUsers),showIssues:re(t.showIssues,this.defaultValue.showIssues)}}},xA=class extends Je{constructor(){super(116,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(506,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(507,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:re(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:re(e.selectSubwords,this.defaultValue.selectSubwords)}}},EA=class extends Je{constructor(){const e=[];super(133,"wordSegmenterLocales",e,{anyOf:[{description:d(508,null),type:"string"},{description:d(509,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},O9;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(O9||(O9={}));var kA=class extends Je{constructor(){super(141,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(510,null),d(511,null),d(512,null),d(513,null)],description:d(514,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},$A=class extends yl{constructor(){super(149)}compute(e,t,r){const i=t.get(148);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},SA=class extends Je{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(515,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(516,null),enum:["afterDrop","never"],enumDescriptions:[d(517,null),d(518,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showDropSelector:ht(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},CA=class extends Je{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(87,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(519,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(520,null),enum:["afterPaste","never"],enumDescriptions:[d(521,null),d(522,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showPasteSelector:ht(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},IA="Consolas, 'Courier New', monospace",DA="Menlo, Monaco, 'Courier New', monospace",PA="'Droid Sans Mono', 'monospace', monospace",us={fontFamily:ii?DA:xs?PA:IA,fontWeight:"normal",fontSize:ii?12:14,lineHeight:0,letterSpacing:0},AA=[];function O(e){return AA[e.id]=e,e}var U9;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.inlineEdit=65]="inlineEdit",e[e.letterSpacing=66]="letterSpacing",e[e.lightbulb=67]="lightbulb",e[e.lineDecorationsWidth=68]="lineDecorationsWidth",e[e.lineHeight=69]="lineHeight",e[e.lineNumbers=70]="lineNumbers",e[e.lineNumbersMinChars=71]="lineNumbersMinChars",e[e.linkedEditing=72]="linkedEditing",e[e.links=73]="links",e[e.matchBrackets=74]="matchBrackets",e[e.minimap=75]="minimap",e[e.mouseStyle=76]="mouseStyle",e[e.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=78]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",e[e.multiCursorModifier=80]="multiCursorModifier",e[e.multiCursorPaste=81]="multiCursorPaste",e[e.multiCursorLimit=82]="multiCursorLimit",e[e.occurrencesHighlight=83]="occurrencesHighlight",e[e.overviewRulerBorder=84]="overviewRulerBorder",e[e.overviewRulerLanes=85]="overviewRulerLanes",e[e.padding=86]="padding",e[e.pasteAs=87]="pasteAs",e[e.parameterHints=88]="parameterHints",e[e.peekWidgetDefaultFocus=89]="peekWidgetDefaultFocus",e[e.placeholder=90]="placeholder",e[e.definitionLinkOpensInPeek=91]="definitionLinkOpensInPeek",e[e.quickSuggestions=92]="quickSuggestions",e[e.quickSuggestionsDelay=93]="quickSuggestionsDelay",e[e.readOnly=94]="readOnly",e[e.readOnlyMessage=95]="readOnlyMessage",e[e.renameOnType=96]="renameOnType",e[e.renderControlCharacters=97]="renderControlCharacters",e[e.renderFinalNewline=98]="renderFinalNewline",e[e.renderLineHighlight=99]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=100]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=101]="renderValidationDecorations",e[e.renderWhitespace=102]="renderWhitespace",e[e.revealHorizontalRightPadding=103]="revealHorizontalRightPadding",e[e.roundedSelection=104]="roundedSelection",e[e.rulers=105]="rulers",e[e.scrollbar=106]="scrollbar",e[e.scrollBeyondLastColumn=107]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=108]="scrollBeyondLastLine",e[e.scrollPredominantAxis=109]="scrollPredominantAxis",e[e.selectionClipboard=110]="selectionClipboard",e[e.selectionHighlight=111]="selectionHighlight",e[e.selectOnLineNumbers=112]="selectOnLineNumbers",e[e.showFoldingControls=113]="showFoldingControls",e[e.showUnused=114]="showUnused",e[e.snippetSuggestions=115]="snippetSuggestions",e[e.smartSelect=116]="smartSelect",e[e.smoothScrolling=117]="smoothScrolling",e[e.stickyScroll=118]="stickyScroll",e[e.stickyTabStops=119]="stickyTabStops",e[e.stopRenderingLineAfter=120]="stopRenderingLineAfter",e[e.suggest=121]="suggest",e[e.suggestFontSize=122]="suggestFontSize",e[e.suggestLineHeight=123]="suggestLineHeight",e[e.suggestOnTriggerCharacters=124]="suggestOnTriggerCharacters",e[e.suggestSelection=125]="suggestSelection",e[e.tabCompletion=126]="tabCompletion",e[e.tabIndex=127]="tabIndex",e[e.unicodeHighlighting=128]="unicodeHighlighting",e[e.unusualLineTerminators=129]="unusualLineTerminators",e[e.useShadowDOM=130]="useShadowDOM",e[e.useTabStops=131]="useTabStops",e[e.wordBreak=132]="wordBreak",e[e.wordSegmenterLocales=133]="wordSegmenterLocales",e[e.wordSeparators=134]="wordSeparators",e[e.wordWrap=135]="wordWrap",e[e.wordWrapBreakAfterCharacters=136]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=137]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=138]="wordWrapColumn",e[e.wordWrapOverride1=139]="wordWrapOverride1",e[e.wordWrapOverride2=140]="wordWrapOverride2",e[e.wrappingIndent=141]="wrappingIndent",e[e.wrappingStrategy=142]="wrappingStrategy",e[e.showDeprecated=143]="showDeprecated",e[e.inlayHints=144]="inlayHints",e[e.editorClassName=145]="editorClassName",e[e.pixelRatio=146]="pixelRatio",e[e.tabFocusMode=147]="tabFocusMode",e[e.layoutInfo=148]="layoutInfo",e[e.wrappingInfo=149]="wrappingInfo",e[e.defaultColorDecorators=150]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=151]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=152]="inlineCompletionsAccessibilityVerbose"})(U9||(U9={}));var GO={acceptSuggestionOnCommitCharacter:O(new Se(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(523,null)})),acceptSuggestionOnEnter:O(new nt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(524,null),""],markdownDescription:d(525,null)})),accessibilitySupport:O(new OP),accessibilityPageSize:O(new Ge(3,"accessibilityPageSize",10,1,1073741824,{description:d(526,null),tags:["accessibility"]})),ariaLabel:O(new cr(4,"ariaLabel",d(527,null))),ariaRequired:O(new Se(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:O(new Se(8,"screenReaderAnnounceInlineSuggestion",!0,{description:d(528,null),tags:["accessibility"]})),autoClosingBrackets:O(new nt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(529,null),d(530,null),""],description:d(531,null)})),autoClosingComments:O(new nt(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(532,null),d(533,null),""],description:d(534,null)})),autoClosingDelete:O(new nt(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(535,null),""],description:d(536,null)})),autoClosingOvertype:O(new nt(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(537,null),""],description:d(538,null)})),autoClosingQuotes:O(new nt(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(539,null),d(540,null),""],description:d(541,null)})),autoIndent:O(new ef(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],MP,{enumDescriptions:[d(542,null),d(543,null),d(544,null),d(545,null),d(546,null)],description:d(547,null)})),automaticLayout:O(new Se(13,"automaticLayout",!1)),autoSurround:O(new nt(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(548,null),d(549,null),d(550,null),""],description:d(551,null)})),bracketPairColorization:O(new wA),bracketPairGuides:O(new bA),stickyTabStops:O(new Se(119,"stickyTabStops",!1,{description:d(552,null)})),codeLens:O(new Se(17,"codeLens",!0,{description:d(553,null)})),codeLensFontFamily:O(new cr(18,"codeLensFontFamily","",{description:d(554,null)})),codeLensFontSize:O(new Ge(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(555,null)})),colorDecorators:O(new Se(20,"colorDecorators",!0,{description:d(556,null)})),colorDecoratorActivatedOn:O(new nt(151,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(557,null),d(558,null),d(559,null)],description:d(560,null)})),colorDecoratorsLimit:O(new Ge(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(561,null)})),columnSelection:O(new Se(22,"columnSelection",!1,{description:d(562,null)})),comments:O(new UP),contextmenu:O(new Se(24,"contextmenu",!0)),copyWithSyntaxHighlighting:O(new Se(25,"copyWithSyntaxHighlighting",!0,{description:d(563,null)})),cursorBlinking:O(new ef(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],HP,{description:d(564,null)})),cursorSmoothCaretAnimation:O(new nt(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(565,null),d(566,null),d(567,null)],description:d(568,null)})),cursorStyle:O(new ef(28,"cursorStyle",Oi.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],jP,{description:d(569,null)})),cursorSurroundingLines:O(new Ge(29,"cursorSurroundingLines",0,0,1073741824,{description:d(570,null)})),cursorSurroundingLinesStyle:O(new nt(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(571,null),d(572,null)],markdownDescription:d(573,null)})),cursorWidth:O(new Ge(31,"cursorWidth",0,0,1073741824,{markdownDescription:d(574,null)})),disableLayerHinting:O(new Se(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:O(new Se(33,"disableMonospaceOptimizations",!1)),domReadOnly:O(new Se(34,"domReadOnly",!1)),dragAndDrop:O(new Se(35,"dragAndDrop",!0,{description:d(575,null)})),emptySelectionClipboard:O(new BP),dropIntoEditor:O(new SA),experimentalEditContextEnabled:O(new Se(37,"experimentalEditContextEnabled",!1,{description:d(576,null)})),stickyScroll:O(new eA),experimentalGpuAcceleration:O(new nt(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:O(new nt(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(577,null),d(578,null),d(579,null)],description:d(580,null)})),extraEditorClassName:O(new cr(41,"extraEditorClassName","")),fastScrollSensitivity:O(new Mi(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(581,null)})),find:O(new zP),fixedOverflowWidgets:O(new Se(44,"fixedOverflowWidgets",!1)),folding:O(new Se(45,"folding",!0,{description:d(582,null)})),foldingStrategy:O(new nt(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(583,null),d(584,null)],description:d(585,null)})),foldingHighlight:O(new Se(47,"foldingHighlight",!0,{description:d(586,null)})),foldingImportsByDefault:O(new Se(48,"foldingImportsByDefault",!1,{description:d(587,null)})),foldingMaximumRegions:O(new Ge(49,"foldingMaximumRegions",5e3,10,65e3,{description:d(588,null)})),unfoldOnClickAfterEndOfLine:O(new Se(50,"unfoldOnClickAfterEndOfLine",!1,{description:d(589,null)})),fontFamily:O(new cr(51,"fontFamily",us.fontFamily,{description:d(590,null)})),fontInfo:O(new qP),fontLigatures2:O(new WP),fontSize:O(new GP),fontWeight:O(new QP),fontVariations:O(new VP),formatOnPaste:O(new Se(57,"formatOnPaste",!1,{description:d(591,null)})),formatOnType:O(new Se(58,"formatOnType",!1,{description:d(592,null)})),glyphMargin:O(new Se(59,"glyphMargin",!0,{description:d(593,null)})),gotoLocation:O(new JP),hideCursorInOverviewRuler:O(new Se(61,"hideCursorInOverviewRuler",!1,{description:d(594,null)})),hover:O(new ZP),inDiffEditor:O(new Se(63,"inDiffEditor",!1)),letterSpacing:O(new Mi(66,"letterSpacing",us.letterSpacing,e=>Mi.clamp(e,-5,20),{description:d(595,null)})),lightbulb:O(new KP),lineDecorationsWidth:O(new rA),lineHeight:O(new iA),lineNumbers:O(new hA),lineNumbersMinChars:O(new Ge(71,"lineNumbersMinChars",5,1,300)),linkedEditing:O(new Se(72,"linkedEditing",!1,{description:d(596,null)})),links:O(new Se(73,"links",!0,{description:d(597,null)})),matchBrackets:O(new nt(74,"matchBrackets","always",["always","near","never"],{description:d(598,null)})),minimap:O(new sA),mouseStyle:O(new nt(76,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:O(new Mi(77,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(599,null)})),mouseWheelZoom:O(new Se(78,"mouseWheelZoom",!1,{markdownDescription:d(ii?600:601,null)})),multiCursorMergeOverlapping:O(new Se(79,"multiCursorMergeOverlapping",!0,{description:d(602,null)})),multiCursorModifier:O(new ef(80,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],nA,{markdownEnumDescriptions:[d(603,null),d(604,null)],markdownDescription:d(605,null)})),multiCursorPaste:O(new nt(81,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(606,null),d(607,null)],markdownDescription:d(608,null)})),multiCursorLimit:O(new Ge(82,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(609,null)})),occurrencesHighlight:O(new nt(83,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(610,null),d(611,null),d(612,null)],markdownDescription:d(613,null)})),overviewRulerBorder:O(new Se(84,"overviewRulerBorder",!0,{description:d(614,null)})),overviewRulerLanes:O(new Ge(85,"overviewRulerLanes",3,0,3)),padding:O(new oA),pasteAs:O(new CA),parameterHints:O(new aA),peekWidgetDefaultFocus:O(new nt(89,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(615,null),d(616,null)],description:d(617,null)})),placeholder:O(new lA),definitionLinkOpensInPeek:O(new Se(91,"definitionLinkOpensInPeek",!1,{description:d(618,null)})),quickSuggestions:O(new uA),quickSuggestionsDelay:O(new Ge(93,"quickSuggestionsDelay",10,0,1073741824,{description:d(619,null)})),readOnly:O(new Se(94,"readOnly",!1)),readOnlyMessage:O(new fA),renameOnType:O(new Se(96,"renameOnType",!1,{description:d(620,null),markdownDeprecationMessage:d(621,null)})),renderControlCharacters:O(new Se(97,"renderControlCharacters",!0,{description:d(622,null),restricted:!0})),renderFinalNewline:O(new nt(98,"renderFinalNewline",xs?"dimmed":"on",["off","on","dimmed"],{description:d(623,null)})),renderLineHighlight:O(new nt(99,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(624,null)],description:d(625,null)})),renderLineHighlightOnlyWhenFocus:O(new Se(100,"renderLineHighlightOnlyWhenFocus",!1,{description:d(626,null)})),renderValidationDecorations:O(new nt(101,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:O(new nt(102,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(627,null),d(628,null),d(629,null),""],description:d(630,null)})),revealHorizontalRightPadding:O(new Ge(103,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:O(new Se(104,"roundedSelection",!0,{description:d(631,null)})),rulers:O(new dA),scrollbar:O(new pA),scrollBeyondLastColumn:O(new Ge(107,"scrollBeyondLastColumn",4,0,1073741824,{description:d(632,null)})),scrollBeyondLastLine:O(new Se(108,"scrollBeyondLastLine",!0,{description:d(633,null)})),scrollPredominantAxis:O(new Se(109,"scrollPredominantAxis",!0,{description:d(634,null)})),selectionClipboard:O(new Se(110,"selectionClipboard",!0,{description:d(635,null),included:xs})),selectionHighlight:O(new Se(111,"selectionHighlight",!0,{description:d(636,null)})),selectOnLineNumbers:O(new Se(112,"selectOnLineNumbers",!0)),showFoldingControls:O(new nt(113,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(637,null),d(638,null),d(639,null)],description:d(640,null)})),showUnused:O(new Se(114,"showUnused",!0,{description:d(641,null)})),showDeprecated:O(new Se(143,"showDeprecated",!0,{description:d(642,null)})),inlayHints:O(new tA),snippetSuggestions:O(new nt(115,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(643,null),d(644,null),d(645,null),d(646,null)],description:d(647,null)})),smartSelect:O(new xA),smoothScrolling:O(new Se(117,"smoothScrolling",!1,{description:d(648,null)})),stopRenderingLineAfter:O(new Ge(120,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:O(new yA),inlineSuggest:O(new mA),inlineEdit:O(new vA),inlineCompletionsAccessibilityVerbose:O(new Se(152,"inlineCompletionsAccessibilityVerbose",!1,{description:d(649,null)})),suggestFontSize:O(new Ge(122,"suggestFontSize",0,0,1e3,{markdownDescription:d(650,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:O(new Ge(123,"suggestLineHeight",0,0,1e3,{markdownDescription:d(651,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:O(new Se(124,"suggestOnTriggerCharacters",!0,{description:d(652,null)})),suggestSelection:O(new nt(125,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(653,null),d(654,null),d(655,null)],description:d(656,null)})),tabCompletion:O(new nt(126,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(657,null),d(658,null),d(659,null)],description:d(660,null)})),tabIndex:O(new Ge(127,"tabIndex",0,-1,1073741824)),unicodeHighlight:O(new gA),unusualLineTerminators:O(new nt(129,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(661,null),d(662,null),d(663,null)],description:d(664,null)})),useShadowDOM:O(new Se(130,"useShadowDOM",!0)),useTabStops:O(new Se(131,"useTabStops",!0,{description:d(665,null)})),wordBreak:O(new nt(132,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(666,null),d(667,null)],description:d(668,null)})),wordSegmenterLocales:O(new EA),wordSeparators:O(new cr(134,"wordSeparators",z7,{description:d(669,null)})),wordWrap:O(new nt(135,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(670,null),d(671,null),d(672,null),d(673,null)],description:d(674,null)})),wordWrapBreakAfterCharacters:O(new cr(136,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:O(new cr(137,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:O(new Ge(138,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(675,null)})),wordWrapOverride1:O(new nt(139,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:O(new nt(140,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:O(new _P),defaultColorDecorators:O(new Se(150,"defaultColorDecorators",!1,{markdownDescription:d(676,null)})),pixelRatio:O(new cA),tabFocusMode:O(new Se(147,"tabFocusMode",!1,{markdownDescription:d(677,null)})),layoutInfo:O(new XP),wrappingInfo:O(new $A),wrappingIndent:O(new kA),wrappingStrategy:O(new YP)};function H9(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=H9(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:to(a.base)},f===t.fsPath||ic(f,t.fsPath))h=10;else return 0}return h}else return 0}}function j9(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(j9):!!e.notebookType}var yv;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(yv||(yv={}));var QO=ee("editSessionIdentityService"),xv;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(xv||(xv={}));var TA=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Z.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new Ue(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},_9;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(_9||(_9={}));function B9(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function RA(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return cw()||B9(t),Ne.wrap(t)}function LA(e){const t=e.buffer;if(cw()||B9(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function Ev(e){const t=new Uint32Array(NA(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return RA(t)}function NA(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function z9(e){const t=LA(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var FA=[new we("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[V.Uri,V.Position],new me("A promise that resolves to an array of DocumentHighlight-instances.",wi(qo.to))),new we("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[V.Uri],new me("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(qf(e))return;class r extends So{static to(s){const n=new r(s.name,Qr.to(s.kind),s.containerName||"",new jr(t[0],B.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=B.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new we("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[V.Uri,new V("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",wi(Ut.to))),new we("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[V.Uri,V.Range,new V("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",wi(Ut.to))),new we("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[V.Uri,V.Position,new V("ch","Trigger character",e=>typeof e=="string",e=>e),new V("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",wi(Ut.to))),new we("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Zs)),new we("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location-instances.",wi(mr.to))),new we("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Location-instances.",wi(mr.to))),new we("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Hover-instances.",wi(Wc.to))),new we("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[V.Uri,V.Position],new me("A promise that resolves to an array of Hover-instances.",wi(Wc.to))),new we("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[V.Uri,new V("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Re.isPosition(t)),e=>e.map(qe.from))],new me("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new pc(B.to(i),r);return r}))),new we("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[V.String.with("query","Search string")],new me("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Fn.to))),new we("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[V.Uri,V.Position],new me("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Mn.to))),new we("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[V.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(Sm.to))),new we("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[V.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(Cm.to))),new we("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[V.Uri,V.Position],new me("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:B.to(e.range),placeholder:e.text}})),new we("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[V.Uri,V.Position,V.String.with("newName","The new symbol name")],new me("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return ar.to(e)}})),new we("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[V.Uri,V.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new me("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(On.to))),new we("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[V.Uri],new me("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Yg(e.tokenTypes,e.tokenModifiers)})),new we("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[V.Uri],new me("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=z9(e);if(t.type==="full")return new Uo(t.data,void 0)})),new we("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[V.Uri,V.Range.optional()],new me("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Yg(e.tokenTypes,e.tokenModifiers)})),new we("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[V.Uri,V.Range],new me("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=z9(e);if(t.type==="full")return new Uo(t.data,void 0)})),new we("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[V.Uri,V.Position,V.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),V.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new me("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new Do([]);const i=e.suggestions.map(s=>Tm.to(s,r));return new Do(i,e.incomplete)})),new we("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[V.Uri,V.Position,V.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new me("A promise that resolves to SignatureHelp.",e=>{if(e)return Vc.to(e)})),new we("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[V.Uri,V.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new me("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>wi(i=>new ch(B.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new we("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[V.Uri,new V("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>De.isRange(e),e=>Ki.isSelection(e)?gi.from(e):B.from(e)),V.String.with("kind","Code action kind to return code actions for").optional(),V.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new me("A promise that resolves to an array of Command-instances.",(e,t,r)=>wi(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new ah(i.title,i.kind?new gt(i.kind):void 0);return i.edit&&(s.edit=ar.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new we("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[V.Uri],new me("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new ph(B.to(t.range),Go.to(t.color))):[])),new we("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new V("color","The color to show and insert",e=>e instanceof Ro,Go.from),new V("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:B.from(e.range)}))],new me("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(hd.to):[])),new we("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[V.Uri,V.Range],new me("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(Rm.to.bind(void 0,r)))),new we("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[V.Uri],new me("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(fd.to)})),new we("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new me("A promise that resolves to an array of NotebookContentProvider static info objects.",wi(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>md.to(t))})))),new we("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[V.Uri,V.Range,new V("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof De,e=>nd.from(e))],new me("A promise that resolves to an array of InlineValue objects",e=>e.map(sd.to))),new we("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new V("uriOrString","Uri-instance or string (only http/https)",e=>x.isUri(e)||typeof e=="string"&&S3(e,te.http,te.https),e=>e),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ot.from(e),void 0]:[Ot.from(e.viewColumn),qc.from(e)])).optional(),V.String.with("label","").optional()],me.Void),new we("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[V.Uri.with("resource","Resource to open"),V.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ot.from(e),void 0]:[Ot.from(e.viewColumn),qc.from(e)])).optional()],me.Void),new we("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[V.Uri.with("left","Left-hand side resource of the diff editor"),V.Uri.with("right","Right-hand side resource of the diff editor"),V.String.with("title","Human readable title for the diff editor").optional(),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Ot.from(e.viewColumn),qc.from(e)]).optional()],me.Void),new we("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[V.String.with("title","Human readable title for the changes editor"),new V("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!x.isUri(r)||!x.isUri(i)&&i!==void 0&&i!==null||!x.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],me.Void),new we("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[V.Uri,V.Position],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Un.to))),new we("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[V.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Un.to))),new we("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[V.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Un.to))),new we("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[V.TestItem],me.Void),new we("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[V.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],me.Void),new we("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[V.String.with("name","The context key name"),new V("value","The context key value",()=>!0,e=>e)],me.Void),new we("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[V.Uri,V.StringArray,new V("MappedEditsContext","Mapped Edits Context",e=>gd.is(e),e=>gd.from(e))],new me("A promise that resolves to a workspace edit or null",e=>e?ar.to(e):null)),new we("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new V("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?B.from(e.initialRange):void 0,initialSelection:Ki.isSelection(e.initialSelection)?gi.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?qe.from(e.position):void 0}})],me.Void)],MA=class{static register(e){FA.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",E$)}};function wi(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Zs(e){if(!Array.isArray(e))return;const t=[];for(const r of e)gS(r)?t.push(zc.to(r)):t.push(mr.to(r));return t}var kv=class{constructor(t,r){this.a=t.getProxy(Z.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new Or(ar.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};kv=__decorate([__param(0,Qe)],kv);var W9;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(W9||(W9={}));var tf;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(tf||(tf={}));var V9;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(V9||(V9={}));var q9;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(q9||(q9={}));var ZO=ee("IChatService"),OA=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=sn.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Rr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,tl.from(c),l):this.l.$handleProgressChunk(this.k.requestId,ns.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,Wm.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g={markdown(s){t(this.markdown);const n=new zh(s),o=Yc.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&H(r.j,"chatParticipantAdditions");const o=new Fc(s,n),a=Ed.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),H(r.j,"chatParticipantAdditions");const n=new Jh(s),o=xd.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new Vh(s,n),a=Kc.from(o);return i(a),this},anchor(s,n){t(this.anchor);const o=new qh(s,n),a=el.from(o);return i(a),this},button(s){t(this.anchor);const n=new Qh(s),o=rl.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new Gh(s,n),a=n?Sd.from(o):Hn.from(o);return i(a,n),this},warning(s){t(this.progress),H(r.j,"chatParticipantAdditions");const n=new Uc(s),o=tl.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&H(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new rs(s,n,o);c=[ns.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new rs(s,n,o),c=ns.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),H(r.j,"chatParticipantAdditions");const a=new Zh(s,n,o),c=Id.from(a);i(c)},textEdit(s,n){t(this.textEdit),H(r.j,"chatParticipantAdditions");const o=new Hc(s,n),a=Cd.from(o);return i(a),this},detectedParticipant(s,n){t(this.detectedParticipant),H(r.j,"chatParticipantAdditions");const o=new Mc(s,n),a=kd.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),H(r.j,"chatParticipantAdditions");const c=new Wh(s,n,o,a),l=$d.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof Hc||s instanceof Fc||s instanceof Mc||s instanceof Uc||s instanceof Wh||s instanceof Zh||s instanceof Xh||s instanceof Gh)&&H(r.j,"chatParticipantAdditions"),s instanceof rs)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof Gh){const n=s.task?Sd.from(s):Hn.from(s);i(n,s.task)}else{const n=Dd.from(s,r.m,r.n);i(n)}return this}}}return this.g}},UA=class Of extends Ee{static{this.b=0}static{this.j=0}constructor(t,r,i,s,n){super(),this.t=r,this.u=i,this.w=s,this.y=n,this.c=new Map,this.m=new Map,this.n=this.B(new Xf),this.s=this.B(new Xf),this.g=t.getProxy(Z.MainThreadChatAgents2)}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=Of.b++,n=new G9(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=Of.b++,o=new G9(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=Of.j++;return this.m.set(i,new HA(t,r)),this.g.$registerChatParticipantDetectionProvider(i),$e(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}async $detectChatParticipant(t,r,i,s,n){const{request:o,location:a,history:c}=await this.z(r,i),l=this.m.get(t);if(!l)return;const u=Pd.to(o,a);return o.userSelectedModelId&&Tt(l.extension,"chatParticipantAdditions")&&(u.userSelectedModel=await this.y.getLanguageModelByIdentifier(l.extension,o.userSelectedModelId)),l.provider.provideParticipantDetection(u,{history:c},{participants:s.participants,location:il.to(s.location)},n)}async z(t,r){const i=hr(t),s=await this.C(i.agentId,r);let n;if(i.locationData?.type===pr.Editor){const o=this.w.getDocument(i.locationData.document);n=new t6(o,gi.to(i.locationData.selection),B.to(i.locationData.wholeRange))}else if(i.locationData?.type===pr.Notebook){const o=this.w.getDocument(i.locationData.sessionInputUri);n=new r6(o)}else i.locationData?.type,pr.Terminal;return{request:i,location:n,history:s}}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.z(r,i);let u=this.n.get(a.sessionId);u||(u=new Pe,this.n.set(a.sessionId,u)),o=new OA(n.extension,a,this.g,this.u.converter,u);const h=Pd.to(a,c);a.userSelectedModelId&&Tt(n.extension,"chatParticipantAdditions")&&(h.userSelectedModel=await this.y.getLanguageModelByIdentifier(n.extension,a.userSelectedModelId));const f=n.invoke(h,{history:l},o.apiObject,s);return await rb(Promise.resolve(f).then(p=>{if(p?.metadata)try{JSON.stringify(p.metadata)}catch(w){const $=`result.metadata MUST be JSON.stringify-able. Got error: ${w.message}`;return this.t.error(`[${n.extension.identifier.value}] [@${n.id}] ${$}`,n.extension),{errorDetails:{message:$},timings:o?.timings,nextQuestion:p.nextQuestion}}let m;return p?.errorDetails&&(m={...p.errorDetails,responseIsIncomplete:!0}),m?.responseIsRedacted&&H(n.extension,"chatParticipantPrivate"),{errorDetails:m,timings:o?.timings,metadata:p?.metadata,nextQuestion:p?.nextQuestion}}),s)}catch(a){return this.t.error(a,n.extension),a instanceof is&&a.cause&&(a=a.cause),{errorDetails:{message:hn(a),responseIsIncomplete:!0}}}finally{o?.close()}}async C(t,r){const i=[];for(const s of r.history){const n=ea.to(s.result),o=t===s.request.agentId?n:{...n,metadata:void 0},a=s.request.variables.variables.filter(h=>!h.isTool).map(Ad.to),c=s.request.variables.variables.filter(h=>h.isTool).map(Td.to),l=new K5(s.request.message,s.request.command,a,s.request.agentId);l.toolReferences=c,i.push(l);const u=Ft(s.response.map(h=>Dd.toContent(h,this.u.converter)));i.push(new e6(u,o,s.request.agentId,s.request.command))}return i}$releaseSession(t){this.n.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=hr(t),c=await this.C(o.id,s),l=ea.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Vr.some(this.c.values(),f=>f.id===u.participant&&Ye.equals(f.extension.identifier,o.extension.identifier));return h||this.t.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>Xc.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=ea.to(r);let o;switch(i.direction){case tf.Down:o=Nc.Unhelpful;break;case tf.Up:o=Nc.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Tt(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=qm.to(r,i,this.u.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.s.get(t);return n?n.clear():(n=new Pe,this.s.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>Vm.from(a,this.u.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.C(s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(il.to(r),i)).map(n=>Xc.from(n,void 0))}},HA=class{constructor(e,t){this.extension=e,this.provider=t}},G9=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.w=r,this.x=i,this.y=s,this.l=new R,this.m=new R}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!qt.isThemeIcon(r)))return{...t,icon:r,message:Le.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof x?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof or?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:Le.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:Le.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:Le.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.y},set requestHandler(s){Vw(typeof s=="function","Invalid request handler"),i.y=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return H(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){H(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return H(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){H(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return H(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){H(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return H(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){H(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return H(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){H(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(H(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.w.$registerAgentCompletionsProvider(i.x,i.id,s.triggerCharacters)}else i.w.$unregisterAgentCompletionsProvider(i.x,i.id)},get participantVariableProvider(){return H(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){H(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return H(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){H(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return H(i.extension,"defaultChatParticipant"),i.s},onDidPerformAction:Tt(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},set supportsSlowReferences(s){H(i.extension,"chatParticipantPrivate"),i.u=s,r()},get supportsSlowReferences(){return H(i.extension,"chatParticipantPrivate"),i.u},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.w.$unregisterAgent(i.x)}}}invoke(e,t,r,i){return this.y(e,t,r,i)}},jA=class Xx{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(Z.MainThreadChatVariables)}async $resolveVariable(t,r,i,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){H(n.extension,"chatParticipantAdditions");const o=new _A(r,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:i},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:i},s);if(o&&o[0])return o[0].value}}catch(o){zf(o)}}registerVariableResolver(t,r,i,s,n,o,a,c,l){const u=Xx.a++,h=l?qt.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:r,name:i,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:r,name:i,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),$e(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},_A=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(r.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this,i=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new Oc(s),o=Hn.from(n);return i(o),this},reference(s){t(this.reference);const n=new rs(s),o=ns.from(n);return i(o),this},push(s){return t(this.push),s instanceof rs?i(ns.from(s)):s instanceof Oc&&i(Hn.from(s)),this}}}return this.b}},BA=class{constructor(e){const t=e.getProxy(Z.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},Q9="vscode-cdn.net",zA=`vscode-resource.${Q9}`,$v=`'self' https://*.${Q9}`;function xl(e,t){return e.scheme===te.http||e.scheme===te.https?e:(t&&t.authority&&t.isRemote&&e.scheme===te.file&&(e=x.from({scheme:te.vscodeRemote,authority:t.authority,path:e.path})),x.from({scheme:te.https,authority:`${e.scheme}+${WA(e.authority)}.${zA}`,path:e.path,fragment:e.fragment,query:e.query}))}function WA(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var VA=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new Pe,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new R,l=new R,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return xl(f,o.f)}get cspSource(){return $v}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function J9(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n)throw new Error("not supported");i[s]=e(n,r)}}function Sv(e,t,r){return J9((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function qA(e,t,r){return J9((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function GA(e,t,r){const i=e.getProxy(Z.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Zi,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,$=this.b.get(w.commentControlHandle);if(!$)return w;const P=$.getCommentThread(w.commentThreadHandle);return P?P.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const $=w.getCommentThread(m.thread.commentThreadHandle);return $?m.$mid===8?$.value:{thread:$.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const $=w.getCommentThread(m.thread.commentThreadHandle);if(!$)return m;const P=m.commentUniqueId,A=$.getCommentByUniqueId(P);return A||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const $=w.getCommentThread(m.thread.commentThreadHandle);if(!$)return m;const P=m.text,A=m.commentUniqueId,L=$.getCommentByUniqueId(A);return L?(typeof L.body=="string"?L.body=P:L.body=new Rr(P),L):m}return m}})}createCommentController(m,w,$){const P=s.a++,A=new o(m,P,w,$);this.b.set(A.handle,A);const L=this.c.get(m.identifier)||[];return L.push(A),this.c.set(m.identifier,L),A.value}async $createCommentThreadTemplate(m,w,$,P){const A=this.b.get(m);A&&A.$createCommentThreadTemplate(w,$,P)}async $setActiveComment(m,w){const $=this.b.get(m);$&&$.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,$){const P=this.b.get(m);P&&P.$updateCommentThreadTemplate(w,$)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $provideCommentingRanges(m,w,$){const P=this.b.get(m);if(!P||!P.commentingRangeProvider)return Promise.resolve(void 0);const A=await r.ensureDocumentData(x.revive(w));return rr(async()=>{const L=await P.commentingRangeProvider.provideCommentingRanges(A.document,$);let z;return Array.isArray(L)?z={ranges:L,fileComments:!1}:L?z={ranges:L.ranges||[],fileComments:L.enableFileComments||!1}:z=L??void 0,z}).then(L=>{let z;return L&&(z={ranges:L.ranges.map(W=>B.from(W)),fileComments:L.fileComments}),z})}$toggleReaction(m,w,$,P,A){const L=this.b.get(m);return!L||!L.reactionHandler?Promise.resolve(void 0):rr(()=>{const z=L.getCommentThread(w);if(z){const W=z.getCommentByUniqueId(P.uniqueIdInThread);if(L!==void 0&&W&&L.reactionHandler)return L.reactionHandler(W,l(A))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g=m,this.b.collapsibleState=m,this.c.fire()}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(H(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,$,P,A,L,z,W,J){this.m=w,this.n=$,this.o=P,this.p=A,this.q=L,this.extensionDescription=z,this.r=W,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new R,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new ys,this.l.value=new Pe,this.n===void 0&&(this.n=`${m}.${this.handle}`),i.$createCommentThread(w,this.handle,this.n,this.o,B.from(this.p),this.q.map(Y=>a(this,Y,this.k,this.extensionDescription)),z.identifier,this.r,J),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(w,this.handle)}});const ne=this;this.value={get uri(){return ne.uri},get range(){return ne.range},set range(Y){ne.range=Y},get comments(){return ne.comments},set comments(Y){ne.comments=Y},get collapsibleState(){return ne.collapsibleState},set collapsibleState(Y){ne.collapsibleState=Y},get canReply(){return ne.canReply},set canReply(Y){ne.canReply=Y},get contextValue(){return ne.contextValue},set contextValue(Y){ne.contextValue=Y},get label(){return ne.label},set label(Y){ne.label=Y},get state(){return ne.state},set state(Y){ne.state=Y},reveal:(Y,se)=>ne.reveal(Y,se),hide:()=>ne.hide(),dispose:()=>{ne.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new Pe);const m=$=>Object.prototype.hasOwnProperty.call(this.b,$),w={};m("range")&&(w.range=B.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map($=>a(this,$,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=f(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const $=w[0],P=w[1];if(m===P)return $}}async reveal(m,w){H(this.extensionDescription,"commentReveal");let $;m&&m.body!==void 0?$=m:w=w??m;let P=$?this.k.get($):void 0;P??=this.k.get(this.q[0]);let A=!0,L=!1;return w?.focus===Dc.Reply?(L=!0,A=!1):w?.focus===Dc.Comment&&(A=!1),i.$revealCommentThread(this.m,this.handle,P,{preserveFocus:A,focusReply:L})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([Sv(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&H(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return H(this.h,"activeComment"),this.e}get activeCommentThread(){return H(this.h,"activeComment"),this.f?.value}constructor(m,w,$,P){this.h=m,this.i=w,this.j=$,this.k=P,this.a=new Map,i.$registerCommentController(this.handle,$,P,this.h.identifier.value);const A=this;this.value=Object.freeze({id:A.id,label:A.label,get options(){return A.options},set options(L){A.options=L},get commentingRangeProvider(){return A.commentingRangeProvider},set commentingRangeProvider(L){A.commentingRangeProvider=L},get reactionHandler(){return A.reactionHandler},set reactionHandler(L){A.reactionHandler=L},get activeCommentThread(){return A.activeCommentThread},createCommentThread(L,z,W){return A.createCommentThread(L,z,W).value},dispose:()=>{A.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,$){w===void 0&&H(this.h,"fileComments");const P=new n(this.id,this.handle,void 0,m,w,$,this.h,!1);return this.a.set(P.handle,P),P}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,$){const P=new n(this.id,this.handle,void 0,x.revive(m),B.to(w),[],this.h,!0,$);return P.collapsibleState=fo.Expanded,this.a.set(P.handle,P),P}$updateCommentThreadTemplate(m,w){const $=this.a.get(m);$&&($.range=B.to(w))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(p,m,w,$){let P=w.get(m);return P||(P=++p.commentHandle,w.set(m,P)),m.state!==void 0&&H($,"commentsDraftState"),m.reactions?.some(A=>A.reactors!==void 0)&&H($,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:P,body:typeof m.body=="string"?m.body:Le.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(A=>c(A)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(p){return{label:p.label,iconPath:p.iconPath?rd(p.iconPath):void 0,count:p.count,hasReacted:p.authorHasReacted,reactors:p.reactors&&p.reactors.length>0&&typeof p.reactors[0]!="string"?p.reactors.map(m=>m.name):p.reactors}}function l(p){return{label:p.label||"",count:p.count||0,iconPath:p.iconPath?x.revive(p.iconPath):"",authorHasReacted:p.hasReacted||!1,reactors:p.reactors?.map(m=>({name:m}))}}function u(p){if(p!==void 0)switch(p){case Sc.Expanded:return fo.Expanded;case Sc.Collapsed:return fo.Collapsed}return fo.Collapsed}function h(p){let m;if(typeof p=="object"?m=p.resolved:m=p,m!==void 0)switch(m){case Cc.Unresolved:return Qa.Unresolved;case Cc.Resolved:return Qa.Resolved}return Qa.Unresolved}function f(p){let m;if(typeof p=="object"&&(m=p.applicability),m!==void 0)switch(m){case Ic.Current:return Ja.Current;case Ic.Outdated:return Ja.Outdated}return Ja.Current}return new s}var rf={},He={exports:rf};(function(e,t){if(typeof rf=="object"&&typeof He=="object")He.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof rf=="object"?rf:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=We,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var D=Array.prototype.slice.call(arguments,0);D.unshift("SEMVER"),console.log.apply(console,D)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=l++;c[p]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[f]+")";var $=l++;c[$]="(?:"+c[h]+"|"+c[f]+")";var P=l++;c[P]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var A=l++;c[A]="(?:-?("+c[$]+"(?:\\."+c[$]+")*))";var L=l++;c[L]="[0-9A-Za-z-]+";var z=l++;c[z]="(?:\\+("+c[L]+"(?:\\."+c[L]+")*))";var W=l++,J="v?"+c[p]+c[P]+"?"+c[z]+"?";c[W]="^"+J+"$";var ne="[v=\\s]*"+c[m]+c[A]+"?"+c[z]+"?",Y=l++;c[Y]="^"+ne+"$";var se=l++;c[se]="((?:<|>)?=?)";var Te=l++;c[Te]=c[h]+"|x|X|\\*";var ve=l++;c[ve]=c[u]+"|x|X|\\*";var Ze=l++;c[Ze]="[v=\\s]*("+c[ve]+")(?:\\.("+c[ve]+")(?:\\.("+c[ve]+")(?:"+c[P]+")?"+c[z]+"?)?)?";var at=l++;c[at]="[v=\\s]*("+c[Te]+")(?:\\.("+c[Te]+")(?:\\.("+c[Te]+")(?:"+c[A]+")?"+c[z]+"?)?)?";var X=l++;c[X]="^"+c[se]+"\\s*"+c[Ze]+"$";var q=l++;c[q]="^"+c[se]+"\\s*"+c[at]+"$";var ie=l++;c[ie]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var G=l++;c[G]="(?:~>?)";var ae=l++;c[ae]="(\\s*)"+c[G]+"\\s+",a[ae]=new RegExp(c[ae],"g");var xe=l++;c[xe]="^"+c[G]+c[Ze]+"$";var pe=l++;c[pe]="^"+c[G]+c[at]+"$";var Ke=l++;c[Ke]="(?:\\^)";var ze=l++;c[ze]="(\\s*)"+c[Ke]+"\\s+",a[ze]=new RegExp(c[ze],"g");var yt=l++;c[yt]="^"+c[Ke]+c[Ze]+"$";var xt=l++;c[xt]="^"+c[Ke]+c[at]+"$";var jt=l++;c[jt]="^"+c[se]+"\\s*("+ne+")$|^$";var rt=l++;c[rt]="^"+c[se]+"\\s*("+J+")$|^$";var Qt=l++;c[Qt]="(\\s*)"+c[se]+"\\s*("+ne+"|"+c[Ze]+")",a[Qt]=new RegExp(c[Qt],"g");var Kr=l++;c[Kr]="^\\s*("+c[Ze]+")\\s+-\\s+("+c[Ze]+")\\s*$";var ei=l++;c[ei]="^\\s*("+c[at]+")\\s+-\\s+("+c[at]+")\\s*$";var Nr=l++;c[Nr]="(<|>)?=?\\s*\\*";for(var Ie=0;Ie<35;Ie++)s(Ie,c[Ie]),a[Ie]||(a[Ie]=new RegExp(c[Ie]));function ti(D,F){if(D instanceof We)return D;if(typeof D!="string"||D.length>n||!(F?a[Y]:a[W]).test(D))return null;try{return new We(D,F)}catch{return null}}function We(D,F){if(D instanceof We){if(D.loose===F)return D;D=D.version}else if(typeof D!="string")throw new TypeError("Invalid Version: "+D);if(D.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof We))return new We(D,F);s("SemVer",D,F),this.loose=F;var U=D.trim().match(F?a[Y]:a[W]);if(!U)throw new TypeError("Invalid Version: "+D);if(this.raw=D,this.major=+U[1],this.minor=+U[2],this.patch=+U[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");U[4]?this.prerelease=U[4].split(".").map(function(ce){if(/^[0-9]+$/.test(ce)){var be=+ce;if(be>=0&&be<o)return be}return ce}):this.prerelease=[],this.build=U[5]?U[5].split("."):[],this.format()}t.parse=ti,t.valid=function(D,F){var U=ti(D,F);return U?U.version:null},t.clean=function(D,F){var U=ti(D.trim().replace(/^[=v]+/,""),F);return U?U.version:null},t.SemVer=We,We.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},We.prototype.toString=function(){return this.version},We.prototype.compare=function(D){return s("SemVer.compare",this.version,this.loose,D),D instanceof We||(D=new We(D,this.loose)),this.compareMain(D)||this.comparePre(D)},We.prototype.compareMain=function(D){return D instanceof We||(D=new We(D,this.loose)),xr(this.major,D.major)||xr(this.minor,D.minor)||xr(this.patch,D.patch)},We.prototype.comparePre=function(D){if(D instanceof We||(D=new We(D,this.loose)),this.prerelease.length&&!D.prerelease.length)return-1;if(!this.prerelease.length&&D.prerelease.length)return 1;if(!this.prerelease.length&&!D.prerelease.length)return 0;var F=0;do{var U=this.prerelease[F],ce=D.prerelease[F];if(s("prerelease compare",F,U,ce),U===void 0&&ce===void 0)return 0;if(ce===void 0)return 1;if(U===void 0)return-1;if(U!==ce)return xr(U,ce)}while(++F)},We.prototype.inc=function(D,F){switch(D){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",F);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",F);break;case"prepatch":this.prerelease.length=0,this.inc("patch",F),this.inc("pre",F);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",F),this.inc("pre",F);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var U=this.prerelease.length;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);U===-1&&this.prerelease.push(0)}F&&(this.prerelease[0]===F?isNaN(this.prerelease[1])&&(this.prerelease=[F,0]):this.prerelease=[F,0]);break;default:throw new Error("invalid increment argument: "+D)}return this.format(),this.raw=this.version,this},t.inc=function(D,F,U,ce){typeof U=="string"&&(ce=U,U=void 0);try{return new We(D,U).inc(F,ce).version}catch{return null}},t.diff=function(D,F){if(Ys(D,F))return null;var U=ti(D),ce=ti(F);if(U.prerelease.length||ce.prerelease.length){for(var be in U)if((be==="major"||be==="minor"||be==="patch")&&U[be]!==ce[be])return"pre"+be;return"prerelease"}for(var be in U)if((be==="major"||be==="minor"||be==="patch")&&U[be]!==ce[be])return be},t.compareIdentifiers=xr;var Br=/^[0-9]+$/;function xr(D,F){var U=Br.test(D),ce=Br.test(F);return U&&ce&&(D=+D,F=+F),U&&!ce?-1:ce&&!U?1:D<F?-1:D>F?1:0}function Er(D,F,U){return new We(D,U).compare(new We(F,U))}function vs(D,F,U){return Er(D,F,U)>0}function ws(D,F,U){return Er(D,F,U)<0}function Ys(D,F,U){return Er(D,F,U)===0}function Ei(D,F,U){return Er(D,F,U)!==0}function Ks(D,F,U){return Er(D,F,U)>=0}function ji(D,F,U){return Er(D,F,U)<=0}function _i(D,F,U,ce){var be;switch(F){case"===":typeof D=="object"&&(D=D.version),typeof U=="object"&&(U=U.version),be=D===U;break;case"!==":typeof D=="object"&&(D=D.version),typeof U=="object"&&(U=U.version),be=D!==U;break;case"":case"=":case"==":be=Ys(D,U,ce);break;case"!=":be=Ei(D,U,ce);break;case">":be=vs(D,U,ce);break;case">=":be=Ks(D,U,ce);break;case"<":be=ws(D,U,ce);break;case"<=":be=ji(D,U,ce);break;default:throw new TypeError("Invalid operator: "+F)}return be}function Jt(D,F){if(D instanceof Jt){if(D.loose===F)return D;D=D.value}if(!(this instanceof Jt))return new Jt(D,F);s("comparator",D,F),this.loose=F,this.parse(D),this.semver===Fr?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(D,F){return xr(F,D)},t.major=function(D,F){return new We(D,F).major},t.minor=function(D,F){return new We(D,F).minor},t.patch=function(D,F){return new We(D,F).patch},t.compare=Er,t.compareLoose=function(D,F){return Er(D,F,!0)},t.rcompare=function(D,F,U){return Er(F,D,U)},t.sort=function(D,F){return D.sort(function(U,ce){return t.compare(U,ce,F)})},t.rsort=function(D,F){return D.sort(function(U,ce){return t.rcompare(U,ce,F)})},t.gt=vs,t.lt=ws,t.eq=Ys,t.neq=Ei,t.gte=Ks,t.lte=ji,t.cmp=_i,t.Comparator=Jt;var Fr={};function mt(D,F){if(D instanceof mt)return D.loose===F?D:new mt(D.raw,F);if(D instanceof Jt)return new mt(D.value,F);if(!(this instanceof mt))return new mt(D,F);if(this.loose=F,this.raw=D,this.set=D.split(/\s*\|\|\s*/).map(function(U){return this.parseRange(U.trim())},this).filter(function(U){return U.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+D);this.format()}function Rt(D){return!D||D.toLowerCase()==="x"||D==="*"}function ki(D,F,U,ce,be,lt,le,Zt,wt,Bt,sr,vt,S){return((F=Rt(U)?"":Rt(ce)?">="+U+".0.0":Rt(be)?">="+U+"."+ce+".0":">="+F)+" "+(Zt=Rt(wt)?"":Rt(Bt)?"<"+(+wt+1)+".0.0":Rt(sr)?"<"+wt+"."+(+Bt+1)+".0":vt?"<="+wt+"."+Bt+"."+sr+"-"+vt:"<="+Zt)).trim()}function bs(D,F){for(var U=0;U<D.length;U++)if(!D[U].test(F))return!1;if(F.prerelease.length){for(U=0;U<D.length;U++)if(s(D[U].semver),D[U].semver!==Fr&&D[U].semver.prerelease.length>0){var ce=D[U].semver;if(ce.major===F.major&&ce.minor===F.minor&&ce.patch===F.patch)return!0}return!1}return!0}function zr(D,F,U){try{F=new mt(F,U)}catch{return!1}return F.test(D)}function _t(D,F,U,ce){var be,lt,le,Zt,wt;switch(D=new We(D,ce),F=new mt(F,ce),U){case">":be=vs,lt=ji,le=ws,Zt=">",wt=">=";break;case"<":be=ws,lt=Ks,le=vs,Zt="<",wt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zr(D,F,ce))return!1;for(var Bt=0;Bt<F.set.length;++Bt){var sr=F.set[Bt],vt=null,S=null;if(sr.forEach(function(bt){bt.semver===Fr&&(bt=new Jt(">=0.0.0")),vt=vt||bt,S=S||bt,be(bt.semver,vt.semver,ce)?vt=bt:le(bt.semver,S.semver,ce)&&(S=bt)}),vt.operator===Zt||vt.operator===wt||(!S.operator||S.operator===Zt)&&lt(D,S.semver)||S.operator===wt&&le(D,S.semver))return!1}return!0}Jt.prototype.parse=function(D){var F=this.loose?a[jt]:a[rt],U=D.match(F);if(!U)throw new TypeError("Invalid comparator: "+D);this.operator=U[1],this.operator==="="&&(this.operator=""),U[2]?this.semver=new We(U[2],this.loose):this.semver=Fr},Jt.prototype.toString=function(){return this.value},Jt.prototype.test=function(D){return s("Comparator.test",D,this.loose),this.semver===Fr||(typeof D=="string"&&(D=new We(D,this.loose)),_i(D,this.operator,this.semver,this.loose))},Jt.prototype.intersects=function(D,F){if(!(D instanceof Jt))throw new TypeError("a Comparator is required");var U;if(this.operator==="")return U=new mt(D.value,F),zr(this.value,U,F);if(D.operator==="")return U=new mt(this.value,F),zr(D.semver,U,F);var ce=!(this.operator!==">="&&this.operator!==">"||D.operator!==">="&&D.operator!==">"),be=!(this.operator!=="<="&&this.operator!=="<"||D.operator!=="<="&&D.operator!=="<"),lt=this.semver.version===D.semver.version,le=!(this.operator!==">="&&this.operator!=="<="||D.operator!==">="&&D.operator!=="<="),Zt=_i(this.semver,"<",D.semver,F)&&(this.operator===">="||this.operator===">")&&(D.operator==="<="||D.operator==="<"),wt=_i(this.semver,">",D.semver,F)&&(this.operator==="<="||this.operator==="<")&&(D.operator===">="||D.operator===">");return ce||be||lt&&le||Zt||wt},t.Range=mt,mt.prototype.format=function(){return this.range=this.set.map(function(D){return D.join(" ").trim()}).join("||").trim(),this.range},mt.prototype.toString=function(){return this.range},mt.prototype.parseRange=function(D){var F=this.loose;D=D.trim(),s("range",D,F);var U=F?a[ei]:a[Kr];D=D.replace(U,ki),s("hyphen replace",D),D=D.replace(a[Qt],"$1$2$3"),s("comparator trim",D,a[Qt]),D=(D=(D=D.replace(a[ae],"$1~")).replace(a[ze],"$1^")).split(/\s+/).join(" ");var ce=F?a[jt]:a[rt],be=D.split(" ").map(function(lt){return function(le,Zt){return s("comp",le),le=function(wt,Bt){return wt.trim().split(/\s+/).map(function(sr){return function(vt,S){s("caret",vt,S);var bt=S?a[xt]:a[yt];return vt.replace(bt,function(tr,N,y,E,k){var C;return s("caret",vt,tr,N,y,E,k),Rt(N)?C="":Rt(y)?C=">="+N+".0.0 <"+(+N+1)+".0.0":Rt(E)?C=N==="0"?">="+N+"."+y+".0 <"+N+"."+(+y+1)+".0":">="+N+"."+y+".0 <"+(+N+1)+".0.0":k?(s("replaceCaret pr",k),k.charAt(0)!=="-"&&(k="-"+k),C=N==="0"?y==="0"?">="+N+"."+y+"."+E+k+" <"+N+"."+y+"."+(+E+1):">="+N+"."+y+"."+E+k+" <"+N+"."+(+y+1)+".0":">="+N+"."+y+"."+E+k+" <"+(+N+1)+".0.0"):(s("no pr"),C=N==="0"?y==="0"?">="+N+"."+y+"."+E+" <"+N+"."+y+"."+(+E+1):">="+N+"."+y+"."+E+" <"+N+"."+(+y+1)+".0":">="+N+"."+y+"."+E+" <"+(+N+1)+".0.0"),s("caret return",C),C})}(sr,Bt)}).join(" ")}(le,Zt),s("caret",le),le=function(wt,Bt){return wt.trim().split(/\s+/).map(function(sr){return function(vt,S){var bt=S?a[pe]:a[xe];return vt.replace(bt,function(tr,N,y,E,k){var C;return s("tilde",vt,tr,N,y,E,k),Rt(N)?C="":Rt(y)?C=">="+N+".0.0 <"+(+N+1)+".0.0":Rt(E)?C=">="+N+"."+y+".0 <"+N+"."+(+y+1)+".0":k?(s("replaceTilde pr",k),k.charAt(0)!=="-"&&(k="-"+k),C=">="+N+"."+y+"."+E+k+" <"+N+"."+(+y+1)+".0"):C=">="+N+"."+y+"."+E+" <"+N+"."+(+y+1)+".0",s("tilde return",C),C})}(sr,Bt)}).join(" ")}(le,Zt),s("tildes",le),le=function(wt,Bt){return s("replaceXRanges",wt,Bt),wt.split(/\s+/).map(function(sr){return function(vt,S){vt=vt.trim();var bt=S?a[q]:a[X];return vt.replace(bt,function(tr,N,y,E,k,C){s("xRange",vt,tr,N,y,E,k,C);var T=Rt(y),M=T||Rt(E),_=M||Rt(k);return N==="="&&_&&(N=""),T?tr=N===">"||N==="<"?"<0.0.0":"*":N&&_?(M&&(E=0),_&&(k=0),N===">"?(N=">=",M?(y=+y+1,E=0,k=0):_&&(E=+E+1,k=0)):N==="<="&&(N="<",M?y=+y+1:E=+E+1),tr=N+y+"."+E+"."+k):M?tr=">="+y+".0.0 <"+(+y+1)+".0.0":_&&(tr=">="+y+"."+E+".0 <"+y+"."+(+E+1)+".0"),s("xRange return",tr),tr})}(sr,Bt)}).join(" ")}(le,Zt),s("xrange",le),le=function(wt,Bt){return s("replaceStars",wt,Bt),wt.trim().replace(a[Nr],"")}(le,Zt),s("stars",le),le}(lt,F)}).join(" ").split(/\s+/);return this.loose&&(be=be.filter(function(lt){return!!lt.match(ce)})),be=be.map(function(lt){return new Jt(lt,F)})},mt.prototype.intersects=function(D,F){if(!(D instanceof mt))throw new TypeError("a Range is required");return this.set.some(function(U){return U.every(function(ce){return D.set.some(function(be){return be.every(function(lt){return ce.intersects(lt,F)})})})})},t.toComparators=function(D,F){return new mt(D,F).set.map(function(U){return U.map(function(ce){return ce.value}).join(" ").trim().split(" ")})},mt.prototype.test=function(D){if(!D)return!1;typeof D=="string"&&(D=new We(D,this.loose));for(var F=0;F<this.set.length;F++)if(bs(this.set[F],D))return!0;return!1},t.satisfies=zr,t.maxSatisfying=function(D,F,U){var ce=null,be=null;try{var lt=new mt(F,U)}catch{return null}return D.forEach(function(le){lt.test(le)&&(ce&&be.compare(le)!==-1||(be=new We(ce=le,U)))}),ce},t.minSatisfying=function(D,F,U){var ce=null,be=null;try{var lt=new mt(F,U)}catch{return null}return D.forEach(function(le){lt.test(le)&&(ce&&be.compare(le)!==1||(be=new We(ce=le,U)))}),ce},t.validRange=function(D,F){try{return new mt(D,F).range||"*"}catch{return null}},t.ltr=function(D,F,U){return _t(D,F,"<",U)},t.gtr=function(D,F,U){return _t(D,F,">",U)},t.outside=_t,t.prerelease=function(D,F){var U=ti(D,F);return U&&U.prerelease.length?U.prerelease:null},t.intersects=function(D,F,U){return D=new mt(D,U),F=new mt(F,U),D.intersects(F)},t.coerce=function(D){if(D instanceof We)return D;if(typeof D!="string")return null;var F=D.match(a[ie]);return F==null?null:ti((F[1]||"0")+"."+(F[2]||"0")+"."+(F[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a($){if(r===setTimeout)return setTimeout($,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout($,0);try{return r($,0)}catch{try{return r.call(null,$,0)}catch{return r.call(this,$,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var $=a(f);u=!0;for(var P=l.length;P;){for(c=l,l=[];++h<P;)c&&c[h].run();h=-1,P=l.length}c=null,u=!1,function(A){if(i===clearTimeout)return clearTimeout(A);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(A);try{i(A)}catch{try{return i.call(null,A)}catch{return i.call(this,A)}}}($)}}function m($,P){this.fun=$,this.array=P}function w(){}s.nextTick=function($){var P=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)P[A-1]=arguments[A];l.push(new m($,P)),l.length!==1||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function($){return[]},s.binding=function($){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function($){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var XO=He.exports.SEMVER_SPEC_VERSION,YO=He.exports.parse,KO=He.exports.valid,eU=He.exports.coerce,tU=He.exports.clean,rU=He.exports.inc,iU=He.exports.major,sU=He.exports.minor,nU=He.exports.patch,oU=He.exports.prerelease,aU=He.exports.gt,cU=He.exports.gte,lU=He.exports.lt,uU=He.exports.lte,hU=He.exports.eq,dU=He.exports.neq,fU=He.exports.cmp,pU=He.exports.compare,gU=He.exports.rcompare,mU=He.exports.compareIdentifiers,vU=He.exports.rcompareIdentifiers,wU=He.exports.compareBuild,bU=He.exports.sort,yU=He.exports.rsort,xU=He.exports.diff,EU=He.exports.validRange,kU=He.exports.satisfies,$U=He.exports.maxSatisfying,SU=He.exports.minSatisfying,CU=He.exports.minVersion,IU=He.exports.gtr,DU=He.exports.ltr,PU=He.exports.outside,AU=He.exports.intersects,TU=He.exports.SemVer,RU=He.exports.Comparator,LU=He.exports.Range,Z9=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,QA=/^-(\d{4})(\d{2})(\d{2})$/;function JA(e){return e=e.trim(),e==="*"||Z9.test(e)}function X9(e){if(!JA(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(Z9);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function Y9(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=QA.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var ZA=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function XA(e,t){if(t.serializeBuffersForPostMessage){const r=new ZA,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=YA(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return Ne.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function YA(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function KA(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var eT=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new R,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new R,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=da(n),this.#d=tT(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,xl(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===te.https||e.scheme===te.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+$v}return $v}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),ci(this.#o,e)||this.#t.$setOptions(this.#e,K9(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=XA(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===te.vscodeRemote,r=this.#s.extensionLocation.scheme===te.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=xl(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=xl(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function da(e){try{const t=Y9(X9(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function tT(e){try{const t=Y9(X9(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var rT=class extends Ee{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(Z.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=KA(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new eT(e,this.a,iT(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function sf(e){return{id:e.identifier,location:e.extensionLocation}}function K9(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||sT(e,t)}}function iT(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>x.from(t))}}function sT(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var bi=class Yx{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){Yx.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},nT=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new bi("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=hT(this.document.uri)+this.a++;return nr(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},oT=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new nT(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},e8;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(e8||(e8={}));var aT=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ue(()=>this.a.delete(e))}},cT=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new aT,this.c=new oT,this.a=e.getProxy(Z.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new Pe;return lT(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(sf(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},da(e))):(s.add(this.b.addCustomProvider(t,e,r)),nf(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(uT(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(sf(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,da(e))),Ue.from(s,new Ue(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=x.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return nf(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:nf(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=x.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=Ot.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=x.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=x.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,ct.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,x.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,x.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!nf(r))throw new Error("Custom document is not editable");return r}};function nf(e){return!!e.onDidChangeCustomDocument}function lT(e){return typeof e.resolveCustomTextEditor=="function"}function uT(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function hT(e){const t=e.scheme===te.file||e.scheme===te.untitled?e.fsPath:e.toString();return ja(t)+""}var Wn,t8=class Kx{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new Xt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(x.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(Kx.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[er.Error,er.Warning,er.Information,er.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...Wo.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:fr.Info,message:d(2716,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...Wo.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},Cv=class{static{Wn=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new Xt;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new hk({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=Et.map(this.h.event,Wn._mapper),this.f=t.getProxy(Z.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,p){s.$changeMany(f,p),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,p.length===0?"CLEARING":p)}$clear(f){s.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+Wn.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+Wn.c++;while(i.has(u))}return new class extends t8{constructor(){super(r,u,Wn.e,Wn.d,f=>c.getDocument(f)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new t8(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(x.revive(r),i.map(Wo.to))}};Cv=Wn=__decorate([__param(1,Xe),__param(2,lo)],Cv);var dT=class{constructor(e){this.a=e.getProxy(Z.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&H(e,"showLocal"),this.a.$showOpenDialog(t).then(r=>r?r.map(i=>x.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?x.revive(t):void 0)}},fT=class eE{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(Z.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(te).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=eE.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=Lw(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Sr).finally(()=>{n===a&&(n=void 0)});n=a})}return new Ue(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(x.revive(r),ct.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},pT=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new Ia,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=x.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:dd.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Wf("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(p=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(p)}).catch(p=>{clearTimeout(f),h(p)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(p=>p instanceof Fs))for(const{newText:p,newEol:m,range:w}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&B.from(w),text:p,eol:m&&Jo.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new Or(h)):Promise.reject(new Error("concurrent_edits"))})}},gT=class{constructor(e,t){this.a=new R,this.b=new R,this.c=new R,this.d=new R,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new Pe,this.h=new Map,this.f=e.getProxy(Z.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let r=this.h.get(e.toString());return r||(r=this.f.$tryOpenDocument(e).then(i=>{this.h.delete(e.toString());const s=x.revive(i);return so(this.g.getDocument(s))},i=>(this.h.delete(e.toString()),Promise.reject(i))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>x.revive(t))}$acceptModelLanguageChanged(e,t){const r=x.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=x.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=x.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=x.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=vc.Undo:t.isRedoing&&(n=vc.Redo),this.c.fire(Bb({document:s.document,contentChanges:t.changes.map(o=>({range:B.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){CD(e,t)}},mT=class{constructor(e){this.b=new Map,this.c=new R,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(Z.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),$e(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=ct.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},vT=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Z.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new Ue(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},r8;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(r8||(r8={}));var wT=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},i8=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new wT(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Iv=null;function bT(){return Iv===null&&(Iv=new i8([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Iv}var s8;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(s8||(s8={}));var El=null;function yT(){if(El===null){El=new d7(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)El.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)El.set(t.charCodeAt(r),2)}return El}var xT=class k0{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=bT()){const i=yT(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,f=1,p=!1,m=!1,w=!1,$=!1;for(;l<c;){let P=!1;const A=a.charCodeAt(l);if(f===13){let L;switch(A){case 40:p=!0,L=0;break;case 41:L=p?0:1;break;case 91:w=!0,m=!0,L=0;break;case 93:w=!1,L=m?0:1;break;case 123:$=!0,L=0;break;case 125:L=$?0:1;break;case 39:case 34:case 96:h===A?L=1:h===39||h===34||h===96?L=0:L=1;break;case 42:L=h===42?1:0;break;case 124:L=h===124?1:0;break;case 32:L=w?0:1;break;default:L=i.get(A)}L===1&&(s.push(k0.a(i,a,n,u,l)),P=!0)}else if(f===12){let L;A===91?(m=!0,L=0):L=i.get(A),L===1?P=!0:f=13}else f=r.nextState(f,A),f===0&&(P=!0);P&&(f=1,p=!1,m=!1,$=!1,u=l+1,h=A),l++}f===13&&s.push(k0.a(i,a,n,u,c))}return s}},ET=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?r3(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new i8(t)}}provideDocumentLinks(e){this.c();const t=[],r=xT.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=On.to(i);s.target&&t.push(s)}return t}},kT=class $0{constructor(t,r){this.i=r,this.b=new ET,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(Z.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if($0.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(H(t,"fsChunks"),o+=4);let a;s.isReadonly&&pn(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:p}=h;if(f.scheme!==r)continue;let m;switch(p){case Oo.Changed:m=0;break;case Oo.Created:m=1;break;case Oo.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:m})}this.a.$onFileSystemChange(n,u)});return $e(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(x.revive(r))).then(i=>$0.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(x.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(x.revive(r))).then(i=>Ne.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(x.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(x.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(x.revive(r),x.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(x.revive(r),x.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(x.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(x.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(x.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=Ne.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}},FU=class tE extends Ee{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new ys),this.f=void 0,this.g=0}s(){const t=new Pe;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<tE.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function $T(e,t){return typeof t=="string"&&!t.startsWith(bn)&&!ru(t)?{base:e,pattern:t}:t}var ST=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new R,this.c=new R,this.d=new R,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=yo(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const f of h.created){const p=x.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.b.fire(p)}if(!o.ignoreChangeEvents)for(const f of h.changed){const p=x.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.c.fire(p)}if(!o.ignoreDeleteEvents)for(const f of h.deleted){const p=x.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.d.fire(p)}}});this.g=Ue.from(this.i(e,r,t,i,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=Ue.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(Z.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(bn)||s.pattern.includes(lg))&&(l=!0);const u=n.excludes??[];let h,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const p=t.getWorkspaceFolder(x.revive(s.baseUri)),m=r.getConfiguration("files",p).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const p=t.getWorkspaceFolder(x.revive(s.baseUri));if(p){const m=r.getConfiguration("files",p).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const $=`${fp(w,"/")}/${bn}`;h||(h=[]),h.push($T(p.uri.fsPath,$))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:f},!!o),Ue.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},CT=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new $r(()=>this.a.created.map(x.revive)),this.c=new $r(()=>this.a.changed.map(x.revive)),this.d=new $r(()=>this.a.deleted.map(x.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},IT=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new R,this.b=new R,this.c=new R,this.d=new R,this.g=new Da,this.h=new Da,this.i=new Da,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new ST(this.j,t,e,r,this.a.event,Lr.from(i),s)}$onFileEvent(e){this.a.fire(new CT(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:x.revive(r.source),newUri:x.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>x.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>x.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:x.revive(s.source),newUri:x.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>x.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>x.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof kn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=ar.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},DT=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new we("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new V("showOptions","Show Options",o=>!0,o=>o),new V("resource","Interactive resource Uri",o=>!0,o=>o),new V("controllerId","Notebook controller Id",o=>!0,o=>o),new V("title","Interactive editor title",o=>!0,o=>o)],new me("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},PT=class{constructor(e){this.b=0,this.a=e.getProxy(Z.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),$e(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},n8;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(n8||(n8={}));var AT=class Yr extends tt{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Yr.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new Yr(this.startLineNumber,this.startColumn,t,r):new Yr(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new Hr(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Hr(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new Yr(t,r,this.endLineNumber,this.endColumn):new Yr(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new Yr(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new Yr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Yr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Yr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new Yr(t,r,i,s):new Yr(i,s,t,r)}},o8=class rE{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!qf(s))return s[0]instanceof dc?s.map($m.from):rE.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:Qr.from(s.kind),tags:s.tags?.map(ss.from)||[],detail:"",containerName:s.containerName,range:B.from(s.location.range),selectionRange:B.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(tt.containsRange(o.range,n.range)&&!tt.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},of=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new bi("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new Pe;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++)o.lenses.push({cacheId:[s,a],range:B.from(i[a].range),command:this.g.toInternal(i[a].command,n)});return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function af(e){return Array.isArray(e)?e.map(zc.from):e?[zc.from(e)]:[]}var a8=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideDefinition(i,s,r);return af(n)}},c8=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideDeclaration(i,s,r);return af(n)}},l8=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideImplementation(i,s,r);return af(n)}},u8=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideTypeDefinition(i,s,r);return af(n)}},Dv=class iE{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=qe.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const p={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,s,p)}else a=await this.h.provideHover(n,o,s);if(!a||qf(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new De(o,o));const c=Wc.from(a),l=this.d;if(this.e.size===iE.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},h8=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return Im.from(n)}},d8=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,B.to(t),nd.to(r),i);if(Array.isArray(n))return n.map(o=>sd.from(o))}},f8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(qo.from)}},p8=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=qe.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(Dm.from)}},g8=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=qe.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:Ft(n.ranges.map(B.from)),wordPattern:n.wordPattern}}},m8=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=qe.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map(mr.from)}},cf=class Uf{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new bi("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=AT.isISelection(r)?gi.to(r):B.to(r),a=[];for(const p of this.j.getDiagnostics(t))if(o.intersection(p.range)&&a.push(p)>Uf.d)break;const c={diagnostics:a,only:i.only?new gt(i.only):void 0,triggerKind:Bm.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Sa(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new Pe;this.f.set(u,h);const f=[];for(let p=0;p<l.length;p++){const m=l[p];if(m)if(Uf.o(m))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{c.only&&(m.kind?c.only.contains(m.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${m.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const w=m.ranges??[];f.push({cacheId:[u,p],title:m.title,command:m.command&&this.h.toInternal(m.command,h),diagnostics:m.diagnostics&&m.diagnostics.map(Wo.from),edit:m.edit&&ar.from(m.edit,void 0),kind:m.kind&&m.kind.value,isPreferred:m.isPreferred,isAI:Tt(this.m,"codeActionAI")?m.isAI:!1,ranges:Tt(this.m,"codeActionRanges")?Ft(w.map(B.from)):void 0,disabled:m.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||Uf.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=ar.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},kl=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new bi("DocumentPasteEdit")}async prepareDocumentPaste(e,t,r,i){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>B.to(c)),o=Ws.toDataTransfer(r,()=>{throw new kE});if(await this.g.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof yh));return Ws.from(a)}async providePasteEdits(e,t,r,i,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=r.map(h=>B.to(h)),c=Ws.toDataTransfer(i,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new xh(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2719,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(p=>p.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?ar.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?ar.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},v8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(Ut.from)}},Pv=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=B.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ut.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){Vw(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(B.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ut.from)}},w8=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=qe.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(Ut.from)}},lf=class{constructor(e,t){this.e=e,this.f=t,this.d=new bi("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!Sa(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Fn.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&fn(e,Fn.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},uf=class S0{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=qe.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?ar.from(a):void 0}catch(a){const c=S0.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=qe.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(De.isRange(o)?(a=o,c=s.getText(o)):$t(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:B.from(a),text:c}}catch(o){const a=S0.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Av=class C0{static{this.d={[yu.Invoke]:$c.Invoke,[yu.Automatic]:$c.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=B.to(r);try{const a=C0.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(C0.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Tv=class{constructor(e,t){this.resultId=e,this.tokens=t}},Rv=class xi{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=xi.h(o),this.o(xi.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return xi.j(t)?xi.k(t)?t:new Uo(new Uint32Array(t.data),t.resultId):xi.l(t)?xi.m(t)?t:new Ph(t.edits.map(r=>new j5(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!xi.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new Ph([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new Ph([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(xi.j(t)){const i=this.e++;return this.d.set(i,new Tv(t.resultId,t.data)),Ev({id:i,type:"full",data:t.data})}if(xi.l(t)){const i=this.e++;return xi.j(r)?this.d.set(i,new Tv(r.resultId,r.data)):this.d.set(i,new Tv(t.resultId)),Ev({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},b8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,B.to(t),r);return s?this.f(s):null}f(e){return Ev({id:0,type:"full",data:e.data})}},$l=class sE{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new bi("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=qe.to(r),a=n.getWordRangeAtPosition(o)||new De(o,o),c=a.with({end:o}),l=new sn,u=await this.h.provideCompletionItems(n,o,s,Am.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Do(u):u,f=sE.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),p=new Pe;this.e.set(f,p);const m=[],w={x:f,b:m,a:{replace:B.from(a),insert:B.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let $=0;$<h.items.length;$++){const P=h.items[$],A=this.l(P,[f,$],c,a);m.push(A)}return w}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!ci(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?ad.from(t.kind):void 0,m:t.tags&&t.tags.map(od.from),c:t.detail,d:typeof t.documentation>"u"?void 0:Le.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Ut.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof $n&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),De.isRange(c)?a.j=B.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:B.from(c.inserting),replace:B.from(c.replacing)}),a}},fa=class{async provideInlineCompletions(e,t,r,i){}async provideInlineEditsForRange(e,t,r,i){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,r){}handlePartialAccept(e,t,r,i){}},TT=class extends fa{constructor(e,t,r,i){super(),this.f=e,this.g=t,this.h=r,this.j=i,this.d=new y8,this.e=Tt(this.f,"inlineCompletionsAdditions"),this.k={[bu.Automatic]:kc.Automatic,[bu.Explicit]:kc.Invoke}}get supportsHandleEvents(){return Tt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=qe.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:B.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind]},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new Pe),m=this.j.toInternal(f.command,u));const w=f.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:f.filterText,range:f.range?B.from(f.range):void 0,command:m,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new Pe),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;H(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=B.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:B.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new Pe),m=this.j.toInternal(f.command,u));const w=f.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:f.filterText,range:f.range?B.from(f.range):void 0,command:m,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new Pe),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,Gm.to(i)))}},Lv=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind]},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new Pe),a=this.h.toInternal(s.accepted,n));let c;return s.rejected&&(n||(n=new Pe),c=this.h.toInternal(s.rejected,n)),{pid:o,text:s.text,range:B.from(s.range),accepted:a,rejected:c}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new y8,this.e={[xu.Automatic]:Bc.Automatic,[xu.Invoke]:Bc.Invoke}}},y8=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Nv=class{constructor(e,t){this.e=e,this.f=t,this.d=new bi("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=qe.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...Vc.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=Vc.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},hf=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new bi("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=B.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new Pe);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:Le.fromStrict(e.tooltip),position:qe.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Ut.from),kind:e.kind&&ud.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:Le.fromStrict(n.tooltip)};jr.isLocation(n.location)&&(o.location=mr.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},df=class Hf{constructor(t,r){this.e=t,this.f=r,this.d=new bi("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Hf.g).map(On.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Hf.g(s[a]))continue;const c=On.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!Hf.g(s)))return On.from(s)}releaseLinks(t){this.d.delete(t)}},Fv=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:Go.from(n.color),range:B.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=B.to(t.range),n=Go.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(hd.from)}},x8=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(fd.from)}},E8=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(qe.to),n=await this.e.provideSelectionRanges(i,s,r);if(!Sa(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Nm.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Sl=class{constructor(e,t){this.f=e,this.g=t,this.d=new Bd(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=qe.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>B.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>B.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Mn.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Cl=class{constructor(e,t){this.f=e,this.g=t,this.d=new Bd(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=qe.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Un.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},ff=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new bi("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=qe.to(r),a=Ws.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=ri(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2720,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(p=>p.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?ar.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?ar.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},k8=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,r,i){const s=x.revive(e),n=this.d.getDocument(s),o=u=>({uri:x.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>B.to(h))}),a=r.documents.map(u=>u.map(o)),c={documents:a,selections:a[0]?.[0]?.ranges??[],conversation:r.conversation?.map(u=>u.type==="response"?{type:"response",message:u.message,references:u.references?.map(o)}:{type:"request",message:u.message})},l=await this.e.provideMappedEdits(n,t,c,i);return l?ar.from(l):null}},Il=class{constructor(e,t){this.adapter=e,this.extension=t}},RT=class zt{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(Z.MainThreadLanguageFeatures)}o(t,r){return zo.from(t,this.g,r)}p(t){return new Ue(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return zt.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{en(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),ct.isCancellationToken(n)?U3(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new Il(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new o8(this.h,i),t),o=s&&s.label||zt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,o8,s=>s.provideDocumentSymbols(x.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new Il(new of(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Ue.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,of,s=>s.provideCodeLenses(x.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,of,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,of,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new a8(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,a8,n=>n.provideDefinition(x.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new c8(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,c8,n=>n.provideDeclaration(x.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new l8(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,l8,n=>n.provideImplementation(x.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new u8(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,u8,n=>n.provideTypeDefinition(x.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new Dv(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,Dv,o=>o.provideHover(x.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,Dv,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new h8(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,h8,n=>n.provideEvaluatableExpression(x.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new d8(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Ue.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,d8,o=>o.provideInlineValues(x.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new f8(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new p8(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,f8,n=>n.provideDocumentHighlights(x.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,p8,o=>o.provideMultiDocumentHighlights(x.revive(r),i,s.map(a=>x.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new g8(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,g8,async n=>{const o=await n.provideLinkedEditingRanges(x.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?zt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new m8(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,m8,o=>o.provideReferences(x.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new Pe,o=this.t(new cf(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},zt.u(t),zt.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,cf,o=>o.provideCodeActions(x.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,cf,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,cf,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new v8(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,v8,n=>n.provideDocumentFormattingEdits(x.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new Pv(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,Pv,o=>o.provideDocumentRangeFormattingEdits(x.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,Pv,o=>o.provideDocumentRangesFormattingEdits(x.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new w8(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,w8,a=>a.provideOnTypeFormattingEdits(x.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new lf(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,lf,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,lf,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,lf,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new uf(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),uf.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,uf,o=>o.provideRenameEdits(x.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,uf,n=>n.resolveRenameLocation(x.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new Av(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Av,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,Av,o=>o.provideNewSymbolNames(x.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new Rv(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Ue.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,Rv,n=>n.provideDocumentSemanticTokens(x.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,Rv,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new b8(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,b8,n=>n.provideDocumentRangeSemanticTokens(x.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new $l(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,$l.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,$l,o=>o.provideCompletionItems(x.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,$l,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,$l,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new TT(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,Ye.toKey(t.identifier.value),s?.yieldTo?.map(a=>Ye.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,fa,o=>o.provideInlineCompletions(x.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,fa,o=>o.provideInlineEditsForRange(x.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,fa,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,fa,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,fa,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new Lv(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,Lv,n=>n.provideInlineEdits(x.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,Lv,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Nv(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,Nv,o=>o.provideSignatureHelp(x.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,Nv,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new hf(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,zt.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Ue.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,hf,n=>n.provideInlayHints(x.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,hf,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,hf,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new df(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,df,s=>s.provideLinks(x.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,df,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,df,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new Fv(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,Fv,s=>s.provideColors(x.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,Fv,n=>n.provideColorPresentations(x.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new Il(new x8(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Ue.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,x8,n=>n.provideFoldingRanges(x.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new E8(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,E8,n=>n.provideSelectionRanges(x.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new Sl(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,Sl,n=>Promise.resolve(n.prepareSession(x.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,Sl,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,Sl,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,Sl,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new Cl(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,Cl,n=>Promise.resolve(n.prepareSession(x.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,Cl,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,Cl,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,Cl,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Il(new ff(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),Tt(t,"documentPaste")&&s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,ff,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,x.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,ff,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,ff,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerMappedEditsProvider(t,r,i){const s=this.t(new k8(this.h,i),t);return this.e.$registerMappedEditsProvider(s,this.o(r,t),t.displayName??t.name),this.p(s)}$provideMappedEdits(t,r,i,s,n){return this.s(t,k8,o=>Promise.resolve(o.provideMappedEdits(r,i,s,n)),null,n)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Il(new kl(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,kl,o=>o.prepareDocumentPaste(x.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,kl,c=>c.providePasteEdits(r,x.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,kl,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,kl,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:zt.y(t.decreaseIndentPattern),increaseIndentPattern:zt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?zt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?zt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:zt.y(t.beforeText),afterText:t.afterText?zt.y(t.afterText):void 0,previousLineText:t.previousLineText?zt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(zt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>To.toString(r)):void 0}}static E(t){return t.map(zt.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&Rw(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?zt.y(i.wordPattern):void 0,indentationRules:i.indentationRules?zt.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?zt.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?zt.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}},LT=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(Z.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,hr(r))})}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r){if(!t.requestedContentTypes?.length)throw new Error("LanguageModelToolInvocationOptions.requestedContentTypes is required to be set");const i=qr();t.tokenOptions&&this.c.set(i,t.tokenOptions.countTokens);try{return await this.b.$invokeTool({toolId:e,callId:i,parameters:t.parameters,tokenBudget:t.tokenOptions?.tokenBudget,context:t.toolInvocationToken,requestedContentTypes:t.requestedContentTypes},r)}finally{this.c.delete(i)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}get tools(){return Array.from(this.d.values()).map(e=>Zm.to(e))}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={parameters:e.parameters,toolInvocationToken:e.context,requestedContentTypes:e.requestedContentTypes};e.tokenBudget!==void 0&&(i.tokenOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=ct.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await rb(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new $i;for(const n of Object.keys(s)){if(s[n]instanceof Promise)throw new Error(`Tool result for '${n}' cannot be a Promise`);if(!i.requestedContentTypes.includes(n)&&n!=="toString")throw new Error(`Tool result for '${n}' was not requested from ${e.toolId}.`)}return s}async $provideToolConfirmationMessages(e,t,r,i){const s=this.a.get(e);if(!s)throw new Error(`Unknown tool ${e}`);if(!s.tool.provideToolConfirmationMessages)return;const n=await s.tool.provideToolConfirmationMessages({participantName:t,parameters:r},i);if(n)return{title:n.title,message:typeof n.message=="string"?n.message:Le.from(n.message)}}async $provideToolInvocationMessage(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);if(i.tool.provideToolInvocationMessage)return await i.tool.provideToolInvocationMessage(t,r)}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),$e(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},NT=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(Z.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=qe.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:Hs.Other,range:e.getWordRangeAtPosition(t)??new De(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:B.to(s.range),type:xm.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:Co.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new Pe,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=V3(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:zo.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Co.Error?It.Error:a.severity===Co.Warning?It.Warning:It.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){H(e,"languageStatusText"),a.text=f,u()},get text2(){return H(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function FT(e){return e&&e.title}var Mv=class{constructor(t,r){this.b=r,this.a=t.getProxy(Z.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||FT(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&H(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:p}=h;c.push({title:f,isCloseAffordance:!!p,handle:u}),p&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};Mv=__decorate([__param(1,Xe)],Mv);var Ov=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new ts(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},Uv=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=x.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(Bs.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(Zo.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Qc.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(Bs.to)}setOutputItems(e,t,r){const i=r.map(Xo.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>r5(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=Z2(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Zo.to(e))}setMime(e){}},MT=class nE{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=nE.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===te.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===hi.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===hi.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===hi.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===hi.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===hi.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===hi.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===hi.ChangeCellMime?this.w(a.index,a.mime):a.kind===hi.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===hi.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const p=new Uv(this,this.l,f);return r||n.push(Uv.asModelAddData(f)),p}),u=new Ov(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new Ov(t,r,n.map(a=>a.apiCell),[]),new Ov(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},Hv=class oE{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every(ts.isNotebookRange))throw Ae("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,Ni.from(r),i??Fh.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},oE.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(Ni.from))}_acceptViewColumn(t){this.f=t}},jv=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==he)return _v(this.right);let e=this;for(;e.parent!==he&&e.parent.left!==e;)e=e.parent;return e.parent===he?he:e.parent}prev(){if(this.left!==he)return S8(this.left);let e=this;for(;e.parent!==he&&e.parent.right!==e;)e=e.parent;return e.parent===he?he:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},$8;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})($8||($8={}));var he=new jv(null,0);he.parent=he,he.left=he,he.right=he,he.color=0;function _v(e){for(;e.left!==he;)e=e.left;return e}function S8(e){for(;e.right!==he;)e=e.right;return e}function Bv(e){return e===he?0:e.size_left+e.piece.length+Bv(e.right)}function zv(e){return e===he?0:e.lf_left+e.piece.lineFeedCnt+zv(e.right)}function Wv(){he.parent=he}function Dl(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==he&&(r.left.parent=t),r.parent=t.parent,t.parent===he?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function Pl(e,t){const r=t.left;t.left=r.right,r.right!==he&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===he?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function pf(e,t){let r,i;if(t.left===he?(i=t,r=i.right):t.right===he?(i=t,r=i.left):(i=_v(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),Wv(),e.root.parent=he;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,Al(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,Al(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==he&&(i.left.parent=i),i.right!==he&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,Al(e,i)),t.detach(),r.parent.left===r){const o=Bv(r),a=zv(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,hs(e,r.parent,c,l)}}if(Al(e,r.parent),s){Wv();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,Dl(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Pl(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,Dl(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,Pl(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,Dl(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,Pl(e,r.parent),r=e.root));r.color=0,Wv()}function C8(e,t){for(Al(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Dl(e,t)),t.parent.color=0,t.parent.parent.color=1,Pl(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Pl(e,t)),t.parent.color=0,t.parent.parent.color=1,Dl(e,t.parent.parent))}e.root.color=0}function hs(e,t,r,i){for(;t!==e.root&&t!==he;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function Al(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=Bv(t.left)-t.size_left,i=zv(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var ds=65535;function I8(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var OT=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function fs(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?I8(r):r}function UT(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new OT(I8(e),i,s,n,o);return e.length=0,a}var wr=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},Vn=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},HT=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==he&&e.iterate(e.root,r=>(r!==he&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},jT=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},_T=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new Vn("",[0])],this.g={line:0,column:0},this.root=he,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=fs(e[s].buffer));const o=new wr(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new jT(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=ds,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Vn(u,fs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Vn(a,fs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new HT(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===he)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==he;)if(i.left!==he&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==he;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new Hr(r+1,o+1)}return new Hr(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===he){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new Hr(r+1,n+1)}else t=t.right;return new Hr(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==he;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===he)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let f=l+1;f<u;f++)r=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===he)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),p=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const $={line:0,column:0};let P,A;t._wordSeparators?(P=h.buffer.substring(p,m),A=L=>L+p,t.reset(0)):(P=h.buffer,A=L=>L,t.reset(p));do if(w=t.next(P),w){if(A(w.index)>=m)return l;this.s(e,A(w.index)-f,$);const L=this.t(e.piece.bufferIndex,s,$),z=$.line===s.line?$.column-s.column+i:$.column+1,W=z+w[0].length;if(u[l++]=D7(new tt(r+L,z,r+L,W),w,a),A(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new GI(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const m=this.t(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const $=this.a[f.piece.bufferIndex].lineStarts,P=this.u(f.piece.bufferIndex,f.piece.start),A=$[l.line+m],L=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,h,L,l,this.s(f,A-P),t,r,i,n,s),n>=i)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const $=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,$,e.endLineNumber,w,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,r,i),s}const p=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,p,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,p=r.length;let m=-f;for(;(m=r.indexOf(h,m+f))!==-1;)if((!l||P7(l,r,p,m,f))&&(o[n++]=new R1(new tt(i,m+1+s,i,m+1+f+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=D7(new tt(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==he){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<ds){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new wr(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const m={line:u.start.line+1,column:0};u=new wr(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const m=this.s(i,s-1);this.C(i,m),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let f=i;for(let p=0;p<h.length;p++)f=this.S(f,h[p]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===he)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),f=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();pf(this,s),this.N(p),this.y();return}this.D(s,f),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,f),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==he&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new wr(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,hs(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(h=n[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-f,null):{line:u,column:a-f}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)pf(this,e[t])}w(e){if(e.length>ds){const l=[];for(;e.length>ds;){const h=e.charCodeAt(ds-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,ds-1),e=e.substring(ds-1)):(f=e.substring(0,ds),e=e.substring(ds));const p=fs(f);l.push(new wr(this.a.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this.a.push(new Vn(f,p))}const u=fs(e);return l.push(new wr(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Vn(e,u)),l}let t=this.a[0].buffer.length;const r=fs(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new wr(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==he;)if(r.left!==he&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==he;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==he;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new wr(r.bufferIndex,r.start,n,a,u),hs(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new wr(r.bufferIndex,n,r.end,o,u),hs(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new wr(i.bufferIndex,i.start,c,l,u),hs(this,e,u-o,l-a);const h=new wr(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=fs(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(r){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new wr(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,hs(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==he;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==he;)if(r.left!==he&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==he;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===he||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===he||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new wr(e.piece.bufferIndex,e.piece.start,s,o,n),hs(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new wr(t.piece.bufferIndex,a,t.piece.end,l,c),hs(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)pf(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)pf(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new wr(i.bufferIndex,s,i.end,o,n),hs(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===he)return t(he);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===he)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new jv(t,1);if(r.left=he,r.right=he,r.parent=he,r.size_left=0,r.lf_left=0,this.root===he)this.root=r,r.color=0;else if(e.right===he)e.right=r,r.parent=e;else{const s=_v(e.right);s.left=r,r.parent=s}return C8(this,r),r}T(e,t){const r=new jv(t,1);if(r.left=he,r.right=he,r.parent=he,r.size_left=0,r.lf_left=0,this.root===he)this.root=r,r.color=0;else if(e.left===he)e.left=r,r.parent=e;else{const i=S8(e.left);i.right=r,r.parent=i}return C8(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},D8;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(D8||(D8={}));function Vv(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var qv;function BT(){return qv||(qv=new TextDecoder("UTF-16LE")),qv}function zT(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?WT(e,t,r):BT().decode(i)}function WT(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=qE(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function gf(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var VT=class Hi{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${gf(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${gf(this.oldText)}")`:`(replace@${this.oldPosition} "${gf(this.oldText)}" with "${gf(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;Ql(t,s,i),i+=4;for(let n=0;n<s;n++)GE(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=Gl(t,r);return r+=4,zT(t,r,i)}writeSize(){return 8+Hi.a(this.oldText)+Hi.a(this.newText)}write(t,r){return Ql(t,this.oldPosition,r),r+=4,Ql(t,this.newPosition,r),r+=4,r=Hi.c(t,this.oldText,r),r=Hi.c(t,this.newText,r),r}static read(t,r,i){const s=Gl(t,r);r+=4;const n=Gl(t,r);r+=4;const o=Hi.d(t,r);r+=Hi.a(o);const a=Hi.d(t,r);return r+=Hi.a(a),i.push(new Hi(s,o,n,a)),r}},qT=class Ul extends Ee{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new R),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new _T(t,i,a)}equals(t){return!(t instanceof Ul)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new tt(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)cu(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=pp(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=e3(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const $=t[w];a&&$._isTracked&&(a=!1);const P=$.range;if($.text){let J=!0;o||(J=!c3($.text),o=J),!s&&J&&(s=Uw($.text)),!n&&J&&(n=Hw($.text))}let A="",L=0,z=0,W=0;if($.text){let J;[L,z,W,J]=Vv($.text);const ne=this.getEOL();J===0||J===(ne===`\r
`?2:1)?A=$.text:A=$.text.replace(/\r\n|\r|\n/g,ne)}c[w]={sortIndex:w,identifier:$.identifier||null,range:P,rangeOffset:this.getOffsetAt(P.startLineNumber,P.startColumn),rangeLength:this.getValueLengthInRange(P),text:A,eolCount:L,firstLineLength:z,lastLineLength:W,forceMoveMarkers:!!$.forceMoveMarkers,isAutoWhitespaceEdit:$.isAutoWhitespaceEdit||!1}}c.sort(Ul.u);let l=!1;for(let w=0,$=c.length-1;w<$;w++){const P=c[w].range.getEndPosition(),A=c[w+1].range.getStartPosition();if(A.isBeforeOrEqual(P)){if(A.isBefore(P))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?Ul._getInverseEditRanges(c):[],h=[];if(r)for(let w=0;w<c.length;w++){const $=c[w],P=u[w];if($.isAutoWhitespaceEdit&&$.range.isEmpty())for(let A=P.startLineNumber;A<=P.endLineNumber;A++){let L="";A===P.startLineNumber&&(L=this.getLineContent($.range.startLineNumber),pp(L)!==-1)||h.push({lineNumber:A,oldContent:L})}}let f=null;if(i){let w=0;f=[];for(let $=0;$<c.length;$++){const P=c[$],A=u[$],L=this.getValueInRange(P.range),z=P.rangeOffset+w;w+=P.text.length-L.length,f[$]={sortIndex:P.sortIndex,identifier:P.identifier,range:A,text:L,textChange:new VT(P.rangeOffset,L,z,P.text)}}l||f.sort(($,P)=>$.sortIndex-P.sortIndex)}this.g=s,this.h=n,this.j=o;const p=this.t(c);let m=null;if(r&&h.length>0){h.sort((w,$)=>$.lineNumber-w.lineNumber),m=[];for(let w=0,$=h.length;w<$;w++){const P=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===P)continue;const A=h[w].oldContent,L=this.getLineContent(P);L.length===0||L===A||pp(L)!==-1||m.push(P)}}return this.m.fire(),new WI(f,p,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new tt(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let p=0,m=t.length;p<m;p++){const w=t[p],$=w.range;r=r||w.forceMoveMarkers,c.push(this.getValueInRange(new tt(o,a,$.startLineNumber,$.startColumn))),w.text.length>0&&c.push(w.text),o=$.endLineNumber,a=$.endColumn}const l=c.join(""),[u,h,f]=Vv(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(Ul.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new tt(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=Vv(r);let c;if(r.length>0){const l=n+1;l===1?c=new tt(i,s,i,s+o):c=new tt(i,s,i+l-1,a+1)}else c=new tt(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new tt(l,u,l,u+c.firstLineLength):h=new tt(l,u,l+f-1,c.lastLineLength+1)}else h=new tt(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=tt.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=tt.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},GT=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=fs(o);r[s]=new Vn(o,a)}const i=new qT(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},P8=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&h3(e)&&(this.b=u3,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=UT(this.e,e);this.a.push(new Vn(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=Uw(e)),this.k||(this.k=Hw(e)))}finish(e=!0){return this.o(),new GT(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=fs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},QT=class extends Ee{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new tt(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new P8;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new P8;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new C7(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new C7(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function A8(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new WC(a.join(`
`)+`
`,o.map(u=>new tt(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var OU=Object.freeze({id:"application",order:100,title:d(3993,null),type:"object"}),JT=Object.freeze({id:"workbench",order:7,title:d(3994,null),type:"object"}),ZT=Object.freeze({id:"security",scope:1,title:d(3995,null),type:"object",order:7}),UU=Object.freeze({id:"problems",title:d(3996,null),type:"object",order:101}),XT=Object.freeze({id:"window",order:8,title:d(3997,null),type:"object"}),YT={ConfigurationMigration:"base.contributions.configuration.migration"},KT=class{constructor(){this.migrations=[],this.a=new R,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},mf=new KT;Kt.add(YT.ConfigurationMigration,mf);var T8=class extends Ee{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,mf.migrations)})),this.c(mf.migrations),this.B(mf.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>ci(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};T8=__decorate([__param(0,Su),__param(1,jp)],T8);var R8=class extends Ee{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new oo,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!Cr&&(await this.b.getEnvironment())?.os!==1)return;Kt.as(wo.Configuration).registerConfiguration({...ZT,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(3998,null)},default:[],markdownDescription:d(3999,null),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4e3,null),scope:2}}})}};R8=__decorate([__param(0,T7)],R8);var Tl="window.newWindowProfile",L8=class extends Ee{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(Tl)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Kt.as(wo.Configuration),r={...XT,properties:{[Tl]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),d(4001,null)],description:d(4002,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(Tl);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(Tl);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(Tl,r?.name)}};L8=__decorate([__param(0,x2),__param(1,Su)],L8);var BU=ee("editorResolverService"),eR=Kt.as(wo.Configuration),tR={...JT,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(12347,null),additionalProperties:{type:"string"}}}};eR.registerConfiguration(tR);var Gv;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(Gv||(Gv={}));var N8;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(N8||(N8={}));function rR(e,t){if(new Set([te.extension,te.webviewPanel,te.vscodeWorkspaceTrust,te.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(je.sep)>=0?`${t.scheme}:${t.path}`:Ps(t);return ic(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var iR=class Hl{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Xt,this.h=new Map,this.j=new R,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new R,this.onDidOpenNotebookDocument=this.m.event,this.n=new R,this.onDidCloseNotebookDocument=this.n.event,this.o=new R,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new bi("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(Z.MainThreadNotebook),this.c=t.getProxy(Z.MainThreadNotebookDocuments),this.d=t.getProxy(Z.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Hl.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>md.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?Gv.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=Hl.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?Hl.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Ue(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&_s.from(t.content)});return x.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(x.revive(i));return so(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:Ot.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(Ni.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=x.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new Pe,h=this.p.add([u]),p=(Array.isArray(l)?l:[l]).map(m=>Um.from(m,this.i,u));return{cacheId:h,items:p}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if(au(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,jm.from(s),Hl.w(t,n)),$e(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new Or(_s.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(_s.to(r.value),i);return Ne.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=x.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new Yp(d(2725,null,this.A(o)),6);const l={metadata:Wb(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Rh(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=Wb(m.metadata,$=>!(a.options?.transientCellMetadata??{})[$]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),p={name:h.basename(o),isFile:(f.type&gn.File)!==0,isDirectory:(f.type&gn.Directory)!==0,isSymbolicLink:(f.type&gn.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&po.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&po.Locked),etag:Gy({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),p}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new O0;await(async(f,p,m)=>{await Promise.all(f.map(async w=>await Promise.all(w.filenamePatterns.map($=>{const P={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:$};return this.t.doInternalFileSearchWithCustomCallback(P,p,A=>{A.forEach(L=>{a.has(L)||s.some(W=>w.isFromSettings&&!W.isFromSettings?!1:W.filenamePatterns.some(J=>rR(J,L)))||a.add(L)})}).catch(A=>{if(A.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw A})}))))})(i,n,r);const l=new Xt;let u=!1;const h=Array.from(a).map(async f=>{const p=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce((P,A)=>P+A.cellResults.length,0)>r.maxResults){u=!0;return}const m=[],w=this.g.get(f);if(w)w.apiNotebook.getCells().forEach(A=>m.push({input:A.document.getText(),outputs:A.outputs.flatMap(L=>L.items.map(z=>z.data.toString()))}));else{const P=await this.s.value.readFile(f),A=Ne.fromString(P.toString()),L=await o.deserializeNotebook(A.buffer,n);if(n.isCancellationRequested)return;_s.from(L).cells.forEach(W=>m.push({input:W.source,outputs:W.outputs.flatMap(J=>J.items.map(ne=>ne.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((P,A)=>{const L=r.contentPattern.pattern,z=new QT(P.input,void 0,P.outputs),W=z.findInInputs(L),J=z.findInOutputs(L),ne=J.flatMap(Y=>A8(Y.matches,Y.textBuffer)).map((Y,se)=>(Y.webviewIndex=se,Y));if(W.length>0||J.length>0){const Y={index:A,contentResults:A8(W,z.inputTextBuffer),webviewResults:ne};p.push(Y)}});const $={resource:f,cellResults:p};l.set(f,$);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==yS&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==Gy({mtime:r.mtime,size:i.size}))throw new Yp(d(2726,null),3,r)}A(t){return t.scheme===te.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new Hv(r,this.d,t,i.visibleRanges.map(Ni.to),i.selections.map(Ni.to),typeof i.viewColumn=="number"?Ot.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=x.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=x.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new MT(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>Uv.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=x.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=V.String.with("notebookType","A notebook type"),i=new we("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new V("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>Ne.wrap(n))],new me("Notebook Data",n=>_s.to(n.value))),s=new we("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new V("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new Or(_s.from(n)))],new me("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},sR=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Da}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=x.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:dd.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof kn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=ar.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new Or(o))}},nR=class{constructor(e){this.c=e,this.a=new R,this.onDidSaveNotebookDocument=this.a.event,this.b=new R,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(x.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(x.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(x.revive(e));this.a.fire(t.apiNotebook)}},Qv=class{constructor(t,r){this.c=t,this.d=r,this.a=new R,this.b=new R,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(Ni.to)),r.selections&&i._acceptSelections(r.selections.selections.map(Ni.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn(Ot.to(t[r]))}};Qv=__decorate([__param(0,Xe)],Qv);var pa;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(pa||(pa={}));var WU=ee("INotebookExecutionService"),oR=100,F8;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(F8||(F8={}));var VU=ee("INotebookKernelService"),qU=ee("INotebookKernelHistoryService"),Jv=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new Xt,this.c=new Xt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new R,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(Z.MainThreadNotebookKernels);const o=new we("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new V("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],me.Void),a=new we("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[V.Uri],new me("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const W of this.j.values())if(W.controller.id===r&&Ye.equals(t.identifier,W.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${t.identifier}'`);let u=!1;const h=new R,f=new R,p={id:vf(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(vd.from):[]};let m=n??l,w,$;this.a.$addKernel(a,p).catch(W=>{console.log(W),u=!0});let P=0;const A=()=>{if(u)return;const W=++P;Promise.resolve().then(()=>{W===P&&this.a.$updateKernel(a,p)})},L=new Xt,z={get id(){return r},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return p.label},set label(W){p.label=W??t.displayName??t.name,A()},get detail(){return p.detail??""},set detail(W){p.detail=W,A()},get description(){return p.description??""},set description(W){p.description=W,A()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(W){p.supportedLanguages=W,A()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(W){p.supportsExecutionOrder=W,A()},get rendererScripts(){return p.preloads?p.preloads.map(vd.to):[]},get executeHandler(){return m},set executeHandler(W){m=W??l},get interruptHandler(){return w},set interruptHandler(W){w=W,p.supportsInterrupt=!!W,A()},set variableProvider(W){H(t,"notebookVariableProvider"),$=W,p.hasVariableProvider=!!W,W?.onDidChangeVariables(J=>c.a.$variablesUpdated(J.uri)),A()},get variableProvider(){return $},createNotebookCellExecution(W){if(u)throw new Error("notebook controller is DISPOSED");if(!L.has(W.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(L.keys()).map(J=>J.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.notebook.uri.toString()}`);return c._createNotebookCellExecution(W,vf(t.identifier,this.id))},createNotebookExecution(W){if(H(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!L.has(W.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(L.keys()).map(J=>J.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.uri.toString()}`);return c._createNotebookExecution(W,vf(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(W,J){J===Mh.Hidden&&H(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,W.uri,J)},onDidReceiveMessage:f.event,postMessage(W,J){return H(t,"notebookMessaging"),c.a.$postMessage(a,J&&c.n.getIdByEditor(J),W)},asWebviewUri(W){return H(t,"notebookMessaging"),xl(W,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:z,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:L}),z}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return vf(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new Pe;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>Hm.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(x.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(x.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(x.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(x.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const f=n==="named"?Tc.Named:Tc.Indexed,p=u.provideVariables(l.apiNotebook,h,f,o,a);let m=0;for await(const w of p){if(a.isCancellationRequested)return;const $={id:this.r++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[$.id]=w.variable,this.a.$receiveVariable(r,$),m++>=oR)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(x.revive(t)).getCell(r);if(n){const o=i?Om.to(i):jo.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new aR(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===yi.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new cR(r,i,this.a),o=n.onDidChangeState(()=>{n.state===ps.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};Jv=__decorate([__param(4,Xe)],Jv);var yi;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(yi||(yi={}));var aR=class aE extends Ee{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=aE.a++,this.c=new R,this.onDidChangeState=this.c.event,this.f=yi.Init,this.g=this.B(new At),this.h=new lR(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new Or(r))}t(){if(this.f===yi.Init)throw new Error("Must call start before modifying cell output");if(this.f===yi.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=Lh.ensureUniqueMimeTypes(r.items,!0);return i===r.items?Bs.from(r):Bs.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(ri(t));return this.r({editType:pa.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=Lh.ensureUniqueMimeTypes(ri(t),!0),this.r({editType:pa.OutputItems,items:t.map(Xo.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:pa.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===yi.Resolved||t.f===yi.Started)throw new Error("Cannot call start again");t.f=yi.Started,t.c.fire(),t.s({editType:pa.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===yi.Resolved)throw new Error("Cannot call resolve twice");t.f=yi.Resolved,t.c.fire(),t.h.flush();const o=n?{message:n.message,stack:n.stack,location:n?.location?{startLineNumber:n.location.start.line,startColumn:n.location.start.character,endLineNumber:n.location.end.line,endColumn:n.location.end.character}:void 0,uri:n.uri}:void 0;t.n.$completeExecution(t.b,new Or({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}},ps;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(ps||(ps={}));var cR=class cE extends Ee{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=cE.a++,this.c=new R,this.onDidChangeState=this.c.event,this.f=ps.Init,this.g=this.B(new At),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===ps.Resolved||this.f===ps.Started)throw new Error("Cannot call start again");this.f=ps.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===ps.Resolved)throw new Error("Cannot call resolve twice");this.f=ps.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},lR=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new oo,this.b=Date.now(),Ii(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function vf(e,t){return`${e.value}/${t}`}var uR=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(Z.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{Hv.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&Hv.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new R({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},hR=class{constructor(e){this.b=new Map,this.a=e.getProxy(Z.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(H(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),$e(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Me(t)?t:x.revive(t),r)}},dR=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:Fm.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(zf),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new At,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new M8(this.a,e),r&&i?i.token:ct.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function fR(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var M8=class extends S1{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([qA(100,(e,t)=>fR(e,t),()=>Object.create(null))],M8.prototype,"throttledReport",null);var pR=class lE{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Z.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=x.revive(r),n=this.c.get(t);return n?rr(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=lE.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,zo.from(t,this.d),i,s),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function gR(e,t,r){const i=e.getProxy(Z.MainThreadQuickOpen);class s{constructor(p,m){this.e=new Map,this.f=0,this.a=p,this.b=m}showQuickPick(p,m,w,$=ct.None){this.c=void 0;const P=Promise.resolve(m),A=++this.f,L=i.$show(A,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},$),z={},W=L.then(()=>z);return Promise.race([W,P]).then(J=>{if(J===z)return;const ne=Tt(p,"quickPickItemTooltip");return P.then(Y=>{const se=[];for(let Te=0;Te<Y.length;Te++){const ve=Y[Te];if(typeof ve=="string")se.push({label:ve,handle:Te});else if(ve.kind===Ac.Separator)se.push({type:"separator",label:ve.label});else{ve.tooltip&&!ne&&console.warn(`Extension '${p.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${p.identifier.value}`);const Ze=ve.iconPath?l(ve.iconPath):void 0;se.push({label:ve.label,iconPath:Ze?.iconPath,iconClass:Ze?.iconClass,description:ve.description,detail:ve.detail,picked:ve.picked,alwaysShow:ve.alwaysShow,tooltip:ne?Le.fromStrict(ve.tooltip):void 0,handle:Te})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=Te=>{w.onDidSelectItem(Y[Te])}),i.$setItems(A,se),L.then(Te=>{if(typeof Te=="number")return Y[Te];if(Array.isArray(Te))return Te.map(ve=>Y[ve])})})}).then(void 0,J=>{if(!en(J))return i.$setError(A,J),Promise.reject(J)})}$onItemSelected(p){this.c?.(p)}showInput(p,m=ct.None){return this.d=p?.validateInput,i.$input(p,typeof this.d=="function",m).then(void 0,w=>{if(!en(w))return Promise.reject(w)})}async $validateInput(p){if(!this.d)return;const m=await this.d(p);if(!m||typeof m=="string")return m;let w;switch(m.severity){case Ho.Info:w=It.Info;break;case Ho.Warning:w=It.Warning;break;case Ho.Error:w=It.Error;break;default:w=m.message?It.Error:It.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(p,m=ct.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[p]);if(!w)return;const $=await this.a.getWorkspaceFolders2();if($)return $.find(P=>P.uri.toString()===w.uri.toString())}createQuickPick(p){const m=new u(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(p){const m=new h(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(p,m){this.e.get(p)?._fireDidChangeValue(m)}$onDidAccept(p){this.e.get(p)?._fireDidAccept()}$onDidChangeActive(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(p,m){this.e.get(p)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(p,m,w){const $=this.e.get(p);$ instanceof u&&$._fireDidTriggerItemButton(m,w)}$onDidHide(p){this.e.get(p)?._fireDidHide()}}class n{static{this.a=1}constructor(p,m){this.x=p,this.y=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.n=[],this.o=new Map,this.p=new R,this.q=new R,this.r=new R,this.s=new R,this.u={id:this._id},this.v=!1,this.w=[this.r,this.s,this.p,this.q],this.onDidChangeValue=this.q.event,this.onDidAccept=this.p.event,this.onDidTriggerButton=this.r.event,this.onDidHide=this.s.event}get title(){return this.b}set title(p){this.b=p,this.z({title:p})}get step(){return this.c}set step(p){this.c=p,this.z({step:p})}get totalSteps(){return this.d}set totalSteps(p){this.d=p,this.z({totalSteps:p})}get enabled(){return this.g}set enabled(p){this.g=p,this.z({enabled:p})}get busy(){return this.j}set busy(p){this.j=p,this.z({busy:p})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(p){this.k=p,this.z({ignoreFocusOut:p})}get value(){return this.l}set value(p){this.l=p,this.z({value:p})}get placeholder(){return this.m}set placeholder(p){this.m=p,this.z({placeholder:p})}get buttons(){return this.n}set buttons(p){const m=Tt(this.x,"quickInputButtonLocation");!m&&p.some(w=>w.location)&&console.warn(`Extension '${this.x.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`),this.n=p.slice(),this.o.clear(),p.forEach((w,$)=>{const P=w===Pc.Back?-1:$;this.o.set(P,w)}),this.z({buttons:p.map((w,$)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===Pc.Back?-1:$,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.z({visible:!0})}hide(){this.e=!1,this.z({visible:!1})}_fireDidAccept(){this.p.fire()}_fireDidChangeValue(p){this.l=p,this.q.fire(p)}_fireDidTriggerButton(p){const m=this.o.get(p);m&&this.r.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.s.fire())}dispose(){this.v||(this.v=!0,this._fireDidHide(),this.w=zi(this.w),this.t&&(clearTimeout(this.t),this.t=void 0),this.y(),i.$dispose(this._id))}z(p){if(!this.v){for(const m of Object.keys(p)){const w=p[m];this.u[m]=w===void 0?null:w}"visible"in this.u?(this.t&&(clearTimeout(this.t),this.t=void 0),this.A()):this.e&&!this.t&&(this.t=setTimeout(()=>{this.t=void 0,this.A()},0))}}A(){i.$createOrUpdate(this.u),this.u={id:this._id}}}function o(f){if(f instanceof or)return{id:f.id};const p=c(f),m=a(f);return{dark:typeof p=="string"?x.file(p):p,light:typeof m=="string"?x.file(m):m}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const p=o(f);let m,w;return"id"in p?w=qt.asClassName(p):m=p,{iconPath:m,iconClass:w}}class u extends n{constructor(p,m){super(p,m),this.B=[],this.C=new Map,this.D=new Map,this.E=!1,this.F=!0,this.G=!0,this.H=!0,this.I=!1,this.J=[],this.K=new R,this.L=[],this.M=new R,this.N=new R,this.onDidChangeActive=this.K.event,this.onDidChangeSelection=this.M.event,this.onDidTriggerItemButton=this.N.event,this.w.push(this.K,this.M,this.N),this.z({type:"quickPick"})}get items(){return this.B}set items(p){this.B=p.slice(),this.C.clear(),this.D.clear(),p.forEach(($,P)=>{this.C.set(P,$),this.D.set($,P)});const m=Tt(this.x,"quickPickItemTooltip"),w=[];for(let $=0;$<p.length;$++){const P=p[$];if(P.kind===Ac.Separator)w.push({type:"separator",label:P.label});else{P.tooltip&&!m&&console.warn(`Extension '${this.x.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`);const A=P.iconPath?l(P.iconPath):void 0;w.push({handle:$,label:P.label,iconPath:A?.iconPath,iconClass:A?.iconClass,description:P.description,detail:P.detail,picked:P.picked,alwaysShow:P.alwaysShow,tooltip:m?Le.fromStrict(P.tooltip):void 0,buttons:P.buttons?.map((L,z)=>({...l(L.iconPath),tooltip:L.tooltip,handle:z}))})}}this.z({items:w})}get canSelectMany(){return this.E}set canSelectMany(p){this.E=p,this.z({canSelectMany:p})}get matchOnDescription(){return this.F}set matchOnDescription(p){this.F=p,this.z({matchOnDescription:p})}get matchOnDetail(){return this.G}set matchOnDetail(p){this.G=p,this.z({matchOnDetail:p})}get sortByLabel(){return this.H}set sortByLabel(p){this.H=p,this.z({sortByLabel:p})}get keepScrollPosition(){return this.I}set keepScrollPosition(p){this.I=p,this.z({keepScrollPosition:p})}get activeItems(){return this.J}set activeItems(p){this.J=p.filter(m=>this.D.has(m)),this.z({activeItems:this.J.map(m=>this.D.get(m))})}get selectedItems(){return this.L}set selectedItems(p){this.L=p.filter(m=>this.D.has(m)),this.z({selectedItems:this.L.map(m=>this.D.get(m))})}_fireDidChangeActive(p){const m=Ft(p.map(w=>this.C.get(w)));this.J=m,this.K.fire(m)}_fireDidChangeSelection(p){const m=Ft(p.map(w=>this.C.get(w)));this.L=m,this.M.fire(m)}_fireDidTriggerItemButton(p,m){const w=this.C.get(p);if(!w||!w.buttons||!w.buttons.length)return;const $=w.buttons[m];$&&this.N.fire({button:$,item:w})}}class h extends n{constructor(p,m){super(p,m),this.B=!1,this.z({type:"inputBox"})}get password(){return this.B}set password(p){this.B=p,this.z({password:p})}get prompt(){return this.C}set prompt(p){this.C=p,this.z({prompt:p})}get valueSelection(){return this.D}set valueSelection(p){this.D=p,this.z({valueSelection:p})}get validationMessage(){return this.E}set validationMessage(p){this.E=p,p?typeof p=="string"?this.z({validationMessage:p,severity:It.Error}):this.z({validationMessage:p.message,severity:p.severity??It.Error}):this.z({validationMessage:void 0,severity:It.Ignore})}}return new s(t,r)}var O8=new $r(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),QU=new $r(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),JU=new $r(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function mR(e,t,r=!1){const i=e||"",s=t||"",n=O8.value.collator.compare(i,s);return O8.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function vR(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function wf(e,t,r=!1){const i=e.split(si),s=t.split(si),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return mR(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=vR(i[l],s[l],r);if(u!==0)return u}}var Zv;function U8(e){return e instanceof x}function wR(e,t){return e.scheme===te.file&&t.scheme===te.file&&xs?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function Xv(e){if(e)return typeof e.iconPath=="string"?x.file(e.iconPath):x.isUri(e.iconPath)||qt.isThemeIcon(e.iconPath)?e.iconPath:void 0}function ga(e){if(e){if(x.isUri(e))return e;if(qt.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function bR(e){const t=e.references?.map(r=>({...r,icon:ga(r.icon)}));return{...e,references:t}}function Yv(e){return e?{...e,icon:ga(e.icon)}:void 0}function Kv(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:x.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:x.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return wf(r,i)}function yR(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=Kv(e,t),r!==0)return r;if(e.light&&t.light)r=Kv(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=Kv(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function xR(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(U8(i)&&U8(s)&&wR(i,s)))return i<s?-1:1}return 0}function H8(e,t){let r=wf(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=xR(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=yR(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=wf(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=wf(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function ER(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function kR(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?ER(e.arguments,t.arguments):e.arguments===t.arguments)}function $R(e,t){return Bi(e,t,kR)}var SR=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return H(this.l,"scmValidation"),this.h}set validateInput(e){if(H(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return H(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new R,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){H(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},CR=class uE{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.s=t,this.t=r,this.u=i,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new R,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new R,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=uE.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?rr(()=>this.t.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(H8),i=A0(this.p,t,H8).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const Y=new Pe;h=this.t.converter.toInternal(c.command,Y),this.k.set(l,Y)}else this.j.set(l,c.command);const f=Tt(this.x,"scmMultiDiffEditor"),p=f?c.multiDiffEditorOriginalUri:void 0,m=f?c.multiFileDiffEditorModifiedUri:void 0,w=Xv(c.decorations),$=c.decorations&&Xv(c.decorations.light)||w,P=c.decorations&&Xv(c.decorations.dark)||w,A=[$,P],L=c.decorations&&c.decorations.tooltip||"",z=c.decorations&&!!c.decorations.strikeThrough,W=c.decorations&&!!c.decorations.faded,J=c.contextValue||"";return{rawResource:[l,u,A,L,z,W,J,h,p,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},e0=class hE{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;Tt(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return H(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){H(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new Pe,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=Yv(t?.currentHistoryItemRef),i=Yv(t?.currentHistoryItemRemoteRef),s=Yv(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:ga(o.icon)})),s=r.modified.map(o=>({...o,icon:ga(o.icon)})),n=r.removed.map(o=>({...o,icon:ga(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new Pe,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return H(this.x,"scmActionButton"),this.q}set actionButton(t){H(this.x,"scmActionButton"),this.p.value=new Pe,this.q=t;const r=t!==void 0?{command:this.y.converter.toInternal(t.command,this.p.value),secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),description:t.description,enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r??null})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&$R(this.t,t))return;this.s.value=new Pe,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new ys,this.m=void 0,this.n=new ys,this.o=void 0,this.p=new ys,this.s=new ys,this.t=void 0,this.u=!1,this.v=new R,this.onDidChangeSelection=this.v.event,this.w=hE.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=x.from({scheme:te.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new SR(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=Tt(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new CR(this.#e,this.y,this.w,t,r,s,this.x),o=Et.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});Et.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([Sv(100)],e0.prototype,"eventuallyAddResourceGroups",null),__decorate([Sv(100)],e0.prototype,"eventuallyUpdateResourceStates",null);var t0=class{static{Zv=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new Zi,this.k=new R,this.f=t.getProxy(Z.MainThreadSCM),this.g=t.getProxy(Z.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=Zv.d++,o=new e0(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=x.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):rr(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):rr(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=Le.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}async $provideHistoryItemRefs(t,r,i){return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:ga(o.icon)}))??void 0}async $provideHistoryItems(t,r,i){return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>bR(o))??void 0}async $provideHistoryItemChanges(t,r,i,s){return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}};t0=Zv=__decorate([__param(3,Xe)],t0);var IR=class dE{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Z.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:B.to(r.selection),resourceUri:x.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=dE.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,zo.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},DR=class fE{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(Z.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new Pe,o=new At;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new Pe,o=new At;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new Pe,n=new At;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=fE.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),$e(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},PR=class jf{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new yc("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new yc("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=Ms.Left,a){if(this.i=!1,this.k="",this.q=new Pe,this.#e=t,this.#t=r,n&&s){this.c=xC(s.identifier,n);const c=i.get(this.c);c&&(o=c.alignLeft?Ms.Left:Ms.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(jf.a++);this.e=s,this.f=n,this.g=o,this.h=this.u(a)}u(t){if(Is(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!jf.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new Pe,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.m?r=this.m:r=d(2727,null,this.e.displayName||this.e.name);let i=this.n;this.o&&(i=jf.b.get(this.o.id));const s=Le.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,this.r?.internal,i,this.o,this.g===Ms.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},AR=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Ms.Left,Number.MIN_VALUE),this.a.name=d(2728,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ue(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},TR=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(Z.MainThreadStatusBar),this.b=t,this.c=new AR(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,r,i){return new PR(this.a,this.b,this.e,e,t,r,i)}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new Ue(()=>{r.dispose(),clearTimeout(i)})}},RR=class extends Ee{constructor(e,t){super(),this.m=t,this.a=new R,this.b=new R,this.c=new R,this.f=new R,this.g=new R,this.h=new R,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeActiveTextEditor=this.g.event,this.onDidChangeVisibleTextEditors=this.h.event,this.j=e.getProxy(Z.MainThreadTextEditors),this.B(this.m.onDidChangeVisibleTextEditors(r=>this.h.fire(r))),this.B(this.m.onDidChangeActiveTextEditor(r=>this.g.fire(r)))}getActiveTextEditor(){return this.m.activeEditor()}getVisibleTextEditors(e){const t=this.m.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:Ot.from(t),preserveFocus:r}:typeof t=="object"?i={position:Ot.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?B.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.j.$tryShowTextDocument(e.uri,i),n=s&&this.m.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new AD(this.j,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.m.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(gi.to);r._acceptSelections(i)}if(t.visibleRanges){const i=Ft(t.visibleRanges.map(B.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:Qo.to(t.options.lineNumbers)}}),t.selections){const i=Ao.fromValue(t.selections.source),s=t.selections.selections.map(gi.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=Ft(t.visibleRanges.map(B.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.m.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=Ot.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}getDiffInformation(e){return Promise.resolve(this.j.$getDiffInformation(e))}},r0=class{constructor(t){this.a=new Th(Us.Dark),this.b=new R}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=Us.Light;break;case"hcDark":r=Us.HighContrast;break;case"hcLight":r=Us.HighContrastLight;break;default:r=Us.Dark}this.a=new Th(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};r0=__decorate([__param(0,Qe)],r0);var YU=ee("IExtHostTimeline"),LR=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(Z.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&Ye.equals(i,this.b.get(r.source)?.extension)){const s=r.uri===void 0?void 0:x.revive(r.uri);return this.c.get(r.source)?.get(j8(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(x.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new Pe,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=n(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=j8(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,f;o.iconPath&&(a instanceof or?f={id:a.id,color:a.color}:x.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let p;return Rr.isMarkdownString(c.tooltip)?p=Le.from(c.tooltip):Me(c.tooltip)?p=c.tooltip:Rr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=Le.from(c.detail)):Me(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:p,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),$e(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function j8(e){return e?.toString()}var NR={IconContribution:"base.contributions.icons"},_8;(function(e){function t(r,i){let s=r.defaults;for(;qt.isThemeIcon(s);){const n=ma.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(_8||(_8={}));var B8;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Me(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Me(n.format)&&Me(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:x.parse(n.location)}))}}e.fromJSONObject=r})(B8||(B8={}));var FR=class{constructor(){this.a=new R,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2380,null)},fontCharacter:{type:"string",description:d(2381,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${qt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;qt.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${qt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!qt.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},ma=new FR;Kt.add(NR.IconContribution,ma);function bf(e,t,r,i){return ma.registerIcon(e,t,r,i)}function MR(){const e=rS();for(const t in e){const r="\\"+e[t].toString(16);ma.registerIcon(t,{fontCharacter:r})}}MR();var z8="vscode://schemas/icons",W8=Kt.as(Iu.JSONContribution);W8.registerSchema(z8,ma.getIconSchema());var V8=new no(()=>W8.notifySchemaChanged(z8),200);ma.onDidChange(()=>{V8.isScheduled()||V8.schedule()});var KU=bf("widget-close",fe.close,d(2382,null)),eH=bf("goto-previous-location",fe.arrowUp,d(2383,null)),tH=bf("goto-next-location",fe.arrowDown,d(2384,null)),rH=qt.modify(fe.sync,"spin"),iH=qt.modify(fe.loading,"spin"),sH=d(4236,null),nH=bf("default-view-icon",fe.window,d(4237,null)),yf;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(yf||(yf={}));var q8;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(q8||(q8={}));var OR=class extends Ee{constructor(){super(...arguments),this.c=this.B(new R),this.onDidRegister=this.c.event,this.f=this.B(new R),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},LE(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Kt.add(yf.ViewContainersRegistry,new OR);var xf;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(xf||(xf={}));function UR(e,t){const r=e.group??xf.More,i=t.group??xf.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var HR=class extends Ee{constructor(){super(...arguments),this.c=this.B(new R),this.onViewsRegistered=this.c.event,this.f=this.B(new R),this.onViewsDeregistered=this.f.event,this.g=this.B(new R),this.onDidChangeContainer=this.g.event,this.h=this.B(new R),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new H0}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),$e(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,$e(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(UR)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(d(4238,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};Kt.add(yf.ViewsRegistry,new HR);var oH=ee("viewDescriptorService"),G8;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(G8||(G8={}));var Q8;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Q8||(Q8={}));var gs=class extends Error{constructor(e){super(d(4239,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},jR=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function J8(e,t){if(Me(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var _R=class extends Ee{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new jR;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return H(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return H(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){pn(h)&&H(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&Wg.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}$getChildren(e,t){const r=this.a.get(e);return r?r.getChildren(t):Promise.reject(new gs(e))}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new gs(e));const l=Ws.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new gs(e));const n=await this.j(new bc,s,t,i,r);if(!(!n||i.isCancellationRequested))return Ws.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new gs(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new gs(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new gs(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new gs(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new gs(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new gs(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new BR(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},BR=class I0 extends Ee{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!St(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new R),this.onDidExpandElement=this.u.event,this.w=this.B(new R),this.onDidCollapseElement=this.w.event,this.y=this.B(new R),this.onDidChangeSelection=this.y.event,this.z=this.B(new R),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new R),this.onDidChangeVisibility=this.C.event,this.D=this.B(new R),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new R),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new At,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=Et.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(h).then(()=>f())})),u&&this.J.$setMessage(this.I,Le.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=St(r.select)?!0:r.select,s=St(r.focus)?!1:r.focus,n=St(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=wd.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Bi(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?Li.Checked:Li.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?Li.Checked:Li.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return rr(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):rr(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):rr(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new At(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=Ft(s||[]),o=await Promise.all(Ft(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return Ft(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new At,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),rr(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(d(2731,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return Rr.isMarkdownString(t)?Le.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===Li.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!wh.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new Pe),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:J8(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:St(r.collapsibleState)?An.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof or?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${I0.b}/${r}`;const a=J8(i,this.N),c=n?n.item.handle:I0.a;let l=a?a.label:s?Ps(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let f,p=0;do{if(f=`${c}/${p}:${l}`,o||!this.j.has(f)||u===f)break;p++}while(p<=h.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof or))return typeof t.iconPath=="string"||x.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof or)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return x.isUri(t)?t:x.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},zR=class pE{static{this.a=new Set([te.http,te.https])}constructor(t){this.c=new Map,this.b=t.getProxy(Z.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!pE.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),$e(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=x.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(x.revive(r.resolvedUri),{sourceUri:x.revive(r.sourceUri)},i)}},WR=class gE{static{this.a=0}constructor(t){this.c=new mn,this.d=new Map,this.b=t.getProxy(Z.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=gE.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),$e(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(x.revive(r))}catch(s){Sr(s)}return Promise.resolve(void 0)}async createAppUri(t){return x.revive(await this.b.$createAppUri(t))}},VR=class extends Ee{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new R),this.onDidDispose=this.#d.event,this.#h=this.B(new R),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,x.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Ot.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},qR=class mE extends Ee{static c(){return qr()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(Z.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Ot.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=da(t),l=mE.c();this.f.$createWebviewPanel(sf(t),l,r,{title:i,panelOptions:GR(n),webviewOptions:K9(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Ot.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:da(t)}),new Ue(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new VR(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function GR(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var QR=class extends Ee{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new R),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new R),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=wd.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},JR=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Z.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(sf(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:da(e)}),new Ue(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new QR(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},aH=new Q("debugType",void 0,{type:"string",description:d(5831,null)}),cH=new Q("debugConfigurationType",void 0,{type:"string",description:d(5832,null)}),lH=new Q("debugState","inactive",{type:"string",description:d(5833,null)}),ZR="debugUx",uH=new Q(ZR,"default",{type:"string",description:d(5834,null)}),hH=new Q("hasDebugged",!1,{type:"boolean",description:d(5835,null)}),dH=new Q("inDebugMode",!1,{type:"boolean",description:d(5836,null)}),fH=new Q("inDebugRepl",!1,{type:"boolean",description:d(5837,null)}),pH=new Q("breakpointWidgetVisible",!1,{type:"boolean",description:d(5838,null)}),gH=new Q("inBreakpointWidget",!1,{type:"boolean",description:d(5839,null)}),mH=new Q("breakpointsFocused",!0,{type:"boolean",description:d(5840,null)}),vH=new Q("watchExpressionsFocused",!0,{type:"boolean",description:d(5841,null)}),wH=new Q("watchExpressionsExist",!1,{type:"boolean",description:d(5842,null)}),bH=new Q("variablesFocused",!0,{type:"boolean",description:d(5843,null)}),yH=new Q("expressionSelected",!1,{type:"boolean",description:d(5844,null)}),xH=new Q("breakpointInputFocused",!1,{type:"boolean",description:d(5845,null)}),EH=new Q("callStackItemType",void 0,{type:"string",description:d(5846,null)}),kH=new Q("callStackSessionIsAttach",!1,{type:"boolean",description:d(5847,null)}),$H=new Q("callStackItemStopped",!1,{type:"boolean",description:d(5848,null)}),SH=new Q("callStackSessionHasOneThread",!1,{type:"boolean",description:d(5849,null)}),CH=new Q("watchItemType",void 0,{type:"string",description:d(5850,null)}),IH=new Q("canViewMemory",void 0,{type:"boolean",description:d(5851,null)}),DH=new Q("breakpointItemType",void 0,{type:"string",description:d(5852,null)}),PH=new Q("breakpointItemBytes",void 0,{type:"boolean",description:d(5853,null)}),AH=new Q("breakpointHasModes",!1,{type:"boolean",description:d(5854,null)}),TH=new Q("breakpointSupportsCondition",!1,{type:"boolean",description:d(5855,null)}),RH=new Q("loadedScriptsSupported",!1,{type:"boolean",description:d(5856,null)}),LH=new Q("loadedScriptsItemType",void 0,{type:"string",description:d(5857,null)}),NH=new Q("focusedSessionIsAttach",!1,{type:"boolean",description:d(5858,null)}),FH=new Q("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(5859,null)}),MH=new Q("stepBackSupported",!1,{type:"boolean",description:d(5860,null)}),OH=new Q("restartFrameSupported",!1,{type:"boolean",description:d(5861,null)}),UH=new Q("stackFrameSupportsRestart",!1,{type:"boolean",description:d(5862,null)}),HH=new Q("jumpToCursorSupported",!1,{type:"boolean",description:d(5863,null)}),jH=new Q("stepIntoTargetsSupported",!1,{type:"boolean",description:d(5864,null)}),_H=new Q("breakpointsExist",!1,{type:"boolean",description:d(5865,null)}),BH=new Q("debuggersAvailable",!1,{type:"boolean",description:d(5866,null)}),zH=new Q("debugExtensionAvailable",!0,{type:"boolean",description:d(5867,null)}),WH=new Q("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(5868,null)}),VH=new Q("debugSetVariableSupported",!1,{type:"boolean",description:d(5869,null)}),qH=new Q("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(5870,null)}),GH=new Q("debugSetExpressionSupported",!1,{type:"boolean",description:d(5871,null)}),QH=new Q("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(5872,null)}),JH=new Q("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(5873,null)}),ZH=new Q("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(5874,null)}),XH=new Q("terminateDebuggeeSupported",!1,{type:"boolean",description:d(5875,null)}),YH=new Q("suspendDebuggeeSupported",!1,{type:"boolean",description:d(5876,null)}),KH=new Q("variableEvaluateNamePresent",!1,{type:"boolean",description:d(5877,null)}),ej=new Q("variableIsReadonly",!1,{type:"boolean",description:d(5878,null)}),tj=new Q("variableValue",!1,{type:"string",description:d(5879,null)}),rj=new Q("variableType",!1,{type:"string",description:d(5880,null)}),ij=new Q("variableInterfaces",!1,{type:"array",description:d(5881,null)}),sj=new Q("variableName",!1,{type:"string",description:d(5882,null)}),nj=new Q("variableLanguage",!1,{type:"string",description:d(5883,null)}),oj=new Q("variableExtensionId",!1,{type:"string",description:d(5884,null)}),aj=new Q("exceptionWidgetVisible",!1,{type:"boolean",description:d(5885,null)}),cj=new Q("multiSessionRepl",!1,{type:"boolean",description:d(5886,null)}),lj=new Q("multiSessionDebug",!1,{type:"boolean",description:d(5887,null)}),uj=new Q("disassembleRequestSupported",!1,{type:"boolean",description:d(5888,null)}),hj=new Q("disassemblyViewFocus",!1,{type:"boolean",description:d(5889,null)}),dj=new Q("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(5890,null)}),fj=new Q("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(5891,null)}),pj={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(5893,null)},Z8;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(Z8||(Z8={}));var X8;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(X8||(X8={}));var Y8;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(Y8||(Y8={}));var Ef;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Ef||(Ef={}));var K8;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(K8||(K8={}));var gj=ee("debugService"),ex;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(ex||(ex={}));var tx;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(tx||(tx={}));var rx;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(rx||(rx={}));var ix;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(ix||(ix={}));var sx;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:x.revive(t.iconPath.light),dark:x.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(sx||(sx={}));var XR=class vE{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(Z.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(Ut.from)})}},o={codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:x.revive(c.resource)})),conversation:r.conversation};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=vE.a++;return this.b.$registerCodeMapperProvider(i),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function YR(e){const t=e.get(ir),r=e.get(lo),i=e.get(Hd),s=e.get(Qs),n=e.get(os),o=e.get(jd),a=e.get(as),c=e.get(pu),l=e.get(Qe),u=e.get(u1),h=e.get(d1),f=e.get(qa),p=e.get(Xe),m=e.get(v1),w=e.get(zd),$=e.get(P9),P=e.get(M1),A=e.get(wl),L=e.get(H1),z=e.get(C1),W=e.get(P1);l.set(ue.ExtHostFileSystemInfo,r),l.set(ue.ExtHostLogLevelServiceShape,f),l.set(ue.ExtHostWorkspace,n),l.set(ue.ExtHostConfiguration,a),l.set(ue.ExtHostExtensionService,s),l.set(ue.ExtHostStorage,u),l.set(ue.ExtHostTunnelService,m),l.set(ue.ExtHostWindow,$),l.set(ue.ExtHostSecretState,P),l.set(ue.ExtHostTelemetry,o),l.set(ue.ExtHostEditorTabs,A),l.set(ue.ExtHostManagedSockets,L),l.set(ue.ExtHostAuthentication,z),l.set(ue.ExtHostChatProvider,W);const J=l.set(ue.ExtHostDecorations,e.get(B7)),ne=l.set(ue.ExtHostDocumentsAndEditors,e.get(la)),Y=l.set(ue.ExtHostCommands,e.get(Bn)),se=l.set(ue.ExtHostTerminalService,e.get(oa)),Te=l.set(ue.ExtHostTerminalShellIntegration,e.get(A9)),ve=l.set(ue.ExtHostDebugService,e.get(E9)),Ze=l.set(ue.ExtHostSearch,e.get(D9)),at=l.set(ue.ExtHostTask,e.get(d9)),X=l.set(ue.ExtHostOutputService,e.get(_7)),q=l.set(ue.ExtHostLocalization,e.get(U1)),ie=l.set(ue.ExtHostUrls,new WR(l)),G=l.set(ue.ExtHostDocuments,new gT(l,ne)),ae=l.set(ue.ExtHostDocumentContentProviders,new fT(l,ne,p)),xe=l.set(ue.ExtHostDocumentSaveParticipant,new pT(p,G,l.getProxy(Z.MainThreadBulkEdits))),pe=l.set(ue.ExtHostNotebook,new iR(l,Y,ne,G,i,Ze,p)),Ke=l.set(ue.ExtHostNotebookDocuments,new nR(pe)),ze=l.set(ue.ExtHostNotebookEditors,new Qv(p,pe)),yt=l.set(ue.ExtHostNotebookKernels,new Jv(l,t,pe,Y,p)),xt=l.set(ue.ExtHostNotebookRenderers,new uR(l,pe)),jt=l.set(ue.ExtHostNotebookDocumentSaveParticipant,new sR(p,pe,l.getProxy(Z.MainThreadBulkEdits))),rt=l.set(ue.ExtHostEditors,new RR(l,ne)),Qt=l.set(ue.ExtHostTreeViews,new _R(l.getProxy(Z.MainThreadTreeViews),Y,p)),Kr=l.set(ue.ExtHostEditorInsets,new VA(l.getProxy(Z.MainThreadEditorInsets),rt,t.remote)),ei=l.set(ue.ExtHostDiagnostics,new Cv(l,p,r,ne)),Nr=l.set(ue.ExtHostLanguages,new NT(l,G,Y.converter,c)),Ie=l.set(ue.ExtHostLanguageFeatures,new RT(l,c,G,Y,ei,p,w,o)),ti=l.set(ue.ExtHostCodeMapper,new XR(l)),We=l.set(ue.ExtHostFileSystem,new kT(l,Ie)),Br=l.set(ue.ExtHostFileSystemEventService,new IT(l,p,ne)),xr=l.set(ue.ExtHostQuickOpen,gR(l,n,Y)),Er=l.set(ue.ExtHostSCM,new t0(l,Y,G,p)),vs=l.set(ue.ExtHostQuickDiff,new pR(l,c)),ws=l.set(ue.ExtHostShare,new IR(l,c)),Ys=l.set(ue.ExtHostComments,GA(l,Y,G)),Ei=l.set(ue.ExtHostProgress,new dR(l.getProxy(Z.MainThreadProgress))),Ks=l.set(ue.ExtHostLabelService,new PT(l)),ji=l.set(ue.ExtHostTheming,new r0(l)),_i=l.set(ue.ExtHostTimeline,new LR(l,Y)),Jt=l.set(ue.ExtHostWebviews,new rT(l,t.remote,n,p,w)),Fr=l.set(ue.ExtHostWebviewPanels,new qR(l,Jt,n)),mt=l.set(ue.ExtHostCustomEditors,new cT(l,G,h,Jt,Fr)),Rt=l.set(ue.ExtHostWebviewViews,new JR(l,Jt)),ki=l.set(ue.ExtHostTesting,e.get(Xd)),bs=l.set(ue.ExtHostUriOpeners,new zR(l)),zr=l.set(ue.ExtHostProfileContentHandlers,new hR(l));l.set(ue.ExtHostInteractive,new DT(l,pe,ne,Y,p));const _t=l.set(ue.ExtHostChatAgents2,new UA(l,p,Y,G,W)),D=l.set(ue.ExtHostChatVariables,new jA(l)),F=l.set(ue.ExtHostLanguageModelTools,new LT(l)),U=l.set(ue.ExtHostAiRelatedInformation,new TA(l)),ce=l.set(ue.ExtHostAiEmbeddingVector,new vT(l)),be=l.set(ue.ExtHostStatusBar,new TR(l,Y.converter)),lt=l.set(ue.ExtHostSpeech,new DR(l)),le=l.set(ue.ExtHostEmbeddings,new mT(l)),Zt=Object.values(ue);l.assertRegistered(Zt);const wt=new kv(l,ne),Bt=new BA(l),sr=new Mv(l,p),vt=new dT(l);return MA.register(Y),function(S,bt,tr){function N(v){return(b,I,ye)=>{const et=v(Nt=>{try{b.call(I,Nt)}catch(ka){zf(new Error(`[ExtensionListenerError] Extension '${S.identifier.value}' FAILED to handle event: ${ka.toString()}`,{cause:ka})),o.onExtensionError(S.identifier,ka)}});return ye?.push(et),et}}const y=function(){let v=!S.isUnderDevelopment;function b(){v||(p.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function I(ye){if(Array.isArray(ye))ye.forEach(I);else if(typeof ye=="string")b();else{const et=ye;typeof et.scheme>"u"&&b(),typeof et.exclusive=="boolean"&&H(S,"documentFiltersExclusive")}return ye}}(),E={getSession(v,b,I){return typeof I?.forceNewSession=="object"&&I.forceNewSession.learnMore&&H(S,"authLearnMore"),z.getSession(S,v,b,I)},getAccounts(v){return z.getAccounts(v)},async hasSession(v,b){return H(S,"authSession"),!!await z.getSession(S,v,b,{silent:!0})},get onDidChangeSessions(){return N(z.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(v,b,I,ye){return z.registerAuthenticationProvider(v,b,I,ye)}},k={registerCommand(v,b,I){return Y.registerCommand(!0,v,b,I,void 0,S)},registerTextEditorCommand(v,b,I){return Y.registerCommand(!0,v,(...ye)=>{const et=rt.getActiveTextEditor();if(!et){p.warn("Cannot execute "+v+" because there is no active text editor.");return}return et.edit(Nt=>{b.apply(I,[et,Nt,...ye])}).then(Nt=>{Nt||p.warn("Edits from command "+v+" were not applied.")},Nt=>{p.warn("An error occurred while running command "+v,Nt)})},void 0,void 0,S)},registerDiffInformationCommand:(v,b,I)=>(H(S,"diffCommand"),Y.registerCommand(!0,v,async(...ye)=>{const et=ne.activeEditor(!0);if(!et){p.warn("Cannot execute "+v+" because there is no active text editor.");return}const Nt=await rt.getDiffInformation(et.id);b.apply(I,[Nt,...ye])},void 0,void 0,S)),executeCommand(v,...b){return Y.executeCommand(v,...b)},getCommands(v=!1){return Y.getCommands(v)}},C={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Bt.value},get shell(){return se.getDefaultShell(!1)},get onDidChangeShell(){return N(se.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return N(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return H(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return H(S,"telemetry"),N(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return e7(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return K6.validateSender(v),o.instantiateLogger(S,v,b)},openExternal(v,b){return $.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return ie.createAppUri(v);try{return await $.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(bp(v,te.http)||bp(v,te.https))return v;throw b}},get remoteName(){return ng(t.remote.authority)},get remoteAuthority(){return H(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return p.getLevel()},get onDidChangeLogLevel(){return N(p.onDidChangeLogLevel)},get appQuality(){return H(S,"resolvers"),t.quality},get appCommit(){return H(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(C);const T={createTestController(v,b,I){return ki.createTestController(S,v,b,I)},createTestObserver(){return H(S,"testObserver"),ki.createTestObserver()},runTests(v){return H(S,"testObserver"),ki.runTests(v)},registerTestFollowupProvider(v){return H(S,"testObserver"),ki.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return H(S,"testObserver"),N(ki.onResultsChanged)},get testResults(){return H(S,"testObserver"),ki.results}},M=t.remote.isRemote?Ln.Workspace:Ln.UI,_={getExtension(v,b){Tt(S,"extensionsAny")||(b=!1);const I=bt.mine.getExtensionDescription(v);if(I)return new ul(s,S.identifier,I,M,!1);if(b){const ye=bt.all.getExtensionDescription(v);if(ye)return new ul(s,S.identifier,ye,M,!0)}},get all(){const v=[];for(const b of bt.mine.getAllExtensionDescriptions())v.push(new ul(s,S.identifier,b,M,!1));return v},get allAcrossExtensionHosts(){H(S,"extensionsAny");const v=new mn(bt.mine.getAllExtensionDescriptions().map(I=>I.identifier)),b=[];for(const I of bt.all.getAllExtensionDescriptions()){const ye=!v.has(I.identifier);b.push(new ul(s,S.identifier,I,M,ye))}return b},get onDidChange(){return Tt(S,"extensionsAny")?N(Et.any(bt.mine.onDidChange,bt.all.onDidChange)):N(bt.mine.onDidChange)}},K={createDiagnosticCollection(v){return ei.createDiagnosticCollection(S.identifier,v)},get onDidChangeDiagnostics(){return N(ei.onDidChangeDiagnostics)},getDiagnostics:v=>ei.getDiagnostics(v),getLanguages(){return Nr.getLanguages()},setTextDocumentLanguage(v,b){return Nr.changeLanguage(v.uri,b)},match(v,b){const I=Mm.from(v);let ye;return j9(I)&&(ye=pe.notebookDocuments.find(et=>et.apiNotebook.getCells().find(Nt=>Nt.document===b))?.apiNotebook),H9(I,b.uri,b.languageId,!0,ye?.uri,ye?.notebookType)},registerCodeActionsProvider(v,b,I){return Ie.registerCodeActionProvider(S,y(v),b,I)},registerDocumentPasteEditProvider(v,b,I){return H(S,"documentPaste"),Ie.registerDocumentPasteEditProvider(S,y(v),b,I)},registerCodeLensProvider(v,b){return Ie.registerCodeLensProvider(S,y(v),b)},registerDefinitionProvider(v,b){return Ie.registerDefinitionProvider(S,y(v),b)},registerDeclarationProvider(v,b){return Ie.registerDeclarationProvider(S,y(v),b)},registerImplementationProvider(v,b){return Ie.registerImplementationProvider(S,y(v),b)},registerTypeDefinitionProvider(v,b){return Ie.registerTypeDefinitionProvider(S,y(v),b)},registerHoverProvider(v,b){return Ie.registerHoverProvider(S,y(v),b,S.identifier)},registerEvaluatableExpressionProvider(v,b){return Ie.registerEvaluatableExpressionProvider(S,y(v),b,S.identifier)},registerInlineValuesProvider(v,b){return Ie.registerInlineValuesProvider(S,y(v),b,S.identifier)},registerDocumentHighlightProvider(v,b){return Ie.registerDocumentHighlightProvider(S,y(v),b)},registerMultiDocumentHighlightProvider(v,b){return Ie.registerMultiDocumentHighlightProvider(S,y(v),b)},registerLinkedEditingRangeProvider(v,b){return Ie.registerLinkedEditingRangeProvider(S,y(v),b)},registerReferenceProvider(v,b){return Ie.registerReferenceProvider(S,y(v),b)},registerRenameProvider(v,b){return Ie.registerRenameProvider(S,y(v),b)},registerNewSymbolNamesProvider(v,b){return H(S,"newSymbolNamesProvider"),Ie.registerNewSymbolNamesProvider(S,y(v),b)},registerDocumentSymbolProvider(v,b,I){return Ie.registerDocumentSymbolProvider(S,y(v),b,I)},registerWorkspaceSymbolProvider(v){return Ie.registerWorkspaceSymbolProvider(S,v)},registerDocumentFormattingEditProvider(v,b){return Ie.registerDocumentFormattingEditProvider(S,y(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return Ie.registerDocumentRangeFormattingEditProvider(S,y(v),b)},registerOnTypeFormattingEditProvider(v,b,I,...ye){return Ie.registerOnTypeFormattingEditProvider(S,y(v),b,[I].concat(ye))},registerDocumentSemanticTokensProvider(v,b,I){return Ie.registerDocumentSemanticTokensProvider(S,y(v),b,I)},registerDocumentRangeSemanticTokensProvider(v,b,I){return Ie.registerDocumentRangeSemanticTokensProvider(S,y(v),b,I)},registerSignatureHelpProvider(v,b,I,...ye){return typeof I=="object"?Ie.registerSignatureHelpProvider(S,y(v),b,I):Ie.registerSignatureHelpProvider(S,y(v),b,typeof I>"u"?[]:[I,...ye])},registerCompletionItemProvider(v,b,...I){return Ie.registerCompletionItemProvider(S,y(v),b,I)},registerInlineCompletionItemProvider(v,b,I){return b.handleDidShowCompletionItem&&H(S,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&H(S,"inlineCompletionsAdditions"),I&&H(S,"inlineCompletionsAdditions"),Ie.registerInlineCompletionsProvider(S,y(v),b,I)},registerInlineEditProvider(v,b){return H(S,"inlineEdit"),Ie.registerInlineEditProvider(S,y(v),b)},registerDocumentLinkProvider(v,b){return Ie.registerDocumentLinkProvider(S,y(v),b)},registerColorProvider(v,b){return Ie.registerColorProvider(S,y(v),b)},registerFoldingRangeProvider(v,b){return Ie.registerFoldingRangeProvider(S,y(v),b)},registerSelectionRangeProvider(v,b){return Ie.registerSelectionRangeProvider(S,v,b)},registerCallHierarchyProvider(v,b){return Ie.registerCallHierarchyProvider(S,v,b)},registerTypeHierarchyProvider(v,b){return Ie.registerTypeHierarchyProvider(S,v,b)},setLanguageConfiguration:(v,b)=>Ie.setLanguageConfiguration(S,v,b),getTokenInformationAtPosition(v,b){return H(S,"tokenInformation"),Nr.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return Ie.registerInlayHintsProvider(S,v,b)},createLanguageStatusItem(v,b){return Nr.createLanguageStatusItem(S,v,b)},registerDocumentDropEditProvider(v,b,I){return Ie.registerDocumentOnDropEditProvider(S,v,b,Tt(S,"documentPaste")?I:void 0)}},oe={get activeTextEditor(){return rt.getActiveTextEditor()},get visibleTextEditors(){return rt.getVisibleTextEditors()},get activeTerminal(){return se.activeTerminal},get terminals(){return se.terminals},async showTextDocument(v,b,I){x.isUri(v)&&v.scheme===te.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const ye=await(x.isUri(v)?Promise.resolve(ke.openTextDocument(v)):Promise.resolve(v));return rt.showTextDocument(ye,b,I)},createTextEditorDecorationType(v){return rt.createTextEditorDecorationType(S,v)},onDidChangeActiveTextEditor(v,b,I){return N(rt.onDidChangeActiveTextEditor)(v,b,I)},onDidChangeVisibleTextEditors(v,b,I){return N(rt.onDidChangeVisibleTextEditors)(v,b,I)},onDidChangeTextEditorSelection(v,b,I){return N(rt.onDidChangeTextEditorSelection)(v,b,I)},onDidChangeTextEditorOptions(v,b,I){return N(rt.onDidChangeTextEditorOptions)(v,b,I)},onDidChangeTextEditorVisibleRanges(v,b,I){return N(rt.onDidChangeTextEditorVisibleRanges)(v,b,I)},onDidChangeTextEditorViewColumn(v,b,I){return N(rt.onDidChangeTextEditorViewColumn)(v,b,I)},onDidCloseTerminal(v,b,I){return N(se.onDidCloseTerminal)(v,b,I)},onDidOpenTerminal(v,b,I){return N(se.onDidOpenTerminal)(v,b,I)},onDidChangeActiveTerminal(v,b,I){return N(se.onDidChangeActiveTerminal)(v,b,I)},onDidChangeTerminalDimensions(v,b,I){return H(S,"terminalDimensions"),N(se.onDidChangeTerminalDimensions)(v,b,I)},onDidChangeTerminalState(v,b,I){return N(se.onDidChangeTerminalState)(v,b,I)},onDidWriteTerminalData(v,b,I){return H(S,"terminalDataWriteEvent"),N(se.onDidWriteTerminalData)(v,b,I)},onDidExecuteTerminalCommand(v,b,I){return H(S,"terminalExecuteCommandEvent"),N(se.onDidExecuteTerminalCommand)(v,b,I)},onDidChangeTerminalShellIntegration(v,b,I){return N(Te.onDidChangeTerminalShellIntegration)(v,b,I)},onDidStartTerminalShellExecution(v,b,I){return N(Te.onDidStartTerminalShellExecution)(v,b,I)},onDidEndTerminalShellExecution(v,b,I){return N(Te.onDidEndTerminalShellExecution)(v,b,I)},get state(){return $.getState()},onDidChangeWindowState(v,b,I){return N($.onDidChangeWindowState)(v,b,I)},showInformationMessage(v,...b){return sr.showMessage(S,It.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return sr.showMessage(S,It.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return sr.showMessage(S,It.Error,v,b[0],b.slice(1))},showQuickPick(v,b,I){return xr.showQuickPick(S,v,b,I)},showWorkspaceFolderPick(v){return xr.showWorkspaceFolderPick(v)},showInputBox(v,b){return xr.showInput(v,b)},showOpenDialog(v){return vt.showOpenDialog(S,v)},showSaveDialog(v){return vt.showSaveDialog(v)},createStatusBarItem(v,b,I){let ye,et,Nt;return typeof v=="string"?(ye=v,et=b,Nt=I):(et=v,Nt=b),be.createStatusBarEntry(S,ye,et,Nt)},setStatusBarMessage(v,b){return be.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",S,"Use 'withProgress' instead."),Ei.withProgress(S,{location:Pn.SourceControl},(b,I)=>v({report(ye){}}))},withProgress(v,b){return Ei.withProgress(S,v,b)},createOutputChannel(v,b){return X.createOutputChannel(v,b,S)},createWebviewPanel(v,b,I,ye){return Fr.createWebviewPanel(S,v,b,I,ye)},createWebviewTextEditorInset(v,b,I,ye){return H(S,"editorInsets"),Kr.createWebviewEditorInset(v,b,I,ye,S)},createTerminal(v,b,I){return typeof v=="object"?"pty"in v?se.createExtensionTerminal(v):se.createTerminalFromOptions(v):se.createTerminal(v,b,I)},registerTerminalLinkProvider(v){return se.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return se.registerProfileProvider(S,v,b)},registerTerminalQuickFixProvider(v,b){return H(S,"terminalQuickFixProvider"),se.registerTerminalQuickFixProvider(v,S.identifier.value,b)},registerTreeDataProvider(v,b){return Qt.registerTreeDataProvider(v,b,S)},createTreeView(v,b){return Qt.createTreeView(v,b,S)},registerWebviewPanelSerializer:(v,b)=>Fr.registerWebviewPanelSerializer(S,v,b),registerCustomEditorProvider:(v,b,I={})=>mt.registerCustomEditorProvider(S,v,b,I),registerFileDecorationProvider(v){return J.registerFileDecorationProvider(v,S)},registerUriHandler(v){return ie.registerUriHandler(S,v)},createQuickPick(){return xr.createQuickPick(S)},createInputBox(){return xr.createInputBox(S)},get activeColorTheme(){return ji.activeColorTheme},onDidChangeActiveColorTheme(v,b,I){return N(ji.onDidChangeActiveColorTheme)(v,b,I)},registerWebviewViewProvider(v,b,I){return Rt.registerWebviewViewProvider(S,v,b,I?.webviewOptions)},get activeNotebookEditor(){return pe.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,I){return N(pe.onDidChangeActiveNotebookEditor)(v,b,I)},get visibleNotebookEditors(){return pe.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return N(pe.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,I){return N(ze.onDidChangeNotebookEditorSelection)(v,b,I)},onDidChangeNotebookEditorVisibleRanges(v,b,I){return N(ze.onDidChangeNotebookEditorVisibleRanges)(v,b,I)},showNotebookDocument(v,b){return pe.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,I){return H(S,"externalUriOpener"),bs.registerExternalUriOpener(S.identifier,v,b,I)},registerProfileContentHandler(v,b){return H(S,"profileContentHandlers"),zr.registerProfileContentHandler(S,v,b)},registerQuickDiffProvider(v,b,I,ye){return H(S,"quickDiffProvider"),vs.registerQuickDiffProvider(y(v),b,I,ye)},get tabGroups(){return A.tabGroups},registerShareProvider(v,b){return H(S,"shareProvider"),ws.registerShareProvider(y(v),b)}},ke={get rootPath(){return w.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new tn("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new tn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new tn("workspaceFile")},updateWorkspaceFolders:(v,b,...I)=>n.updateWorkspaceFolders(S,v,b||0,...I),onDidChangeWorkspaceFolders:function(v,b,I){return N(n.onDidChangeWorkspace)(v,b,I)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,I,ye)=>n.findFiles(v,b,I,S.identifier,ye),findFiles2:(v,b,I)=>(H(S,"findFiles2"),n.findFiles2(v,b,S.identifier,I)),findFiles2New:(v,b,I)=>(H(S,"findFiles2New"),n.findFiles2New(v,b,S.identifier,I)),findTextInFiles:(v,b,I,ye)=>{H(S,"findTextInFiles");let et,Nt;return typeof b=="object"?(et=b,Nt=I):(et={},Nt=b,ye=I),n.findTextInFiles(v,et||{},Nt,S.identifier,ye)},findTextInFilesNew:(v,b,I)=>(H(S,"findTextInFilesNew"),H(S,"textSearchProviderNew"),n.findTextInFilesNew(v,b,S.identifier,I)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return wt.applyWorkspaceEdit(v,S,b)},createFileSystemWatcher:(v,b,I,ye)=>{let et;return b&&typeof b!="boolean"?(H(S,"createFileSystemWatcher"),et={...b,correlate:!0}):et={ignoreCreateEvents:!!b,ignoreChangeEvents:!!I,ignoreDeleteEvents:!!ye,correlate:!1},Br.createFileSystemWatcher(n,tr,S,v,et)},get textDocuments(){return G.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new tn("textDocuments")},openTextDocument(v){let b;const I=v;if(typeof v=="string")b=Promise.resolve(x.file(v));else if(x.isUri(v))b=Promise.resolve(v);else if(!I||typeof I=="object")b=G.createDocumentData(I);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(ye=>(p.trace(`openTextDocument from ${S.identifier}`),ye.scheme===te.vscodeRemote&&!ye.authority&&w.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),G.ensureDocumentData(ye).then(et=>et.document)))},onDidOpenTextDocument:(v,b,I)=>N(G.onDidAddDocument)(v,b,I),onDidCloseTextDocument:(v,b,I)=>N(G.onDidRemoveDocument)(v,b,I),onDidChangeTextDocument:(v,b,I)=>N(G.onDidChangeDocument)(v,b,I),onDidSaveTextDocument:(v,b,I)=>N(G.onDidSaveDocument)(v,b,I),onWillSaveTextDocument:(v,b,I)=>N(xe.getOnWillSaveTextDocumentEvent(S))(v,b,I),get notebookDocuments(){return pe.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let I;if(x.isUri(v))I=v,await pe.openNotebookDocument(v);else if(typeof v=="string")I=x.revive(await pe.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return pe.getNotebookDocument(I).apiNotebook},onDidSaveNotebookDocument(v,b,I){return N(Ke.onDidSaveNotebookDocument)(v,b,I)},onDidChangeNotebookDocument(v,b,I){return N(Ke.onDidChangeNotebookDocument)(v,b,I)},onWillSaveNotebookDocument(v,b,I){return N(jt.getOnWillSaveNotebookDocumentEvent(S))(v,b,I)},get onDidOpenNotebookDocument(){return N(pe.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return N(pe.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,I,ye){return pe.registerNotebookSerializer(S,v,b,I,Tt(S,"notebookLiveShare")?ye:void 0)},onDidChangeConfiguration:(v,b,I)=>N(tr.onDidChangeConfiguration)(v,b,I),getConfiguration(v,b){return b=arguments.length===1?void 0:b,tr.getConfiguration(v,b,S)},registerTextDocumentContentProvider(v,b){return ae.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),at.registerTaskProvider(S,v,b)),registerFileSystemProvider(v,b,I){return j0(We.registerFileSystemProvider(S,v,b,I),i.addFileSystemProvider(v,b,I))},get fs(){return i.value},registerFileSearchProvider:(v,b)=>(H(S,"fileSearchProvider"),Ze.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(H(S,"textSearchProvider"),Ze.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(H(S,"aiTextSearchProvider"),H(S,"textSearchProvider"),Ze.registerAITextSearchProviderOld(v,b)),registerFileSearchProviderNew:(v,b)=>(H(S,"fileSearchProviderNew"),Ze.registerFileSearchProvider(v,b)),registerTextSearchProviderNew:(v,b)=>(H(S,"textSearchProviderNew"),Ze.registerTextSearchProvider(v,b)),registerAITextSearchProviderNew:(v,b)=>(H(S,"aiTextSearchProviderNew"),H(S,"textSearchProviderNew"),Ze.registerAITextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(H(S,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(H(S,"resolvers"),Ks.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(H(S,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,I)=>N(Br.onDidCreateFile)(v,b,I),onDidDeleteFiles:(v,b,I)=>N(Br.onDidDeleteFile)(v,b,I),onDidRenameFiles:(v,b,I)=>N(Br.onDidRenameFile)(v,b,I),onWillCreateFiles:(v,b,I)=>N(Br.getOnWillCreateFileEvent(S))(v,b,I),onWillDeleteFiles:(v,b,I)=>N(Br.getOnWillDeleteFileEvent(S))(v,b,I),onWillRenameFiles:(v,b,I)=>N(Br.getOnWillRenameFileEvent(S))(v,b,I),openTunnel:v=>(H(S,"tunnels"),m.openTunnel(S,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return H(S,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,I)=>(H(S,"tunnels"),N(m.onDidChangeTunnels)(v,b,I)),registerPortAttributesProvider:(v,b)=>(H(S,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(H(S,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(H(S,"timeline"),_i.registerTimelineProvider(v,b,S.identifier,Y.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(H(S,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,I)=>N(n.onDidGrantWorkspaceTrust)(v,b,I),registerEditSessionIdentityProvider:(v,b)=>(H(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,I)=>(H(S,"editSessionIdentityProvider"),N(n.getOnWillCreateEditSessionIdentityEvent(S))(v,b,I)),registerCanonicalUriProvider:(v,b)=>(H(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,I)=>(H(S,"canonicalUriProvider"),n.provideCanonicalUri(v,b,I))},Be={get inputBox(){return w.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),Er.getLastInputBox(S)},createSourceControl(v,b,I){return Er.createSourceControl(S,v,b,I)}},ut={createCommentController(v,b){return Ys.createCommentController(S,v,b)}},Lt={get activeDebugSession(){return ve.activeDebugSession},get activeDebugConsole(){return ve.activeDebugConsole},get breakpoints(){return ve.breakpoints},get activeStackItem(){return ve.activeStackItem},registerDebugVisualizationProvider(v,b){return H(S,"debugVisualization"),ve.registerDebugVisualizationProvider(S,v,b)},registerDebugVisualizationTreeProvider(v,b){return H(S,"debugVisualization"),ve.registerDebugVisualizationTree(S,v,b)},onDidStartDebugSession(v,b,I){return N(ve.onDidStartDebugSession)(v,b,I)},onDidTerminateDebugSession(v,b,I){return N(ve.onDidTerminateDebugSession)(v,b,I)},onDidChangeActiveDebugSession(v,b,I){return N(ve.onDidChangeActiveDebugSession)(v,b,I)},onDidReceiveDebugSessionCustomEvent(v,b,I){return N(ve.onDidReceiveDebugSessionCustomEvent)(v,b,I)},onDidChangeBreakpoints(v,b,I){return N(ve.onDidChangeBreakpoints)(v,b,I)},onDidChangeActiveStackItem(v,b,I){return N(ve.onDidChangeActiveStackItem)(v,b,I)},registerDebugConfigurationProvider(v,b,I){return ve.registerDebugConfigurationProvider(v,b,I||Ef.Initial)},registerDebugAdapterDescriptorFactory(v,b){return ve.registerDebugAdapterDescriptorFactory(S,v,b)},registerDebugAdapterTrackerFactory(v,b){return ve.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,I){return!I||typeof I=="object"&&"configuration"in I?ve.startDebugging(v,b,{parentSession:I}):ve.startDebugging(v,b,I||{})},stopDebugging(v){return ve.stopDebugging(v)},addBreakpoints(v){return ve.addBreakpoints(v)},removeBreakpoints(v){return ve.removeBreakpoints(v)},asDebugSourceUri(v,b){return ve.asDebugSourceUri(v,b)}},dt={registerTaskProvider:(v,b)=>at.registerTaskProvider(S,v,b),fetchTasks:v=>at.fetchTasks(v),executeTask:v=>at.executeTask(S,v),get taskExecutions(){return at.taskExecutions},onDidStartTask:(v,b,I)=>N(at.onDidStartTask)(v,b,I),onDidEndTask:(v,b,I)=>N(at.onDidEndTask)(v,b,I),onDidStartTaskProcess:(v,b,I)=>N(at.onDidStartTaskProcess)(v,b,I),onDidEndTaskProcess:(v,b,I)=>N(at.onDidEndTaskProcess)(v,b,I)},kr={createNotebookController(v,b,I,ye,et){return yt.createNotebookController(S,v,b,I,ye,Tt(S,"notebookMessaging")?et:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>pe.registerNotebookCellStatusBarItemProvider(S,v,b),createRendererMessaging(v){return xt.createRendererMessaging(S,v)},createNotebookControllerDetectionTask(v){return H(S,"notebookKernelSource"),yt.createNotebookControllerDetectionTask(S,v)},registerKernelSourceActionProvider(v,b){return H(S,"notebookKernelSource"),yt.registerKernelSourceActionProvider(S,v,b)},onDidChangeNotebookCellExecutionState(v,b,I){return H(S,"notebookCellExecutionState"),N(yt.onDidChangeNotebookCellExecutionState)(v,b,I)}},Wr={t(...v){if(typeof v[0]=="string"){const b=v.shift(),I=!v||typeof v[0]!="object"?v:v[0];return q.getMessage(S.identifier.value,{message:b,args:I})}return q.getMessage(S.identifier.value,v[0])},get bundle(){return q.getBundle(S.identifier.value)},get uri(){return q.getBundleUri(S.identifier.value)}},xa={transferActiveChat(v){return H(S,"interactive"),_t.transferActiveChat(v)}},jl={getRelatedInformation(v,b){return H(S,"aiRelatedInformation"),U.getRelatedInformation(S,v,b)},registerRelatedInformationProvider(v,b){return H(S,"aiRelatedInformation"),U.registerRelatedInformationProvider(S,v,b)},registerEmbeddingVectorProvider(v,b){return H(S,"aiRelatedInformation"),ce.registerEmbeddingVectorProvider(S,v,b)}},_l={registerChatResponseProvider(v,b,I){return H(S,"chatProvider"),W.registerLanguageModel(S,v,b,I)},registerChatVariableResolver(v,b,I,ye,et,Nt,ka,wE){return H(S,"chatVariableResolver"),D.registerVariableResolver(S,v,b,I,ye,et,Nt,ka,wE?.id)},registerMappedEditsProvider(v,b){return H(S,"mappedEditsProvider"),Ie.registerMappedEditsProvider(S,v,b)},registerMappedEditsProvider2(v){return H(S,"mappedEditsProvider"),ti.registerMappedEditsProvider(S,v)},createChatParticipant(v,b){return _t.createChatAgent(S,v,b)},createDynamicChatParticipant(v,b,I){return H(S,"chatParticipantPrivate"),_t.createDynamicChatAgent(S,v,b,I)},registerChatParticipantDetectionProvider(v){return H(S,"chatParticipantAdditions"),_t.registerChatParticipantDetectionProvider(S,v)}},Bl={selectChatModels:v=>W.selectLanguageModels(S,v??{}),onDidChangeChatModels:(v,b,I)=>W.onDidChangeProviders(v,b,I),registerChatModelProvider:(v,b,I)=>(H(S,"chatProvider"),W.registerLanguageModel(S,v,b,I)),get embeddingModels(){return H(S,"embeddings"),le.embeddingsModels},onDidChangeEmbeddingModels:(v,b,I)=>(H(S,"embeddings"),le.onDidChange(v,b,I)),registerEmbeddingsProvider(v,b){return H(S,"embeddings"),le.registerEmbeddingsProvider(S,v,b)},async computeEmbeddings(v,b,I){return H(S,"embeddings"),le.computeEmbeddings(v,b,I)},registerTool(v,b){return H(S,"lmTools"),F.registerTool(S,v,b)},invokeTool(v,b,I){return H(S,"lmTools"),F.invokeTool(v,b,I)},get tools(){return H(S,"lmTools"),F.tools}},Ea={registerSpeechProvider(v,b){return H(S,"speech"),lt.registerProvider(S.identifier,v,b)}};return{version:t.version,ai:jl,authentication:E,commands:k,comments:ut,chat:_l,debug:Lt,env:C,extensions:_,interactive:xa,l10n:Wr,languages:K,lm:Bl,notebooks:kr,scm:Be,speech:Ea,tasks:dt,tests:T,window:oe,workspace:ke,Breakpoint:Mo,TerminalOutputAnchor:Cg,ChatResultFeedbackKind:Nc,ChatVariableLevel:pm,ChatCompletionItem:HC,CallHierarchyIncomingCall:L5,CallHierarchyItem:Pg,CallHierarchyOutgoingCall:N5,CancellationError:$i,CancellationTokenSource:At,CandidatePortSource:dp,CodeAction:ah,CodeActionKind:gt,CodeActionTriggerKind:fc,CodeLens:ch,Color:Ro,ColorInformation:ph,ColorPresentation:gh,ColorThemeKind:Us,CommentMode:Zg,CommentState:Xg,CommentThreadCollapsibleState:Sc,CommentThreadState:Cc,CommentThreadApplicability:Ic,CommentThreadFocus:Dc,CompletionItem:hh,CompletionItemKind:ge,CompletionItemTag:gc,CompletionList:Do,CompletionTriggerKind:Io,ConfigurationTarget:No,CustomExecution:zg,DebugAdapterExecutable:kh,DebugAdapterInlineImplementation:Ec,DebugAdapterNamedPipeServer:$h,DebugAdapterServer:xc,DebugConfigurationProviderTriggerKind:Ef,DebugConsoleMode:Ah,DebugVisualization:LC,DecorationRangeBehavior:In,Diagnostic:rh,DiagnosticRelatedInformation:lc,DiagnosticSeverity:er,DiagnosticTag:Sn,Disposable:Ue,DocumentHighlight:nh,DocumentHighlightKind:uc,MultiDocumentHighlight:oh,DocumentLink:fh,DocumentSymbol:dc,EndOfLine:di,EnvironmentVariableMutatorType:$o,EvaluatableExpression:Sh,InlineValueText:Ch,InlineValueVariableLookup:Ih,InlineValueEvaluatableExpression:Dh,InlineCompletionTriggerKind:kc,EventEmitter:R,ExtensionKind:Ln,ExtensionMode:_o,ExternalUriOpenerPriority:sm,FileChangeType:Oo,FileDecoration:em,FileDecoration2:em,FileSystemError:Mt,FileType:gn,FilePermission:po,FoldingRange:Jg,FoldingRangeKind:es,FunctionBreakpoint:Rn,InlineCompletionItem:Fg,InlineCompletionList:Mg,Hover:ih,VerboseHover:sh,HoverVerbosityAction:Dg,IndentAction:yv,Location:jr,MarkdownString:Rr,OverviewRulerLane:T1,ParameterInformation:Ag,PortAutoForwardAction:om,Position:Re,ProcessExecution:Lo,ProgressLocation:Pn,QuickInputButtonLocation:Kg,QuickInputButtons:Pc,Range:De,RelativePattern:Fo,Selection:Ki,SelectionRange:pc,SemanticTokens:Uo,SemanticTokensBuilder:RC,SemanticTokensEdit:j5,SemanticTokensEdits:Ph,SemanticTokensLegend:Yg,ShellExecution:Dn,ShellQuoting:Bg,SignatureHelp:Rg,SignatureHelpTriggerKind:Lg,SignatureInformation:Tg,SnippetString:$n,SourceBreakpoint:Tn,StandardTokenType:Hs,StatusBarAlignment:Ms,SymbolInformation:So,SymbolKind:st,SymbolTag:hc,Task:vh,TaskGroup:wc,TaskPanelKind:_g,TaskRevealKind:jg,TaskScope:Os,TerminalLink:EC,TerminalQuickFixTerminalCommand:$C,TerminalQuickFixOpener:kC,TerminalLocation:Hg,TerminalProfile:SC,TerminalExitReason:Ug,TerminalShellExecutionCommandLineConfidence:mh,TextDocumentSaveReason:Po,TextEdit:Fs,SnippetTextEdit:Ig,TextEditorCursorStyle:Oi,TextEditorLineNumbersStyle:fi,TextEditorRevealType:dh,TextEditorSelectionChangeKind:Ao,SyntaxTokenType:To,TextDocumentChangeReason:vc,ThemeColor:yc,ThemeIcon:or,TreeItem:wh,TreeItemCheckboxState:Li,TreeItemCollapsibleState:An,TypeHierarchyItem:am,UIKind:Pa,Uri:x,ViewColumn:mc,WorkspaceEdit:kn,DocumentPasteTriggerKind:qg,DocumentDropEdit:Vg,DocumentDropOrPasteEditKind:xh,DocumentPasteEdit:DC,InlayHint:uh,InlayHintLabelPart:lh,InlayHintKind:Ng,RemoteAuthorityResolverError:ko,ResolvedAuthority:yC,ManagedResolvedAuthority:eh,SourceControlInputBoxValidationType:Og,ExtensionRuntime:Oh,TimelineItem:rm,NotebookRange:ts,NotebookCellKind:Nn,NotebookCellExecutionState:jo,NotebookCellData:Rh,NotebookData:_5,NotebookRendererScript:z5,NotebookCellStatusBarAlignment:Nh,NotebookEditorRevealType:Fh,NotebookCellOutput:Lh,NotebookCellOutputItem:B5,NotebookCellStatusBarItem:NC,NotebookControllerAffinity:tm,NotebookControllerAffinity2:Mh,NotebookEdit:th,NotebookKernelSourceAction:FC,NotebookVariablesRequestKind:Tc,PortAttributes:OC,LinkedEditingRanges:MC,TestResultState:im,TestRunRequest:Uh,TestMessage:Hh,TestMessageStackFrame:UC,TestTag:Rc,TestRunProfileKind:Bo,TextSearchCompleteMessageType:Ld,DataTransfer:bc,DataTransferItem:bh,TestCoverageCount:jh,FileCoverage:Lc,FileCoverage2:Lc,StatementCoverage:W5,BranchCoverage:V5,DeclarationCoverage:q5,WorkspaceTrustState:nm,LanguageStatusSeverity:Co,QuickPickItemKind:Ac,InputBoxValidationSeverity:Ho,TabInputText:cm,TabInputTextDiff:Bh,TabInputTextMerge:G5,TabInputCustom:lm,TabInputNotebook:um,TabInputNotebookDiff:hm,TabInputWebview:Q5,TabInputTerminal:J5,TabInputInteractiveWindow:Z5,TabInputChat:X5,TabInputTextMultiDiff:Y5,TelemetryTrustedValue:a1,LogLevel:_e,EditSessionIdentityMatch:xv,InteractiveSessionVoteDirection:dm,ChatCopyKind:fm,InteractiveEditorResponseFeedbackKind:gm,DebugStackFrame:U5,DebugThread:H5,RelatedInformationType:vm,SpeechToTextStatus:wm,TextToSpeechStatus:bm,PartialAcceptTriggerKind:Cn,KeywordRecognitionStatus:ym,ChatResponseMarkdownPart:zh,ChatResponseFileTreePart:Vh,ChatResponseAnchorPart:qh,ChatResponseProgressPart:Oc,ChatResponseProgressPart2:Gh,ChatResponseReferencePart:rs,ChatResponseReferencePart2:rs,ChatResponseCodeCitationPart:Zh,ChatResponseCodeblockUriPart:Jh,ChatResponseWarningPart:Uc,ChatResponseTextEditPart:Hc,ChatResponseMarkdownWithVulnerabilitiesPart:Fc,ChatResponseCommandButtonPart:Qh,ChatResponseDetectedParticipantPart:Mc,ChatResponseConfirmationPart:Wh,ChatResponseMovePart:Xh,ChatResponseReferencePartStatusKind:mm,ChatRequestTurn:K5,ChatResponseTurn:e6,ChatLocation:pi,ChatRequestEditorData:t6,ChatRequestNotebookData:r6,LanguageModelChatMessageRole:Gr,LanguageModelChatMessage:i6,LanguageModelChatMessageToolResultPart:Yh,LanguageModelChatResponseTextPart:_c,LanguageModelChatResponseToolCallPart:jc,LanguageModelError:is,NewSymbolName:AC,NewSymbolNameTag:Qg,NewSymbolNameTriggerKind:$c,InlineEdit:jC,InlineEditTriggerKind:Bc,ExcludeSettingOptions:Jr,TextSearchContextNew:Xm,TextSearchMatchNew:Vs,TextSearchCompleteMessageTypeNew:Ld}}}var kf,i0=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.e=i,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),lr("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();lr("code/extHost/didWaitForConfig");const r=await this.g.getExtensionPathIndex();this.register(new KR(this.c,r,this.d,t,this.i)),this.register(this.e.createInstance(s0)),this.h.remote.isRemote&&this.register(this.e.createInstance(n0,r,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};i0=__decorate([__param(2,du),__param(3,as),__param(4,Qs),__param(5,ir),__param(6,Xe)],i0);var s0=class{static{kf=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&kf.a.size){const r=cn(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=kf.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};s0=kf=__decorate([__param(0,ir)],s0);var KR=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new Zi}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(yI,this.e,this.f)}return this.b}},n0=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(Z.MainThreadTelemetry);const s=i.getProxy(Z.MainThreadWindow);this.c=(n,o)=>{const a=x.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};n0=__decorate([__param(2,Qe)],n0);var o0=class{constructor(t,r){this.a=t.getProxy(Z.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:tL(s,this.b)}),this.c&&this.f(t,i,s)}};o0=__decorate([__param(0,Qe),__param(1,ir)],o0);var eL=1e5;function tL(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=_$(r);return i.length>eL?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var a0=class extends o0{constructor(t,r){super(t,r)}f(t,r,i){r.apply(console,i)}};a0=__decorate([__param(0,Qe),__param(1,ir)],a0);var rL=class extends i0{j(){}getModule(e,t){for(const r of this.b){const i=r(e);if(i){e=i;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},iL=class extends B1{constructor(){super(...arguments),this.extensionRuntime=Oh.Webworker}async vb(){this.h.createInstance(a0);const e=this.h.invokeFunction(YR);this.r=this.h.createInstance(rL,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Bb()}wb(e){return e.browser}async xb(e,t,r){t=t.with({path:sL(t.path,".js")});const i=e?.identifier.value;i&&performance.mark(`code/extHost/willFetchExtensionCode/${i}`);const s=x.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(i&&performance.mark(`code/extHost/didFetchExtensionCode/${i}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(p){throw console.error(i?`Loading code for extension ${i} failed: ${p.message}`:`Loading code failed: ${p.message}`),console.error(`${t.toString(!0)}${typeof p.line=="number"?` line ${p.line}`:""}${typeof p.column=="number"?` column ${p.column}`:""}`),console.error(p),p}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},f=p=>{const m=this.r.getModule(p,t);if(m===void 0)throw new Error(`Cannot load module '${p}'`);return m};try{return r.codeLoadingStart(),i&&performance.mark(`code/extHost/willLoadExtensionCode/${i}`),l(h,u,f),h.exports!==u?h.exports:u}finally{i&&performance.mark(`code/extHost/didLoadExtensionCode/${i}`),r.codeLoadingStop()}}async $setRemoteEnvironment(e){}async Bb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await Ii(10)}};function sL(e,t){return e.endsWith(t)?e:e+t}it(Xe,new Gi(bv,[!0],!0)),it(Qs,iL,0),it(d1,f1,0);var nx=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var ox=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function ax(e){return/^(file|vscode-remote):/i.test(e)}var cx=fetch.bind(self);function nL(e){self.fetch=async function(t,r){return t instanceof Request||ax(String(t))&&(t=(await e(x.parse(String(t)))).toString(!0)),cx(t,r)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,r,i,s,n){(async()=>(ax(r.toString())&&(r=(await e(x.parse(r.toString()))).toString(!0)),super.open(t,r,i??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,r){if(/^file:/i.test(t.toString()))t=R3.uriToBrowserUri(x.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(f){return typeof f=="string"||f instanceof URL?String(f).replace(/^file:\/\//i,"vscode-file://vscode-app"):f}const u=fetch.bind(self);self.fetch=function(f,p){return f instanceof Request?u(f,p):u(l(f),p)},self.XMLHttpRequest=class extends XMLHttpRequest{open(f,p,m,w,$){return super.open(f,l(p),m??!0,w,$)}};const h=importScripts.bind(self);self.importScripts=(...f)=>{h(...f.map(l))},h(c)}.toString()}('${t}'))`;r=r||{},r.name=`${name} -> ${r.name||Pr(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,r)}}else self.Worker=class extends fD{constructor(e,t){super(ox,e,{name:Pr(e.toString()),...t})}};var oL=new class{constructor(){this.pid=void 0}exit(e){nx()}},aL=class{constructor(){const e=new MessageChannel,t=new R;let r=!1;ox(e.port2,[e.port2]),e.port1.onmessage=i=>{const{data:s}=i;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=Ne.wrap(new Uint8Array(s,0,s.byteLength));if(dk(n,2)){r=!0,lx("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:i=>{if(!r){const s=i.buffer.buffer.slice(i.buffer.byteOffset,i.buffer.byteOffset+i.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function cL(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString());e.send(G0(0)),t({protocol:e,initData:s})});e.send(G0(1))})}var lx=e=>nx();function lL(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function uL(){lr("code/extHost/willConnectToRenderer");const e=new aL;return{onmessage(t){lL(t)&&cL(e.protocol).then(r=>{lr("code/extHost/didWaitForInitData");const i=new hD(r.protocol,r.initData,oL,null,t.data);nL(s=>i.asBrowserUri(s)),lx=s=>i.terminate(s)})}}}var hL=uL();self.onmessage=e=>hL.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/d78a74bcdfad14d5d3b1b782f87255d802b57511/core/vs/workbench/api/worker/extensionHostWorker.esm.js.map
